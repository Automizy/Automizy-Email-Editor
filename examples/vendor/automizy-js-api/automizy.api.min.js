(function(a){var b={};(function(){b=new function(){var c=this;c.xhr={},c.d={version:"0.1.0",login:false,hasOpenLoginForm:true,lastAjaxData:{},data:{},ad:{error:function(c,d,e){if(3===arguments.length)if(a.inArray(c.status,[404,405])>=0)alert(c.status+" ("+e+")");else if(a.inArray(c.status,[403])>=0)b.d.lastAjaxData=this,b.openLoginDialog();else if(a.inArray(c.status,[400,401])>=0)alert(c.status+" ("+e+")"),b.openLoginDialog();else console.error(c.status,d,e);else console.log("<----------- Automizy Api Error"),console.log(c),console.log(d),console.log(e),console.log("Automizy Api Error ----------->"),b.openLoginDialog()}}};var d=window.automizyApiBaseUrl||"https://api.automizy.com";var e=window.automizyApiLoginPhp||"https://app.automizy.com/php/login.php";var f=window.automizyApiRefreshPhp||"https://app.automizy.com/php/refresh.php";c.u={base:d,loginPhp:e,refreshPhp:f,oauth:d+"/oauth",segments:d+"/segments",campaigns:d+"/campaigns",splitTests:d+"/split-tests",newsletters:d+"/newsletters",automationEmails:d+"/automations/emails",contacts:d+"/contacts",contactTags:d+"/contacts/tags",customFields:d+"/custom-fields",users:d+"/users",jobs:d+"/jobs",webhooks:d+"/webhooks",images:d+"/images",templates:d+"/templates",forms:d+"/forms",automations:d+"/automations",account:d+"/account",accountStatistics:d+"/account/statistics",contactImports:d+"/contact-imports",tags:d+"/tags",clients:d+"/clients",updates:d+"/updates",plugins:d+"/plugins",milestones:d+"/milestones",leadScores:d+"/lead-scores",unbounceForms:d+"/external/unbounce/forms",autoDetectedForms:d+"/external/unbounce/forms",emailPreview:d+"/email-preview"},c.m=[]}})(),function(){b.cookie=function(){function a(){var a=0;var b={};for(;a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"===typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}try{if(g=JSON.stringify(e),/^[\{\[]/.test(g))e=g}catch(i){}return e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape),document.cookie=[b,"=",e,f.expires&&"; expires="+f.expires.toUTCString(),f.path&&"; path="+f.path,f.domain&&"; domain="+f.domain,f.secure&&"; secure"].join("")}if(!b)g={};var j=document.cookie?document.cookie.split("; "):[];var k=/(%[0-9A-Z]{2})+/g;var l=0;for(;l<j.length;l++){var m=j[l].split("=");var n=m[0].replace(k,decodeURIComponent);var o=m.slice(1).join("=");if('"'===o.charAt(0))o=o.slice(1,-1);if(o=c&&c(o,n)||o.replace(k,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(i){}if(b===n){g=o;break}if(!b)g[n]=o}return g}return d.get=d.set=d,d.getJSON=function(){return d.apply({json:true},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b()}()}(),function(){b.date={},b.date.now=function(){return(new Date).getTime()},b.date.timestamp=function(){return Math.floor(b.date.now()/1e3)}}(),function(){var c=function(){var a=this;a.d={access_token:b.cookie.get("AutomizyApiAccessToken")||false,refresh_token:b.cookie.get("AutomizyApiRefreshToken")||false,client_id:b.cookie.get("AutomizyApiClientId")||false,username:b.cookie.get("AutomizyApiUsername")||false,expires:parseInt(b.cookie.get("AutomizyApiExpires"))||0,scope:b.cookie.get("AutomizyApiScope")||null,token_type:b.cookie.get("AutomizyApiTokenType")||"Bearer",error:function(){},success:function(){},loginError:function(){},loginAjaxError:function(){},loginAjaxSuccess:function(){},refreshAjaxError:function(){},refreshAjaxSuccess:function(){},refreshLoopTimeout:false}};var d=c.prototype;d.refreshLoop=function(){var a=this;if(b.date.timestamp()>parseInt(b.cookie.get("AutomizyApiExpires"))-120)a.refresh();clearTimeout(a.d.refreshLoopTimeout),a.d.refreshLoopTimeout=setTimeout(function(){a.refreshLoop()},3e4)},d.refreshLoopStop=function(){var a=this;clearTimeout(a.d.refreshLoopTimeout)},d.refreshLoopStart=function(){var a=this;a.refreshLoop()},d.refreshLoopRestart=function(){var a=this;a.refreshLoopStop(),a.refreshLoopStart()},d.loggedIn=function(a){var c=this;if("undefined"!==typeof a)return c.d.loggedIn=b.parseBoolean(a),c;return c.d.loggedIn},d.get=function(){var a=this;if(false!==b.cookie.get("AutomizyApiAccessToken"))a.loggedIn(true),a.refreshLoopRestart();else a.refreshLoopStop(),a.loggedIn(false);return b.cookie.get("AutomizyApiAccessToken")},d.set=function(a){var c=this;if("undefined"!==typeof a.access_token)c.d.access_token=a.access_token,b.cookie.set("AutomizyApiAccessToken",a.access_token,c.cookieAttributes());if("undefined"!==typeof a.expires_in)c.d.expires=b.date.timestamp()+parseInt(a.expires_in)-10,b.cookie.set("AutomizyApiExpires",c.d.expires,c.cookieAttributes());if("undefined"!==typeof a.refresh_token)c.d.refresh_token=a.refresh_token,b.cookie.set("AutomizyApiRefreshToken",a.refresh_token,c.cookieAttributes());if("undefined"!==typeof a.scope)if(c.d.scope=a.scope,false!==c.d.scope)b.cookie.set("AutomizyApiScope",a.scope,c.cookieAttributes());if("undefined"!==typeof a.token_type)c.d.token_type=a.token_type,b.cookie.set("AutomizyApiTokenType",a.token_type,c.cookieAttributes());if("undefined"!==typeof a.client_id)c.d.client_id=a.client_id,b.cookie.set("AutomizyApiClientId",a.client_id,c.cookieAttributes());if("undefined"!==typeof a.username)c.d.username=a.username,b.cookie.set("AutomizyApiUsername",a.username,c.cookieAttributes());return true},d.refresh=function(){var c=this;return a.ajax({type:"POST",url:b.u.refreshPhp,data:{refresh_token:b.cookie.get("AutomizyApiRefreshToken"),username:b.cookie.get("AutomizyApiUsername")},success:function(a,b,d){c.set(a),c.loggedIn(true),c.refreshAjaxSuccess.apply(c,[a,b,d])},error:function(a,b,d){c.refreshAjaxError.apply(c,[a,b,d])}})},d.error=function(a){var b=this;if("function"===typeof a)return b.d.error=a,b;return b.d.error},d.success=function(a){var b=this;if("function"===typeof a)return b.d.success=a,b;return b.d.success},d.loginError=function(a){var b=this;if("function"===typeof a)return b.d.loginError=a,b;return b.d.loginError},d.loginAjaxError=function(a){var b=this;if("function"===typeof a)return b.d.loginAjaxError=a,b;return b.d.loginAjaxError},d.loginAjaxSuccess=function(a){var b=this;if("function"===typeof a)return b.d.loginAjaxSuccess=a,b;return b.d.loginAjaxSuccess},d.refreshAjaxError=function(a){var b=this;if("function"===typeof a)return b.d.refreshAjaxError=a,b;return b.d.refreshAjaxError},d.refreshAjaxSuccess=function(a){var b=this;if("function"===typeof a)return b.d.refreshAjaxSuccess=a,b;return b.d.refreshAjaxSuccess},d.passwordLogin=function(c){var d=this;var c=c||{};if(c.username=c.username||false,c.password=c.password||false,c.hash=c.hash||false,false===c.username||false===c.password)return d.loginError.apply(d,["The username and password must be provide!"]),false;b.cookie.set("AutomizyApiUsername",c.username,d.cookieAttributes());var e={username:c.username,password:c.password};if(false!==c.hash)e.hash=c.hash;return a.ajax({type:"POST",url:b.u.loginPhp,data:e,success:function(a,b,c){d.set(a),d.loggedIn(true),d.refreshLoopRestart(),d.d.loginAjaxSuccess.apply(d,[a,b,c])},error:function(a,b,c){d.d.loginAjaxError.apply(d,[a,b,c])}})},d.credentialsLogin=function(c){var d=this;var c=c||{};if(c.clientId=c.clientId||false,c.clientSecret=c.clientSecret||false,c.hash=c.hash||false,false===c.clientId||false===c.clientSecret)return d.loginError.apply(d,["The clientId and clientSecret must be provide!"]),false;var e={grant_type:"client_credentials",client_id:c.clientId,client_secret:c.clientSecret};if(false!==c.hash)e.hash=c.hash;return a.ajax({type:"POST",url:b.u.oauth,data:e,success:function(a,b,c){d.set(a),d.loggedIn(true),d.refreshLoopRestart(),d.d.loginAjaxSuccess.apply(d,[a,b,c])},error:function(a,b,c){d.d.loginAjaxError.apply(d,[a,b,c])}})},d.login=function(a){var b=this;var a=a||{};if("undefined"!==typeof a.username&&"undefined"!==typeof a.password)return b.passwordLogin(a);else if("undefined"!==typeof a.clientId&&"undefined"!==typeof a.clientSecret)return b.credentialsLogin(a);else return b.loginError.apply(b,["Missing parameters!"]),false},d.cookieAttributes=function(){var a={};if(location.href.indexOf(".protopmail.com")>=0)a.domain=".protopmail.com";else if(location.href.indexOf(".automizy.com")>=0)a.domain=".automizy.com";return a},d.logout=function(){var a=this;a.loggedIn(false),a.refreshLoopStop(),a.d.access_token=false,a.d.refresh_token=false,a.d.username=false,a.d.client_id=false,a.d.expires=0,b.cookie.remove("AutomizyApiAccessToken",a.cookieAttributes()),b.cookie.remove("AutomizyApiRefreshToken",a.cookieAttributes()),b.cookie.remove("AutomizyApiClientId",a.cookieAttributes()),b.cookie.remove("AutomizyApiExpires",a.cookieAttributes()),b.cookie.remove("AutomizyApiUsername",a.cookieAttributes())},b.m.Token=c,b.d.token=new c,b.token=function(){return b.d.token}}(),function(){b.initBasicFunctions=function(c,d){var c=c||false;if(false===c)return false;var d=d||false;if(false===d)return false;var e=d.toLowerCase();var f=d.charAt(0).toLowerCase()+d.slice(1);var g=c.prototype;g.init=g.init||function(){var a=this;if(a.d.xhr=a.d.xhr||{},a.d.xhr.get=false,a.d.xhr.insert=false,a.d.xhr.update=false,a.d.xhr["delete"]=false,a.d.xhr["export"]=false,a.d.xhr.getAll=false,a.d.xhr.getRecordById=false,a.d.xhr.getFieldById=false,a.d.xhr.getAllIdNamePair=false,"undefined"===typeof a.d.urlSuffix)a.d.urlSuffix="";if("undefined"===typeof a.d.itemsDir)a.d.itemsDir=false;if("undefined"===typeof a.d.fields)a.d.fields=false;if("undefined"===typeof a.d.format)a.d.format=false;if("undefined"===typeof a.d.limit)a.d.limit=false;if("undefined"===typeof a.d.page)a.d.page=false;if("undefined"===typeof a.d.order_by)a.d.order_by=false;if("undefined"===typeof a.d.order_dir)a.d.order_dir=false;if("undefined"===typeof a.d.links)a.d.links=false;if("undefined"===typeof a.d.set)a.d.set={};if("undefined"===typeof a.d.hasEmbedded)a.d.hasEmbedded=true;if("undefined"===typeof a.d.hasId)a.d.hasId=true;if("undefined"===typeof a.d.parentName)a.d.parentName=f},g.initParameter=g.initParameter||function(a){var b=this;if("undefined"!==typeof a.urlSuffix)b.urlSuffix(a.urlSuffix);if("undefined"!==typeof a.itemsDir)b.itemsDir(a.itemsDir);if("undefined"!==typeof a.format)b.format(a.format);if("undefined"!==typeof a.fields)b.fields(a.fields);if("undefined"!==typeof a.limit)b.limit(a.limit);if("undefined"!==typeof a.page)b.page(a.page);if("undefined"!==typeof a.orderBy||"undefined"!==typeof a.order_by)b.orderBy(a.orderBy||a.order_by);if("undefined"!==typeof a.orderDir||"undefined"!==typeof a.order_dir)b.orderDir(a.orderDir||a.order_dir);if("undefined"!==typeof a.order)b.order(a.order);if("undefined"!==typeof a.links)b.links(a.links);if("undefined"!==typeof a.url)b.url(a.url)},g.setOptions=g.setOptions||function(a){if("undefined"!==typeof a.fields)t.d.option.fields=a.fields;if("undefined"!==typeof a.format)t.d.option.format=a.format;if("undefined"!==typeof a.limit)t.d.option.limit=a.limit;if("undefined"!==typeof a.page)t.d.option.page=a.page;if("undefined"!==typeof a.where)t.d.option.where=a.where;if("undefined"!==typeof a.order_by)t.d.option.order_by=a.order_by;if("undefined"!==typeof a.order_dir)t.d.option.order_dir=a.order_dir;if("undefined"!==typeof a.order)t.d.option.order=a.order;if("undefined"!==typeof a.links)t.d.option.links=a.links},g.getDataFromParameter=g.getDataFromParameter||function(a){var b={};if(false!==a.fields)b.fields=a.fields;if(false!==a.format)b.format=a.format;if(false!==a.limit)b.limit=a.limit;if(false!==a.page)b.page=a.page;if(false!==a.where)b.where=a.where;if(false!==a.order_dir)b.order_dir=a.order_dir;if(false!==a.order_by)b.order_by=a.order_by;if(false!==a.order)b.order=a.order;if(false!==a.links)b.links=a.links;return b},g.get=g.get||function(c,d,e){var f=this;var d=true;if("undefined"!==typeof e)e=b.parseBoolean(e);else var e=true;if("undefined"!==typeof d)d=b.parseBoolean(d);if(d&&("object"===typeof c||"array"===typeof c))f.setOptions(c);var g={};if("object"===typeof c||"array"===typeof c)g=f.getDataFromParameter(c);else for(var h in f.d.option)if(false!==f.d.option[h])g[h]=f.d.option[h];if("undefined"===typeof g.order&&"undefined"!==typeof g.order_by)g.order=g.order_by+":"+g.order_dir||"asc";if(f.d.xhr.get=a.ajax({url:f.d.url+f.d.urlSuffix,type:"GET",dataType:"json",async:e,data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),!e)return f.d.xhr.get.responseJSON;return f.d.xhr.get},g.getSync=g.getSync||function(a,b){var a=a||false;var b=b||false;return this.get.apply(this,[a,b,false])},g["export"]=g["export"]||function(c,d,e){var f=this;var d=true;if("undefined"!==typeof e)e=b.parseBoolean(e);else var e=true;if("undefined"!==typeof d)d=b.parseBoolean(d);if(d&&("object"===typeof c||"array"===typeof c))f.setOptions(c);var g={};if("object"===typeof c||"array"===typeof c)g=f.getDataFromParameter(c);else for(var h in f.d.option)if(false!==f.d.option[h])g[h]=f.d.option[h];if("undefined"===typeof g.order&&"undefined"!==typeof g.order_by)g.order=g.order_by+":"+g.order_dir||"asc";if(g.showContent=false,f.d.xhr["export"]=a.ajax({xhr:function(){var a=new window.XMLHttpRequest;return a.addEventListener("progress",function(a){if(a.lengthComputable){var b=a.loaded/a.total;console.log(parseInt(100*b))}},false),a},url:f.d.url+f.d.urlSuffix,type:"GET",async:e,data:g,headers:{Authorization:"Bearer "+b.token().get(),Accept:"text/csv"},error:b.token().error()}),!e)return f.d.xhr["export"].responseJSON;return f.d.xhr["export"]},g.insert=g.insert||function(c,d){b.xhr[f+"Modified"]=true;var e=this;if("undefined"!==typeof d)d=b.parseBoolean(d);else var d=true;var g=c;if(e.d.xhr.insert=a.ajax({url:e.d.url+e.d.urlSuffix,type:"POST",dataType:"json",async:d,data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),!d)return e.d.xhr.insert.responseJSON;return e.d.xhr.insert},g.insertSync=g.insertSync||function(a){var a=a||false;return this.insert.apply(this,[a,false])},g.update=g.update||function(c,d,e){b.xhr[f+"Modified"]=true;var g=this;if("undefined"!==typeof e)e=b.parseBoolean(e);else var e=true;var h=c;var d=d||c.id||0;if(delete h.id,g.d.xhr.update=a.ajax({url:g.d.url+"/"+d+g.d.urlSuffix,type:"PATCH",dataType:"json",async:e,data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),!e)return g.d.xhr.update.responseJSON;return g.d.xhr.update},g.updateSync=g.updateSync||function(a,b){var a=a||false;var b=b||false;return this.update.apply(this,[a,b,false])},g["delete"]=g["delete"]||function(c,d){b.xhr[f+"Modified"]=true;var e=this;if("undefined"!==typeof d)d=b.parseBoolean(d);else var d=true;if(e.d.xhr["delete"]=a.ajax({url:e.d.url+"/"+c+e.d.urlSuffix,type:"DELETE",dataType:"json",async:d,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),!d)return e.d.xhr["delete"].responseJSON;return e.d.xhr["delete"]},g.deleteSync=g.deleteSync||function(a){var a=a||false;return this["delete"].apply(this,[a,false])},g.getAll=g.getAll||function(){var c=this;return c.d.xhr.getAll=a.ajax({url:c.d.url+c.d.urlSuffix,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),c.d.xhr.getAll},g.getRecordById=g.getRecordById||function(c){var d=this;var e={};for(var f in d.d.option)if(false!==d.d.option[f])e[f]=d.d.option[f];if("undefined"===typeof e.order&&"undefined"!==typeof e.order_by)e.order=e.order_by+":"+e.order_dir||"asc";return d.d.xhr.getRecordById=a.ajax({url:d.d.url+"/"+c+d.d.urlSuffix,type:"GET",dataType:"json",data:e,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),d.d.xhr.getRecordById},g.getFieldById=g.getFieldById||function(c,d){var e=this;var f=d.split(".");return e.d.xhr.getFieldById=a.ajax({url:e.d.url+"/"+c+e.d.urlSuffix,type:"GET",dataType:"json",data:{fields:f[0],links:""},headers:{Authorization:"Bearer "+b.token().get()},converters:{"text json":function(b){var c=a.parseJSON(b)[f[0]];for(var d=1;d<f.length;d++)c=c[f[d]];return c}},error:b.token().error()}),e.d.xhr.getFieldById},g.getAllIdNamePair=g.getAllIdNamePair||function(c){var d=this;var e=c.split(".");return d.d.xhr.getAllIdNamePair=a.ajax({url:d.d.url+d.d.urlSuffix,type:"GET",dataType:"json",data:{fields:"id,"+e[0],links:""},headers:{Authorization:"Bearer "+b.token().get()},converters:{"text json":function(b){var c=a.parseJSON(b)._embedded;c=c[Object.keys(c)[0]];var d=[];for(var f in c){var g=c[f][e[0]];for(var h=1;h<e.length;h++)g=g[e[h]];d.push([c[f].id,g])}return d}},error:b.token().error()}),d.d.xhr.getAllIdNamePair},g.urlSuffix=g.urlSuffix||function(a){var b=this;if("undefined"!==typeof a)return b.d.urlSuffix=a,b;return b.d.urlSuffix},g.itemsDir=g.itemsDir||function(a){var b=this;if("undefined"!==typeof a)return b.d.itemsDir=a,b;return b.d.itemsDir},g.fields=g.fields||function(a){var b=this;if("undefined"!==typeof a){if(false!==a&&a.length>0)b.d.option.fields=a;return b}return b.d.option.fields},g.limit=g.limit||function(a){var b=this;if("undefined"!==typeof a)return b.d.option.limit=a,b;return b.d.option.limit},g.format=g.format||function(a){var b=this;if("undefined"!==typeof a)return b.d.option.format=a,b;return b.d.option.format},g.page=g.page||function(a){var b=this;if("undefined"!==typeof a)return b.d.option.page=a,b;return b.d.option.page},g.where=g.where||function(a){var b=this;if("undefined"!==typeof a)return b.d.option.where=a,b;return b.d.option.where},g.orderBy=g.order_by=g.orderBy||g.order_by||function(a){var b=this;if("undefined"!==typeof a){if(false===a)return b;return b.d.option.order_by=a,b}return b.d.option.order_by},g.orderDir=g.order_dir=g.orderDir||g.order_dir||function(a){var b=this;if("undefined"!==typeof a){if(false===a)return b;return b.d.option.order_dir=a,b}return b.d.option.order_dir},g.order=g.order||function(a){var b=this;if("undefined"!==typeof a){if(false===a)return b;return b.d.option.order=a,b}return b.d.option.order},g.links=g.links||function(a){var b=this;if("undefined"!==typeof a)return b.d.option.links=a,b;return b.d.option.links},g.set=g.values=g.set||g.values||function(a,b){var c=this;if("string"===typeof a&&"undefined"!==typeof b)return c.d.option.set[a]=b,c;if("object"===typeof a||"array"===typeof a){for(var d in a)c.d.option.set[d]=a[d];return c}return c.d.option.set},b.m[d]=c,b[f]=function(a){var b=new c(a);return b},b.d.data[f]={},b.xhr[f+"Running"]=false,b.xhr[f+"FirstRunCompleted"]=false,b.xhr[f+"Modified"]=false,b.xhr[f+"GetRunning"]=false,b["refresh"+d+"DefaultOptions"]={},b["refresh"+d]=function(a){var c=a||b["refresh"+d+"DefaultOptions"];b["refresh"+d+"DefaultOptions"]=c;var e=b[f](c);return b.xhr[f+"Running"]=true,b.xhr[f]=e.limit(2147483648).get().done(function(a){if(b.xhr[f+"FirstRunCompleted"]=true,b.xhr[f+"Running"]=false,e.d.hasEmbedded)var c=a._embedded[e.d.parentName];else var c=a;for(var d=0;d<c.length;d++)if(e.d.hasId)b.d.data[f][c[d].id]=c[d];else b.d.data[f][c[d]]=c[d]}),b.xhr[f]},b["get"+d]=function(a){if(true===b.xhr[f+"Modified"]){if("undefined"!==typeof a)return b["refresh"+d](a).done(function(){b.xhr[f+"Modified"]=false,b.xhr[f+"GetRunning"]=false});return b["refresh"+d]().done(function(){b.xhr[f+"Modified"]=false,b.xhr[f+"GetRunning"]=false})}if(b.xhr[f+"GetRunning"])return b.xhr[f];if(b.xhr[f+"GetRunning"]=true,true===b.xhr[f+"FirstRunCompleted"]&&"undefined"===typeof a)return b.xhr[f];if("undefined"!==typeof a)return b["refresh"+d](a).done(function(){b.xhr[f+"GetRunning"]=false});return b["refresh"+d]().done(function(){b.xhr[f+"GetRunning"]=false})}}}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.segments},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.calculateByArray=function(c){var d=this;return a.ajax({url:d.d.url+"/calculate"+d.d.urlSuffix,type:"GET",data:c,dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.calculateById=function(c){var d=this;return a.ajax({url:d.d.url+"/"+c+"/calculate"+d.d.urlSuffix,type:"GET",data:{waitForResponse:true,saveAfterFinish:false},dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.calculateAndSave=function(c){var d=this;return a.ajax({url:d.d.url+"/"+c+"/calculate"+d.d.urlSuffix,type:"GET",data:{waitForResponse:true,saveAfterFinish:true},dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},b.initBasicFunctions(c,"Segments")}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.campaigns},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.getOpenStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getShareStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/shares"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getUnsubscribeStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/unsubscribes"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getBounceStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/bounces"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getGeoStatById=function(c,d,e){var f=this;var g={format:"raw"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/geo-locations"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;if("undefined"!==typeof f&&false!==f)h.step=f;return a.ajax({url:g.d.url+"/"+c+"/opens"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;if("undefined"!==typeof f&&false!==f)h.step=f;return a.ajax({url:g.d.url+"/"+c+"/clicks"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenDevicePieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"device"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickDevicePieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"device"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenDeviceTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"device"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/opens"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickDeviceTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"device"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/clicks"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenOsPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"os"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickOsPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"os"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenOsTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"os"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/opens"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickOsTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"os"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/clicks"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenBrowserPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"browser"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickBrowserPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"browser"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenBrowserTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"browser"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/opens"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickBrowserTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"browser"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/clicks"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getDomainTopListById=function(c,d,e,f){var g=this;var h={format:"raw"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;if("undefined"!==typeof f&&false!==f)h.limit=f;return a.ajax({url:g.d.url+"/"+c+"/domains"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenDomainListById=d.getOpenDomainPieById=function(c,d,e,f,g){var h=this;var i={format:"aggregate",groupBy:"domain"};if("undefined"!==typeof d&&false!==d)i.from=d;if("undefined"!==typeof e&&false!==e)i.to=e;if("undefined"!==typeof f&&false!==f)i.limit=f;if("undefined"!==typeof g&&false!==g)i.uniqueContacts=g;return a.ajax({url:h.d.url+"/"+c+"/opens"+h.d.urlSuffix,type:"GET",dataType:"json",data:i,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickDomainListById=d.getClickDomainPieById=function(c,d,e,f,g){var h=this;var i={format:"aggregate",groupBy:"domain"};if("undefined"!==typeof d&&false!==d)i.from=d;if("undefined"!==typeof e&&false!==e)i.to=e;if("undefined"!==typeof f&&false!==f)i.limit=f;if("undefined"!==typeof g&&false!==g)i.uniqueContacts=g;return a.ajax({url:h.d.url+"/"+c+"/clicks"+h.d.urlSuffix,type:"GET",dataType:"json",data:i,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenDomainTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"domain"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/opens"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickDomainTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline",groupBy:"domain"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/clicks"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getHeatMapById=function(c,d,e){var f=this;var g={format:"raw"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/heat-map"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getLinksById=function(c){var d=this;return a.ajax({url:d.d.url+"/"+c+"/links",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getCombinedById=function(c,d){var e=this;return a.ajax({url:e.d.url+"/"+c+"/combined",type:"POST",dataType:"json",data:d,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getStatisticsToPdfById=function(c){var d=this;return a.ajax({url:d.d.url+"/"+c,type:"GET",headers:{Authorization:"Bearer "+b.token().get(),Accept:"application/pdf"},error:b.token().error()})},b.initBasicFunctions(c,"Campaigns"),d.send=d.insert}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.splitTests},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.getOpenStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getShareStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/shares"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getUnsubscribeStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;
if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/unsubscribes"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getBounceStatById=function(c,d,e){var f=this;var g={format:"total"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/bounces"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getGeoStatById=function(c,d,e){var f=this;var g={format:"raw"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/geo-locations"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;if("undefined"!==typeof f&&false!==f)h.step=f;return a.ajax({url:g.d.url+"/"+c+"/opens"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;if("undefined"!==typeof f&&false!==f)h.step=f;return a.ajax({url:g.d.url+"/"+c+"/clicks"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenDevicePieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"device"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickDevicePieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"device"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenOsPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"os"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickOsPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"os"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenBrowserPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"browser"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickBrowserPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"browser"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getOpenDomainPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"domain"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/opens"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getClickDomainPieById=function(c,d,e){var f=this;var g={format:"aggregate",groupBy:"domain"};if("undefined"!==typeof d&&false!==d)g.from=d;if("undefined"!==typeof e&&false!==e)g.to=e;return a.ajax({url:f.d.url+"/"+c+"/clicks"+f.d.urlSuffix,type:"GET",dataType:"json",data:g,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},b.initBasicFunctions(c,"SplitTests"),d.send=d.insert}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.newsletters},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;c.copy=function(a,b,c){var d=this;var b=b||{};b.copyData=b.copyData||{};var c=c||function(){};return d.getRecordById(a).done(function(a){var e={name:b.name||(b.copyData.prefix||"")+a.name+(b.copyData.suffix||""),subject:b.subject||a.subject,editorCode:b.editorCode||a.editorCode,htmlCode:b.htmlCode||a.htmlCode,maxWidth:b.maxWidth||a.maxWidth,tags:b.tags||a.tags};return d.insert(e).done(function(a){c.apply(d,[a])})})},b.initBasicFunctions(a,"Newsletters")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.automationEmails,parentName:"emails"},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;c.copy=function(a,b,c){var d=this;var b=b||{};b.copyData=b.copyData||{};var c=c||function(){};return d.getRecordById(a).done(function(a){var e={name:b.name||(b.copyData.prefix||"")+a.name+(b.copyData.suffix||""),subject:b.subject||a.subject,editorCode:b.editorCode||a.editorCode,htmlCode:b.htmlCode||a.htmlCode,maxWidth:b.maxWidth||a.maxWidth,tags:b.tags||a.tags};return d.insert(e).done(function(a){c.apply(d,[a])})})},b.initBasicFunctions(a,"AutomationEmails")}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.contacts},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.getActivitiesById=function(c){var d=this;return a.ajax({url:d.d.url+"/"+c+"/activities",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},b.initBasicFunctions(c,"Contacts")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.customFields},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"CustomFields")}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.users},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d["switch"]=function(c){return a.ajax({url:b.u.users+"/switch-site",type:"POST",data:{site:c},dataType:"json",headers:{Authorization:"Bearer "+b.token().get()}}).done(function(a){b.token().set(a),b.token().refreshLoopRestart()}).error(function(a){})},b.initBasicFunctions(c,"Users")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.jobs},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"Jobs")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.webhooks},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"Webhooks")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.templates},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;c.copy=function(a,b,c){var d=this;var b=b||{};b.copyData=b.copyData||{};var c=c||function(){};return d.getRecordById(a).done(function(a){var e={name:b.name||(b.copyData.prefix||"")+a.name+(b.copyData.suffix||""),editorCode:b.editorCode||a.editorCode,htmlCode:b.htmlCode||a.htmlCode,maxWidth:b.maxWidth||a.maxWidth};return d.insert(e).done(function(a){c.apply(d,[a])})})},b.initBasicFunctions(a,"Templates")}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.forms},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.getFullTimeLineById=function(c,d,e,f){var g=this;var h={format:"timeline"};if("undefined"!==typeof d&&false!==d)h.from=d;if("undefined"!==typeof e&&false!==e)h.to=e;return a.ajax({url:g.d.url+"/"+c+"/conversion"+g.d.urlSuffix,type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},b.initBasicFunctions(c,"Forms")}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.automations,xhr:{}},c.init(),c.d.xhr.getNodesById=false,c.d.xhr.insertNode=false,c.d.xhr.deleteNode=false,c.d.xhr.updateNode=false,c.d.xhr.acceptDraft=false,c.d.xhr.discardDraft=false,"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.getNodesById=function(c){var d=this;return d.d.xhr.getNodesById=a.ajax({url:b.u.automations+"/"+c+"/nodes",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),d.d.xhr.getNodesById},d.insertNode=function(c,d){var e=this;return e.d.xhr.insertNode=a.ajax({url:b.u.automations+"/"+d+"/nodes",type:"POST",dataType:"json",data:c,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),e.d.xhr.insertNode},d.deleteNode=function(c,d,e){var f=this;var g=false;var h="";if("undefined"!==typeof e)g=parseInt(e);if(0===g||1===g)h="?keep="+g;return f.d.xhr.deleteNode=a.ajax({url:b.u.automations+"/"+c+"/nodes/"+d+h,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),f.d.xhr.deleteNode},d.updateNode=function(c,d,e){var f=this;return f.d.xhr.updateNode=a.ajax({url:b.u.automations+"/"+d+"/nodes/"+e,type:"PATCH",dataType:"json",data:c,headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),f.d.xhr.updateNode},d.acceptDraft=function(c){var d=this;return d.d.xhr.acceptDraft=a.ajax({url:b.u.automations+"/"+c+"/accept-draft",type:"POST",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),d.d.xhr.acceptDraft},d.discardDraft=function(c){var d=this;return d.d.xhr.discardDraft=a.ajax({url:b.u.automations+"/"+c+"/discard-draft",type:"POST",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()}),d.d.xhr.discardDraft},d.getCampaigns=function(){var c=this;return a.ajax({url:c.d.url+"/get-campaigns",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},moduleName="AutomationGetCampaigns",moduleNameLowerFirst="automationGetCampaigns",b.d.data[moduleNameLowerFirst]={},b.xhr[moduleNameLowerFirst+"Running"]=false,b["refresh"+moduleName]=function(){var a=b.automations();return b.xhr[moduleNameLowerFirst+"Running"]=true,b.xhr[moduleNameLowerFirst]=a.getCampaigns().done(function(a){b.xhr[moduleNameLowerFirst+"Running"]=false;var c=a;for(var d=0;d<c.length;d++)b.d.data[moduleNameLowerFirst][c[d].campaignId]=c[d]}),b.xhr[moduleNameLowerFirst]},b.initBasicFunctions(c,"Automations")}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.contactImports},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.getContactsByIdAndType=function(c,d){var e=this;return a.ajax({url:e.d.url+"/"+c+"/"+d,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()},error:b.token().error()})},d.getForbiddenContactsById=function(a){return this.getContactsByIdAndType(a,"creation-forbidden-errors")},d.getAlreadyInDatabaseContactsById=function(a){return this.getContactsByIdAndType(a,"already-in-database-errors")},d.getInvalidContactsById=function(a){return this.getContactsByIdAndType(a,"invalid-email-errors")},d.getUnsubscribedContactsById=function(a){return this.getContactsByIdAndType(a,"unsubscribed-errors")},b.initBasicFunctions(c,"ContactImports")}(),function(){var c=function(a){};var d=c.prototype;d.get=function(){return a.ajax({url:b.u.tags,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()}})},b.m.Tags=c,b.tags=function(a){var b=new c(a);return b}}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.milestones},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"Milestones")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.leadScores},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"LeadScores")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.contactTags,hasEmbedded:false,hasId:false},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"ContactTags")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.unbounceForms,hasEmbedded:false},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"UnbounceForms")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.autoDetectedForms,hasEmbedded:false},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"AutoDetectedForms")}(),function(){var c=function(a){};var d=c.prototype;d.get=function(){return a.ajax({url:b.u.account,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()}})},d.limits=function(){return a.ajax({url:b.u.account+"/limits",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()}})},d.getPackages=function(){return a.ajax({url:b.u.account+"/limits",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()}})},b.m.Account=c,b.account=function(a){var b=new c(a);return b}}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.accountStatistics},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"AccountStatistics")}(),function(){var c=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.clients},c.init(),"undefined"!==typeof a)c.initParameter(a)};var d=c.prototype;d.create=function(){return a.ajax({url:b.u.clients,type:"POST",dataType:"json",headers:{Authorization:"Bearer "+b.token().get()}})},b.initBasicFunctions(c,"Clients")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.updates},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"Updates")}(),function(){var a=function(a){var c=this;if(c.d={a:3,option:{},url:b.u.plugins},c.init(),"undefined"!==typeof a)c.initParameter(a)};var c=a.prototype;b.initBasicFunctions(a,"Plugins")}(),function(){b.parseBoolean=function(a,b){if("string"===typeof a)a=a.toLowerCase();switch(a){case true:case"true":case 1:case"1":case"on":case"yes":case"y":case"\u2713":case"\u2714":case"\u2611":case"\u2612":a=true;break;case false:case"false":case 0:case"0":case"off":case"no":case"n":case"x":case"\u2717":case"\u2718":case"\u2610":a=false;break;default:if(b)a=null;else a=false}return a}}(),function(){b.refreshTable=function(c){if("undefined"===typeof c||false===c)return false;var d=c.data("apiName");if("undefined"===typeof b[d])return false;var e=c.data("apiUrlSuffix");var f=c.data("apiItemsDir");var g=c.data("apiElementsDir");var h=c.data("apiFormat");var i=c.data("refreshComplete");var j=c.d.orderBy;var k=c.d.orderDir;var l=c.perPage();var m=c.page();var n=c.data("fields")||false;var o=false;var p=c.data("where")||[];var q=false;if("function"===typeof c.data("whereFunction")){var r=c.data("whereFunction")();if(false!==r)q=c.data("whereFunction")()}if("undefined"!==typeof c.data("xhr"))c.data("xhr").abort();if("undefined"===typeof e)e="";if("undefined"===typeof f)f=false;if("undefined"===typeof g)g=false;if("undefined"===typeof h)h=false;if("function"!==typeof i)i=function(){};if(false===n){n=[];var s=c.cols();for(var t=c.selectable()?1:0;t<s.length;t++)if(s[t].active())n.push(s[t].name());if(a.inArray("id",n)===-1)n.push("id");else o=true;n=n.join()}else n=JSON.stringify(n);if(("string"===typeof c.d.searchValue||"number"===typeof c.d.searchValue)&&c.d.searchValue.length>0){var s=c.cols();for(var t=0;t<s.length;t++){var u=c.d.settings.cols;var v={};for(var w=0;w<u.length;w++)v[u[w].name||0]=false===u[w].searchable?false:true;var x=s[t].name();if(v[x]){var y=[[x,"like","%"+c.d.searchValue+"%"]];if(false!==q)for(var w=0;w<q.length;w++)y.push(q[w]);p.push(y)}}}else if(false!==q)p.push(q);c.d.$checkboxCheckAll.prop("checked",false).change(),c.loading();var z=b[d]().links("").fields(n).limit(l).page(m).where(p).orderBy(j).orderDir(k).urlSuffix(e).format(h).get().done(function(b){if(c.pageMax(b.page_count),false!==f){var e=f.split("/");var h=b;for(var j=0;j<e.length;j++)h=h[e[j]]}else var h=b._embedded[d];var k=h.length;var l=[];for(var j=0;j<k;j++){var m=h[j];if(false!==g)m=h[j][g];var n={recordId:m.id||0,values:{}};for(var p in m){if("_"===p.charAt(0)||"id"===p&&!o)continue;if(null!==m[p]&&("object"===typeof m[p]||"array"===typeof m[p]))if(a.isArray(m[p]))n.values[p]=m[p];else{var q=false;var r=0;var s=false;var t=0;var u=false;for(var v in m[p]){if("date"===v||"timezone"===v||"timezone_type"===v)r++;if("code"===v||"value"===v)t++;if(q=false,s=false,u=false,3===r)q=true;else if(2==t)s=true;else if("customFields"===p)u=true}if(q)n.values[p]=m[p].date||m[p][Object.keys(m[p])[0]]||"";else if(s)n.values[p]=m[p].value||m[p][Object.keys(m[p])[0]]||"";else if(u)for(var w in m[p])if(null!==m[p][w]&&("array"===typeof m[p][w]||"object"===typeof m[p][w]))if(a.isArray(m[p][w]))n.values["customFields."+w]=m[p][w];else n.values["customFields."+w]=m[p][w].date||m[p][w].value||m[p][w][Object.keys(m[p][w])[0]]||"";else n.values["customFields."+w]=m[p][w];else n.values[p]=m[p]}else n.values[p]=m[p]}l.push(n)}c.data({records:h}),c.deleteRows();var x=c.getColByName("customFields");if(false!==x&&"function"===typeof x.$cells)x.$cells().css("display","none");c.rows(l),c.d.stepFunction(),setTimeout(function(){i.apply(c,[c,c.d.$widget])},10)});return c.data("xhr",z),z}}(),function(){b.exportTable=function(a,c){if("undefined"===typeof a)return false;var c=c||{};var d=a.data("apiName");var e=a.data("apiUrlSuffix");var f=a.data("exportFields")||[];if(f.length>0)f=f.join(",");else f=false;var g=a.d.orderBy;var h=a.d.orderDir;if("undefined"===typeof e)e="";var i=[];if(("string"===typeof c.search||"number"===typeof c.search)&&c.search.length>0){var j=a.cols();for(var k=0;k<j.length;k++){var l=a.d.settings.cols;var m={};for(var n=0;n<l.length;n++)m[l[n].name||0]=false===l[n].searchable?false:true;var o=j[k].name();if(m[o])i.push([[o,"like","%"+c.search+"%"]])}}if("undefined"!==typeof c.ids)if(i.length>0)for(var k=0;k<i.length;k++)i[k].push(["id","in",c.ids]);else i.push([["id","in",c.ids]]);var p=b[d]().orderBy(g).orderDir(h).fields(f).where(i).urlSuffix(e)["export"]().done(function(a,b,c){window.location.href=c.getResponseHeader("X-Download-Url")})}}(),function(){b.dataToOptions=function(b,c,d){var c=c||"name";var d=d||"id";return a.map(b,function(a){return[[a[d],a[c]]]})}}(),function(){b.convertToObj=function(a,b){var b=b||"id";var c={};for(var d=0;d<a.length;d++)c[a[d][b]]=a[d];return c}}(),function(){b.downloadContent=function(b,c){var d="download"in document.createElement("a");if(d){var e=a("<a></a>");e.attr({href:"data:attachment/csv,"+encodeURI(b),target:"_blank",download:c})[0].click(),setTimeout(function(){e.remove()},50)}else if("undefined"!==typeof safari)window.open("data:attachment/csv,"+encodeURI(b));else if(window.navigator.msSaveOrOpenBlob){var f=new Blob([b],{type:"text/plain"});navigator.msSaveBlob(f,c)}else alert($A.translate("Your browser is not supported the csv export."))}}(),function(){console.log("%c AutomizyJsApi module loaded! ","background: #000000; color: #bada55; font-size:14px")}(),window.$AA=b,window.AutomizyJsApi=b})($);
//# sourceMappingURL=automizy.api.min.map