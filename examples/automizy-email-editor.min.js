(function(){return window.AutomizyGlobalZIndex=window.AutomizyGlobalZIndex||2e3,window.AutomizyEmailEditor=window.$AEE=new function(){var a=this;a.dialogs={},a.buttons={},a.inputs={},a.forms={},a.blocks=[],a.settings={},a.optione={},a.elements={},a.d={version:"1.0.0",defines:{},values:{},functions:{},segments:[],links:[],config:{dir:".",url:"http://developers.automizy.com/automizyemaileditor",imageUploadApiUrl:"https://api.automizy.com/images",imageGalleryApiUrl:"https://api.automizy.com/images",emailPreviewApiUrl:"https://api.automizy.com/email-preview"},status:{scriptsLength:0,loadedScripts:0,percent:0}},a.m={},a["default"]={},a.inited=false,a.settingsShowed=false,a.scriptLoaded=function(){}},$AEE})(),function(){$AEE.runTheFunctions=function(a,b,c){var a=a||[];var b=b||$AEE;var c=c||[];for(var d=0;d<a.length;d++)a[d].apply(b,c)}}(),function(){$AEE.d.functions.readyFunctions=[],$AEE.ready=function(a){if("function"===typeof a){if($AEE.d.functions.readyFunctions.push(a),$AEE.automizyReady)a.apply($AEE,[]);return $AEE}$AEE.runTheFunctions($AEE.d.functions.readyFunctions),$AEE.automizyReady=true}}(),function(){$AEE.ready(function(){$AEE.settings.systemFieldStart="[{",$AEE.settings.systemFieldEnd="}]",$AEE.settings.customFieldStart="{{",$AEE.settings.customFieldEnd="}}",$AEE.settings.fontFamilies=[["arial,helvetica,sans-serif","Arial"],["arvo,courier,georgia,serif","Arvo"],["comic sans ms,sans-serif","Comic Sans MS"],["courier new,courier","Courier New"],["georgia,palatino","Georgia"],["helvetica","Helvetica"],["lato,helvetica neue,helvetica,arial,sans-serif","Lato"],["lora,georgia,times new roman,serif","Lora"],["lucida sans unicode,lucida grande,sans-serif","Lucida"],["merriweather,georgia,times new roman,serif","Merriweather"],["merriweather sans,helvetica neue,helvetica,arial,sans-serif","Merriweather Sans"],["noticia text,georgia,times new roman,serif","Noticia Text"],["open sans,helvetica neue,helvetica,arial,sans-serif","Open Sans"],["playfair display,georgia,times new roman,serif","Playfair Display"],["roboto,helvetica neue,helvetica,arial,sans-serif","Roboto"],["source sans pro,helvetica neue,helvetica,arial,sans-serif","Source Sans Pro"],["tahoma,arial,helvetica,sans-serif","Tahoma"],["times new roman,times","Times New Roman"],["trebuchet ms,geneva","Trebuchet MS"],["verdana,geneva","Verdana"]],$AEE.settings.tinymceFontFamilies=$.map($AEE.settings.fontFamilies,function(a,b){return a[1]+"="+a[0]+";"}).join(""),$AEE.settings.imgResizable={ghost:false,aspectRatio:true,start:function(a,b){var c=$(this);var d=c.find("img");var e=d[0].style.minWidth||0;d.css({opacity:.3});var f=b.element.closest(".aee-block-content-cell");var g=f.width();c.resizable("option","maxWidth",g),c.resizable("option","minWidth",parseInt(e))},stop:function(a,b){var c=b.element.closest(".aee-block-content-cell");$AEE.setImageSize(c)},create:function(a,b){var c=$(this).closest(".aee-block-content-cell");(function(a){setTimeout(function(){$AEE.setImageSize(a)},100)})(c),function(a){setTimeout(function(){$AEE.setImageSize(a)},1e3)}(c)}},$AEE.settings.imgGalleryResizable={ghost:false,aspectRatio:true,start:function(a,b){var c=$(this);var d=c.find("img");var e=d[0].style.minWidth||0;d.css({opacity:.3});var f=b.element.closest(".aee-block-content-cell");var g=f.width();c.resizable("option","maxWidth",g),c.resizable("option","minWidth",parseInt(e))},stop:function(a,b){$(this).find("img").css({opacity:1})}},tinyMCE.baseURL=$AEE.baseDir()+"/vendor/tinymce",$AEE.settings.tinymceBlock={oninit:function(a){a.focus()},inline:true,theme:"modern",width:"100%",forced_root_block:"",height:"400px",convert_fonts_to_spans:true,entity_encoding:"raw",valid_elements:""+"a[accesskey|charset|class|coords|dir<ltr?rtl|href|hreflang|id|lang|name|rel|rev|shape<circle?default?poly?rect|style|tabindex|title|target|type],"+"abbr[class|dir<ltr?rtl|id|lang|style|title],"+"acronym[class|dir<ltr?rtl|id|id|lang|style|title],"+"address[class|align|dir<ltr?rtl|id|lang|style|title],"+"applet[align<bottom?left?middle?right?top|alt|archive|class|code|codebase|height|hspace|id|name|object|style|title|vspace|width],"+"area[accesskey|alt|class|coords|dir<ltr?rtl|href|id|lang|nohref<nohref|shape<circle?default?poly?rect|style|tabindex|title|target],"+"b/strong[class|dir<ltr?rtl|id|lang|style|title],"+"base[href|target],"+"basefont[color|face|id|size],"+"bdo[class|dir<ltr?rtl|id|lang|style|title],"+"big[class|dir<ltr?rtl|id|lang|style|title],"+"blockquote[cite|class|dir<ltr?rtl|id|lang|style|title],"+"body[alink|background|bgcolor|class|dir<ltr?rtl|id|lang|link|style|title|text|vlink],"+"br[class|clear<all?left?none?right|id|style|title],"+"button[accesskey|class|dir<ltr?rtl|disabled<disabled|id|lang|name|style|tabindex|title|type|value],"+"caption[align<bottom?left?right?top|class|dir<ltr?rtl|id|lang|style|title],"+"center[class|dir<ltr?rtl|id|lang|style|title],"+"cite[class|dir<ltr?rtl|id|lang|style|title],"+"code[class|dir<ltr?rtl|id|lang|style|title],"+"col[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|span|style|title|valign<baseline?bottom?middle?top|width],"+"colgroup[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|span|style|title|valign<baseline?bottom?middle?top|width],"+"dd[class|dir<ltr?rtl|id|lang|style|title],"+"del[cite|class|datetime|dir<ltr?rtl|id|lang|style|title],"+"dfn[class|dir<ltr?rtl|id|lang|style|title],"+"dir[class|compact<compact|dir<ltr?rtl|id|lang|style|title],"+"div[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"dl[class|compact<compact|dir<ltr?rtl|id|lang|style|title],"+"dt[class|dir<ltr?rtl|id|lang|style|title],"+"fieldset[class|dir<ltr?rtl|id|lang|style|title],"+"font[class|color|dir<ltr?rtl|face|id|lang|size|style|title],"+"form[accept|accept-charset|action|class|dir<ltr?rtl|enctype|id|lang|method<get?post|name|style|title|target],"+"frame[class|frameborder|id|longdesc|marginheight|marginwidth|name|noresize<noresize|scrolling<auto?no?yes|src|style|title],"+"h1[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h2[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h3[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h4[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h5[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h6[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"head[dir<ltr?rtl|lang|profile],"+"hr[align<center?left?right|class|dir<ltr?rtl|id|lang|noshade<noshade|size|style|title|width],"+"html[dir<ltr?rtl|lang|version],"+"i/em[class|dir<ltr?rtl|id|lang|style|title],"+"img[align<bottom?left?middle?right?top|alt|border|class|dir<ltr?rtl|height|hspace|id|ismap<ismap|lang|longdesc|name|src|style|title|usemap|vspace|width],"+"input[accept|accesskey|align<bottom?left?middle?right?top|alt|checked<checked|class|dir<ltr?rtl|disabled<disabled|id|ismap<ismap|lang|maxlength|name|readonly<readonly|size|src|style|tabindex|title|type<button?checkbox?file?hidden?image?password?radio?reset?submit?text|usemap|value],"+"ins[cite|class|datetime|dir<ltr?rtl|id|lang|style|title],"+"isindex[class|dir<ltr?rtl|id|lang|prompt|style|title],"+"kbd[class|dir<ltr?rtl|id|lang|style|title],"+"label[accesskey|class|dir<ltr?rtl|for|id|lang|style|title],"+"legend[align<bottom?left?right?top|accesskey|class|dir<ltr?rtl|id|lang|style|title],"+"li[class|dir<ltr?rtl|id|lang|style|title|type|value],"+"link[charset|class|dir<ltr?rtl|href|hreflang|id|lang|media|rel|rev|style|title|target|type],"+"map[class|dir<ltr?rtl|id|lang|name|style|title],"+"menu[class|compact<compact|dir<ltr?rtl|id|lang|style|title],"+"meta[content|dir<ltr?rtl|http-equiv|lang|name|scheme],"+"noframes[class|dir<ltr?rtl|id|lang|style|title],"+"noscript[class|dir<ltr?rtl|id|lang|style|title],"+"object[align<bottom?left?middle?right?top|archive|border|class|classid|codebase|codetype|data|declare|dir<ltr?rtl|height|hspace|id|lang|name|standby|style|tabindex|title|type|usemap|vspace|width],"+"ol[class|compact<compact|dir<ltr?rtl|id|lang|start|style|title|type],"+"optgroup[class|dir<ltr?rtl|disabled<disabled|id|label|lang|style|title],"+"option[class|dir<ltr?rtl|disabled<disabled|id|label|lang|selected<selected|style|title|value],"+"p[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"param[id|name|type|value|valuetype<DATA?OBJECT?REF],"+"pre/listing/plaintext/xmp[align|class|dir<ltr?rtl|id|lang|style|title|width],"+"q[cite|class|dir<ltr?rtl|id|lang|style|title],"+"s[class|dir<ltr?rtl|id|lang|onclick|style|title],"+"samp[class|dir<ltr?rtl|id|lang|onclick|style|title],"+"select[class|dir<ltr?rtl|disabled<disabled|id|lang|multiple<multiple|name|size|style|tabindex|title],"+"small[class|dir<ltr?rtl|id|lang|style|title],"+"span[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"strike[class|class|dir<ltr?rtl|id|lang|style|title],"+"style[dir<ltr?rtl|lang|media|title|type],"+"sub[class|dir<ltr?rtl|id|lang|style|title],"+"sup[class|dir<ltr?rtl|id|lang|style|title],"+"table[align<center?left?right|bgcolor|border|cellpadding|cellspacing|class|dir<ltr?rtl|frame|height|id|lang|rules|style|summary|title|width|background],"+"tbody[align<center?char?justify?left?right|char|class|charoff|dir<ltr?rtl|id|lang|style|title|background|valign<baseline?bottom?middle?top],"+"td[abbr|align<center?char?justify?left?right|axis|background|bgcolor|char|charoff|class|background|colspan|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],"+"textarea[accesskey|class|cols|dir<ltr?rtl|disabled<disabled|id|lang|name|readonly<readonly|rows|style|tabindex|title],"+"tfoot[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|style|title|valign<baseline?bottom?middle?top],"+"th[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class|colspan|background|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],"+"thead[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|style|title|valign<baseline?bottom?middle?top],"+"title[dir<ltr?rtl|lang],"+"tr[abbr|align<center?char?justify?left?right|bgcolor|char|charoff|class|rowspan|dir<ltr?rtl|id|lang|style|title|valign<baseline?bottom?middle?top],"+"tt[class|dir<ltr?rtl|id|lang|style|title],"+"u[class|dir<ltr?rtl|id|lang|style|title],"+"ul[class|compact<compact|dir<ltr?rtl|id|lang|style|title|type],"+"var[class|dir<ltr?rtl|id|lang|style|title]",valid_children:"+body[title|meta],+a[div|span|table|tr|td|th|ul|li|ol|br|a|h1|h2|h3|h4|h5|h6|h7|b|u|i|sup|sub|strong|small]",menubar:false,formats:{bold:{inline:"b"},italic:{inline:"i"},underline:{inline:"u"}},fontsize_formats:"6pt 8pt 10pt 11pt 12pt 13pt 14pt 16pt 18pt 20pt 24pt 28pt 34pt 36pt",plugins:"colorpicker textcolor table link code contextmenu lists advlist",tools:"inserttable",theme_advanced_text_colors:"FF00FF,FFFF00,00FF00,FF0000,0000FF,000000",font_formats:$AEE.settings.tinymceFontFamilies,link_list:[{title:$A.translate("Email address"),value:"mailto:"+$AEE.settings.systemFieldStart+"emailaddress"+$AEE.settings.systemFieldEnd},{title:$A.translate("Web version"),value:$AEE.settings.systemFieldStart+"webversion"+$AEE.settings.systemFieldEnd},{title:$A.translate("Unsubscribe link"),value:$AEE.settings.systemFieldStart+"unsubscribelink"+$AEE.settings.systemFieldEnd}],toolbar:["styleselect | undo redo | alignleft aligncenter alignright alignjustify | image | link | bullist numlist | customfields systemfields","bold italic underline | fontselect fontsizeselect | forecolor backcolor | table | code"],contextmenu:"link inserttable | cell row column deletetable",setup:function(a){var b=function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)};var c=function(a){var b="#000000";for(var c=0;c<a.parents.length;c++)if("object"===typeof a.parents[c].style&&"string"===typeof a.parents[c].style.color&&a.parents[c].style.color.length>0){b=a.parents[c].style.color;break}return b};a.addButton("jqueryTextColorpicker",{text:"Text color",icon:"forecolor",onclick:function(){var b=c(a.selection.getNode());a.formatter.apply("jqueryTextColor",{value:"red"})}}),a.addButton("customfields",{type:"menubutton",text:$A.translate("Custom fields"),icon:false,menu:[{text:$A.translate("User defined"),menu:$AEE.getTinyMceUserDefinedMenu(a)},{text:$A.translate("Built-in"),menu:$AEE.getTinyMceBuiltInMenu(a)}]}),a.on("BeforeSetContent",function(a){if("<a "===a.content.substring(0,3))if(a.content.indexOf("data-mce-href")<0)a.content=$(a.content).attr("style","text-decoration:none").wrapInner("<u></u>")[0].outerHTML;console.log("BeforeSetContent event",a)}),a.on("NodeChange",function(a){console.log("NodeChange event",a),console.log($AEE.rgbStyleToHex(c(a)))})}},$AEE.settings.tinymceHtmlBlock={oninit:function(a){a.focus()},theme:"modern",width:"100%",forced_root_block:"",height:"400px",schema:"html5",convert_fonts_to_spans:false,entity_encoding:"raw",valid_elements:""+"a[accesskey|charset|class|coords|dir<ltr?rtl|href|hreflang|id|lang|name|rel|rev|shape<circle?default?poly?rect|style|tabindex|title|target|type],"+"abbr[class|dir<ltr?rtl|id|lang|style|title],"+"acronym[class|dir<ltr?rtl|id|id|lang|style|title],"+"address[class|align|dir<ltr?rtl|id|lang|style|title],"+"applet[align<bottom?left?middle?right?top|alt|archive|class|code|codebase|height|hspace|id|name|object|style|title|vspace|width],"+"area[accesskey|alt|class|coords|dir<ltr?rtl|href|id|lang|nohref<nohref|shape<circle?default?poly?rect|style|tabindex|title|target],"+"b/strong[class|dir<ltr?rtl|id|lang|style|title],"+"base[href|target],"+"basefont[color|face|id|size],"+"bdo[class|dir<ltr?rtl|id|lang|style|title],"+"big[class|dir<ltr?rtl|id|lang|style|title],"+"blockquote[cite|class|dir<ltr?rtl|id|lang|style|title],"+"body[alink|background|bgcolor|class|dir<ltr?rtl|id|lang|link|style|title|text|vlink],"+"br[class|clear<all?left?none?right|id|style|title],"+"button[accesskey|class|dir<ltr?rtl|disabled<disabled|id|lang|name|style|tabindex|title|type|value],"+"caption[align<bottom?left?right?top|class|dir<ltr?rtl|id|lang|style|title],"+"center[class|dir<ltr?rtl|id|lang|style|title],"+"cite[class|dir<ltr?rtl|id|lang|style|title],"+"code[class|dir<ltr?rtl|id|lang|style|title],"+"col[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|span|style|title|valign<baseline?bottom?middle?top|width],"+"colgroup[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|span|style|title|valign<baseline?bottom?middle?top|width],"+"dd[class|dir<ltr?rtl|id|lang|style|title],"+"del[cite|class|datetime|dir<ltr?rtl|id|lang|style|title],"+"dfn[class|dir<ltr?rtl|id|lang|style|title],"+"dir[class|compact<compact|dir<ltr?rtl|id|lang|style|title],"+"div[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"dl[class|compact<compact|dir<ltr?rtl|id|lang|style|title],"+"dt[class|dir<ltr?rtl|id|lang|style|title],"+"fieldset[class|dir<ltr?rtl|id|lang|style|title],"+"font[class|color|dir<ltr?rtl|face|id|lang|size|style|title],"+"form[accept|accept-charset|action|class|dir<ltr?rtl|enctype|id|lang|method<get?post|name|style|title|target],"+"frame[class|frameborder|id|longdesc|marginheight|marginwidth|name|noresize<noresize|scrolling<auto?no?yes|src|style|title],"+"h1[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h2[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h3[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h4[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h5[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"h6[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"head[dir<ltr?rtl|lang|profile],"+"hr[align<center?left?right|class|dir<ltr?rtl|id|lang|noshade<noshade|size|style|title|width],"+"html[dir<ltr?rtl|lang|version],"+"i/em[class|dir<ltr?rtl|id|lang|style|title],"+"img[align<bottom?left?middle?right?top|alt|border|class|dir<ltr?rtl|height|hspace|id|ismap<ismap|lang|longdesc|name|src|style|title|usemap|vspace|width],"+"input[accept|accesskey|align<bottom?left?middle?right?top|alt|checked<checked|class|dir<ltr?rtl|disabled<disabled|id|ismap<ismap|lang|maxlength|name|readonly<readonly|size|src|style|tabindex|title|type<button?checkbox?file?hidden?image?password?radio?reset?submit?text|usemap|value],"+"ins[cite|class|datetime|dir<ltr?rtl|id|lang|style|title],"+"isindex[class|dir<ltr?rtl|id|lang|prompt|style|title],"+"kbd[class|dir<ltr?rtl|id|lang|style|title],"+"label[accesskey|class|dir<ltr?rtl|for|id|lang|style|title],"+"legend[align<bottom?left?right?top|accesskey|class|dir<ltr?rtl|id|lang|style|title],"+"li[class|dir<ltr?rtl|id|lang|style|title|type|value],"+"link[charset|class|dir<ltr?rtl|href|hreflang|id|lang|media|rel|rev|style|title|target|type],"+"map[class|dir<ltr?rtl|id|lang|name|style|title],"+"menu[class|compact<compact|dir<ltr?rtl|id|lang|style|title],"+"meta[content|dir<ltr?rtl|http-equiv|lang|name|scheme],"+"noframes[class|dir<ltr?rtl|id|lang|style|title],"+"noscript[class|dir<ltr?rtl|id|lang|style|title],"+"object[align<bottom?left?middle?right?top|archive|border|class|classid|codebase|codetype|data|declare|dir<ltr?rtl|height|hspace|id|lang|name|standby|style|tabindex|title|type|usemap|vspace|width],"+"ol[class|compact<compact|dir<ltr?rtl|id|lang|start|style|title|type],"+"optgroup[class|dir<ltr?rtl|disabled<disabled|id|label|lang|style|title],"+"option[class|dir<ltr?rtl|disabled<disabled|id|label|lang|selected<selected|style|title|value],"+"p[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"param[id|name|type|value|valuetype<DATA?OBJECT?REF],"+"pre/listing/plaintext/xmp[align|class|dir<ltr?rtl|id|lang|style|title|width],"+"q[cite|class|dir<ltr?rtl|id|lang|style|title],"+"s[class|dir<ltr?rtl|id|lang|onclick|style|title],"+"samp[class|dir<ltr?rtl|id|lang|onclick|style|title],"+"select[class|dir<ltr?rtl|disabled<disabled|id|lang|multiple<multiple|name|size|style|tabindex|title],"+"small[class|dir<ltr?rtl|id|lang|style|title],"+"span[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|style|title],"+"strike[class|class|dir<ltr?rtl|id|lang|style|title],"+"style[dir<ltr?rtl|lang|media|title|type],"+"sub[class|dir<ltr?rtl|id|lang|style|title],"+"sup[class|dir<ltr?rtl|id|lang|style|title],"+"table[align<center?left?right|bgcolor|border|cellpadding|cellspacing|background|class|dir<ltr?rtl|frame|height|id|lang|rules|style|summary|title|width],"+"tbody[align<center?char?justify?left?right|char|class|charoff|background|dir<ltr?rtl|id|lang|style|title|valign<baseline?bottom?middle?top],"+"td[abbr|align<center?char?justify?left?right|axis|background|background|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],"+"textarea[accesskey|class|cols|dir<ltr?rtl|disabled<disabled|id|lang|name|readonly<readonly|rows|style|tabindex|title],"+"tfoot[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|style|title|valign<baseline?bottom?middle?top],"+"th[abbr|align<center?char?justify?left?right|axis|background|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],"+"thead[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|style|title|valign<baseline?bottom?middle?top],"+"title[dir<ltr?rtl|lang],"+"tr[abbr|align<center?char?justify?left?right|bgcolor|char|charoff|class|rowspan|dir<ltr?rtl|id|lang|style|title|valign<baseline?bottom?middle?top],"+"tt[class|dir<ltr?rtl|id|lang|style|title],"+"u[class|dir<ltr?rtl|id|lang|style|title],"+"ul[class|compact<compact|dir<ltr?rtl|id|lang|style|title|type],"+"var[class|dir<ltr?rtl|id|lang|style|title]",valid_children:"+body[title|meta|style|link],+a[div|span|table|tr|td|th|ul|li|ol|br|a|h1|h2|h3|h4|h5|h6|h7|b|u|i|sup|sub|strong|small],+meta[charset]",valid_child_elements:"table[tr|td|th]",protect:[/\<!--\[.*\]\>/g,/\<!\[.*\]--\>/g,/\<v:.*>/g,/\<\/v:.*>/g],menubar:false,formats:{bold:{inline:"b"},italic:{inline:"i"},underline:{inline:"u"}},fontsize_formats:"6pt 8pt 10pt 11pt 12pt 13pt 14pt 16pt 18pt 20pt 24pt 28pt 34pt 36pt",font_formats:$AEE.settings.tinymceFontFamilies,plugins:"colorpicker textcolor table link code contextmenu lists advlist",tools:"inserttable",table_toolbar:false,theme_advanced_text_colors:"FF00FF,FFFF00,00FF00,FF0000,0000FF,000000",link_list:[{title:$A.translate("Email address"),value:"mailto:"+$AEE.settings.systemFieldStart+"emailaddress"+$AEE.settings.systemFieldEnd},{title:$A.translate("Web version"),value:$AEE.settings.systemFieldStart+"webversion"+$AEE.settings.systemFieldEnd},{title:$A.translate("Unsubscribe link"),value:$AEE.settings.systemFieldStart+"unsubscribelink"+$AEE.settings.systemFieldEnd}],toolbar:["styleselect | undo redo | alignleft aligncenter alignright alignjustify | link | bullist numlist | customfields systemfields","bold italic underline | fontselect fontsizeselect | automizyImage | forecolor backcolor | table | code"],contextmenu:"link inserttable | cell row column deletetable",setup:function(a){var b=function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)};var c=function(a){var b="#000000";for(var c=0;c<a.parents.length;c++)if("undefined"!==a.parents[c].style&&"string"===typeof a.parents[c].style.color&&a.parents[c].style.color.length>0){b=a.parents[c].style.color;break}return b};a.addButton("automizyImage",{icon:"image",tooltip:$A.translate("Select Image"),onclick:function(){var b=a.dom;var c=a.selection.getNode();if("IMG"==c.nodeName&&!c.getAttribute("data-mce-object")&&!c.getAttribute("data-mce-placeholder")){var d=$(c).width();var e=b.getAttrib(c,"height");$AEE.imagePicker.reset().dialogTitle($A.translate("Modify image")).src(b.getAttrib(c,"src")||"").alt(b.getAttrib(c,"alt")||"").title(b.getAttrib(c,"title")||"").align(b.getAttrib(c,"align")||"center").style(b.getAttrib(c,"style")||"").width(b.getAttrib(c,"width")||"").save(function(b){if(false!==b.$elem)b.$img.removeClass(),a.focus(),a.selection.setContent(b.$img[0].outerHTML)}).open()}else $AEE.imagePicker.reset().save(function(b){if(false!==b.$elem)b.$img.removeClass(),a.focus(),a.selection.setContent(b.$img[0].outerHTML)}).open()}}),a.addButton("jqueryTextColorpicker",{text:"Text color",icon:"forecolor",onclick:function(){var b=c(a.selection.getNode());a.formatter.apply("jqueryTextColor",{value:"red"})}}),a.addButton("customfields",{type:"menubutton",text:$A.translate("Custom fields"),icon:false,menu:[{text:$A.translate("User defined"),menu:$AEE.getTinyMceUserDefinedMenu(a)},{text:$A.translate("Built-in"),menu:$AEE.getTinyMceBuiltInMenu(a)}]}),a.on("BeforeSetContent",function(a){if("<a "===a.content.substring(0,3))if(a.content.indexOf("data-mce-href")<0)a.content=$(a.content).attr("style","text-decoration:none").wrapInner("<u></u>")[0].outerHTML;console.log("BeforeSetContent event",a)}),a.on("NodeChange",function(a){console.log("NodeChange event",a),console.log($AEE.rgbStyleToHex(c(a)))})}}})}(),function(){$AEE.ready(function(){$AEE.settings.draggable={connectToSortable:"#aee-document, .aee-block-drop-zone",cursor:"url("+$AEE.d.config.dir+"/images/cursors/closedhand.cur), move",cursorAt:{top:-10},helper:"clone",opacity:"0.5",revert:"invalid",scroll:false,containment:"document",start:function(a,b){if($AEE.dragging=true,$AEE.elements.$blockListModal.show(),$AEE.elements.$document.css({outline:"2px dashed #98be6d"}).sortable("option","axis",false),$("<style class='automizy-draggable-stylesheet'>*{ cursor: url("+$AEE.d.config.dir+"/images/cursors/closedhand.cur), move !important; }</style>").appendTo("body:first"),$AEE.screenSize().x<800)$AEE.settingsShowed=false,$AEE.blocksShowed=false,$AEE.setLayoutByDisplay();$A.runEvent("AutomizyEmailEditorBlockDragStart",$AEE,[a,b])},stop:function(a,b){if($A.runEvent("AutomizyEmailEditorBlockDragStop",$AEE,[a,b]),$AEE.dragging=false,null!==tinymce.activeEditor)$(tinymce.activeEditor.targetElm).blur();$(".automizy-draggable-stylesheet").remove(),$AEE.elements.$document.css({outline:"none"}).sortable("option","axis","y"),$AEE.elements.$widget.css("cursor","auto"),$AEE.elements.$blockListModal.hide();var c=$(b.helper[0]);if(c.closest("#aee-document").length<1)return true;var d=$AEE.newBlock();$AEE.elements.$activeBlock=d;var e=$(b.helper.context).data("block");c.replaceWith(d),$AEE.buildBlockListSetDisplay(),$AEE.buildBlockListDoBlock(d,e),$A.runEvent("AutomizyEmailEditorBlockDragComplete",$AEE,[d,e])},create:function(a,b){$A.runEvent("AutomizyEmailEditorBlockDragCreate",$AEE,[a,b])}}})}(),function(){$AEE.ready(function(){$AEE.settings.sortable={handle:".aee-block-handle",distance:5,axis:false,cursor:"url("+$AEE.d.config.dir+"/images/cursors/closedhand.cur), move",cursorAt:{top:-10},forceHelperSize:true,forcePlaceholderSize:true,opacity:"0.5",placeholder:"aee-ui-state-highlight",tolerance:"pointer",connectWith:"#aee-document, .aee-block-drop-zone",start:function(a,b){$AEE.dragging=true,$AEE.elements.$document.sortable("refreshPositions"),$AEE.elements.$blockListModal.show(),console.log("start")},stop:function(a,b){if($AEE.dragging=false,$AEE.elements.$widget.css("cursor","auto"),$AEE.elements.$blockListModal.hide(),b.item.data("automizy-dropped"))setTimeout(function(){$AEE.setBlockSettings(b.item)},10);console.log("stop")},deactivate:function(a,b){$AEE.elements.$blockListModal.hide(),console.log("deactivate")},over:function(a,b){console.log("over")},receive:function(a,b){console.log("receive")},activate:function(a,b){console.log("activate")},beforeStop:function(a,b){console.log("beforeStop")},change:function(a,b){console.log("change")},create:function(a,b){console.log("create")},out:function(a,b){console.log("out")},remove:function(a,b){console.log("remove")},sort:function(a,b){console.log("sort")}}})}(),function(){$AEE.d.functions.layoutReadyFunctions=[],$AEE.layoutReady=function(a){if("function"===typeof a){if($AEE.d.functions.layoutReadyFunctions.push(a),$AEE.automizyLayoutReady)a.apply($AEE,[]);return $AEE}$AEE.runTheFunctions($AEE.d.functions.layoutReadyFunctions),$AEE.automizyLayoutReady=true}}(),function(){$AEE.layoutReady(function(){var a=function(a){var b=this;if(b.d={$content:$('<div id="automizy-image-picker-content"></div>'),$previewBox:$('<div id="automizy-image-picker-preview-box"></div>'),$previewImageHelper:$('<span id="automizy-image-picker-preview-image-helper"></span>'),$previewImage:$('<img id="automizy-image-picker-preview-image" />'),$controlImageBox:$('<div id="automizy-image-picker-control-box"></div>'),image:false,inputs:{},buttons:{},dialogs:{},forms:{},img:{src:"",link:"",alt:"",title:"",align:"center",style:"",width:"",minWidth:false,$elem:false,$img:false},save:function(){},"delete":function(){}},b.d.$previewBox.appendTo(b.d.$content),b.d.$previewImageHelper.appendTo(b.d.$previewBox),b.d.$previewImage.appendTo(b.d.$previewBox),b.d.$controlImageBox.appendTo(b.d.$content),b.d.buttons.cancel=$A.newButton({text:$A.translate("Cancel"),click:function(){b.d.dialogs.widget.close()}}),b.d.buttons.save=$A.newButton({skin:"simple-orange",text:$A.translate("Save"),click:function(){b.save(),b.d.dialogs.widget.close()}}),b.d.buttons["delete"]=$A.newButton({text:$A.translate("Delete image"),click:function(){b["delete"]()}}),b.d.buttons.cancelGallery=$A.newButton({text:$A.translate("Cancel"),click:function(){b.d.dialogs.gallery.close()}}),b.d.dialogs.widget=$A.newDialog({id:"automizy-image-picker",positionY:"30px",content:b.d.$content,buttons:[b.d.buttons.cancel,b.d.buttons.save,b.d.buttons["delete"]]}),b.d.dialogs.gallery=$A.newDialog({id:"automizy-image-picker-gallery",title:$A.translate("Image gallery"),buttons:[b.d.buttons.cancelGallery],open:function(){$A.ajaxDocumentCover(true),$.ajax({url:$AEE.imageGalleryApiUrl(),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+$AA.token().get()},beforeSend:function(a,b){b.url=$AEE.imageGalleryApiUrl()}}).complete(function(){$A.ajaxDocumentCover(false)}).done(function(a){b.d.dialogs.gallery.content().empty();var c=$('<div id="automizy-image-picker-gallery-content"></div>');for(var d=0;d<a.length;d++){if("file"!==a[d].type||$.inArray(a[d].extension,["jpg","jpeg","png","gif","bmp","ico"])<=-1)continue;var e=$('<span class="automizy-image-picker-gallery-element"></span>').data({src:a[d].url,alt:a[d].alt,title:a[d].title}).click(function(){var a=$(this);b.d.img.src=a.data("src"),b.d.img.alt=a.data("alt"),b.d.img.title=a.data("title"),b.d.$previewImage.attr({src:b.d.img.src}).show(),b.d.inputs.url.val(b.d.img.src),b.d.inputs.alt.val(b.d.img.alt),b.d.inputs.title.val(b.d.img.title),b.d.dialogs.gallery.close()});var f=$('<span class="automizy-image-picker-gallery-image-helper"></span>');var g=$("<img/>").attr({src:a[d].thumbnailUrl,alt:a[d].alt,title:a[d].title}).data("url",a[d].url).error(function(){var a=$(this);a.attr("src",a.data("url"))});e.appendTo(c),f.appendTo(e),g.appendTo(e)}b.d.dialogs.gallery.content(c)})}}),b.d.inputs.upload=$A.newInput({type:"file",name:"upload_file",target:b.d.$controlImageBox,accept:[".jpg",".jpeg",".bmp",".gif",".png",".ico"],create:function(){b.d.inputs.upload.data("$automizyTd1").hide(),b.d.inputs.upload.data("automizyButton").width("300px")}}),b.d.inputs.upload.input().change(function(){}).fileupload({url:$AEE.imageUploadApiUrl(),dataType:"json",singleFileUploads:true,formData:{directory:"emaileditor"},dropZone:b.d.dialogs.gallery.widget(),beforeSend:function(a,c){c.url=$AEE.imageUploadApiUrl();var d=c.files[0];a.setRequestHeader("Authorization","Bearer "+$AA.token().get()),b.d.inputs.upload.data("automizyButton").disable(),b.d.inputs.upload.widget().find('input[type="file"]').prop("disabled",true),b.d.inputs.url.disable(),b.d.buttons.gallery.disable(),b.d.buttons.cancel.disable(),b.d.buttons.save.disable(),b.closable(false)},progressall:function(a,c){b.d.inputs.upload.data("automizyButton").text(parseInt(c.loaded/c.total*100,10)+"%")},complete:function(){b.d.inputs.upload.data("automizyButton").enable().text($A.translate("Select an other image from local computer")),b.d.inputs.upload.widget().find('input[type="file"]').prop("disabled",false),b.d.inputs.url.enable(),b.d.buttons.gallery.enable(),b.d.buttons.cancel.enable(),b.d.buttons.save.enable(),b.closable(true)},error:function(){alert("Something wrong")},done:function(a,c){b.d.img.src=c.result[Object.keys(c.result)[0]].url,b.d.$previewImage.attr({src:b.d.img.src}).show(),b.d.inputs.url.val(b.d.img.src)}}),b.d.buttons.gallery=$A.newButton({id:"automizy-image-picker-gallery-button",text:$A.translate("Select image from gallery"),target:b.d.$controlImageBox,width:"300px",click:function(){b.d.dialogs.gallery.open()}}),b.d.inputs.url=$A.newInput({placeholder:$A.translate("Enter the image url here"),target:b.d.$controlImageBox,type:"text",labelWidth:"auto",breakInput:false,create:function(){this.input().focus(function(){var a=$(this);a.select(),a.mouseup(function(){return a.unbind("mouseup"),false})})},change:function(){b.d.img.src=this.val(),b.d.$previewImage.attr("src",b.d.img.src).show()}}),b.d.inputs.link=$A.newInput({label:$A.translate("Link to"),help:$A.translate("Defines a hyperlink, which is used to link to another page."),value:"http://",change:function(){b.d.img.link=this.val()}}),b.d.inputs.alt=$A.newInput({label:$A.translate("ALT text"),help:$A.translate("The required alt attribute specifies an alternate text for an image, if the image cannot be displayed."),change:function(){b.d.img.alt=this.val()}}),b.d.inputs.title=$A.newInput({label:$A.translate("Image title"),help:$A.translate("Provides additional information related to the element when a user places their mouse over the element."),
change:function(){b.d.img.title=this.val()}}),b.d.inputs.align=$A.newInput({label:$A.translate("Alignment"),help:$A.translate("Specifies the horizontal alignment"),type:"select",options:[["left",$A.translate("Left")],["center",$A.translate("Center"),true],["right",$A.translate("Right")]],change:function(){b.d.img.align=this.val()}}),b.d.inputs.minWidth=$A.newInput({label:$A.translate("Min. width"),help:$A.translate("The minimal width of image in pixel"),change:function(){if(b.d.img.minWidth=this.val(),""===b.d.img.minWidth)b.d.img.minWidth=false}}),b.d.forms.moreSettigns=$A.newForm().draw().addGroup({text:"Advanced settings",inputs:[b.d.inputs.link,b.d.inputs.alt,b.d.inputs.title,b.d.inputs.align,b.d.inputs.minWidth]}).drawTo(b.d.$content),b.d.$widget=b.d.dialogs.widget.widget(),b.init(),"undefined"!==typeof a)b.initParameter(a)};var b=a.prototype;b.open=function(){return this.d.dialogs.widget.open.apply(this.d.dialogs.widget,arguments)},b.close=function(){return this.d.dialogs.widget.close.apply(this.d.dialogs.widget,arguments)},b.closable=function(){return this.d.dialogs.widget.closable.apply(this.d.dialogs.widget,arguments)},b.dialogTitle=function(){return this.d.dialogs.widget.title.apply(this.d.dialogs.widget,arguments),this},b.url=b.src=function(a){var b=this;if("undefined"!==typeof a){if(""===a||"string"!==typeof a)b.d.img.src="",b.d.inputs.url.val(""),b.d.$previewImage.attr("src","").hide(),b.d.inputs.upload.data("automizyButton").text($A.translate("Select image from local computer"));else b.d.img.src=a,b.d.inputs.url.val(a),b.d.$previewImage.attr("src",a).show(),b.d.inputs.upload.data("automizyButton").text($A.translate("Select an other image from local computer"));return b}return b.d.inputs.url.val()},b.link=function(a){console.log(a,typeof a);var b=this;if("undefined"!==typeof a)return b.d.img.link=a,b.d.inputs.link.val(a),b;return b.d.inputs.link.val()},b.alt=function(a){console.log(a,typeof a);var b=this;if("undefined"!==typeof a)return b.d.img.alt=a,b.d.inputs.alt.val(a),b;return b.d.inputs.alt.val()},b.title=function(a){var b=this;if("undefined"!==typeof a)return b.d.img.title=a,b.d.inputs.title.val(a),b;return b.d.inputs.title.val()},b.align=function(a){var b=this;if("undefined"!==typeof a)return b.d.img.align=a,b.d.inputs.align.val(a),b;return b.d.inputs.align.val()},b.enableAlign=function(){return this.d.inputs.align.show(),this},b.disableAlign=function(){return this.d.inputs.align.hide(),this},b.style=function(a){var b=this;if("undefined"!==typeof a)return b.d.img.style=a,b;return b.d.img.style},b.width=function(a){var b=this;if("undefined"!==typeof a)return b.d.img.width=a,b;return b.d.img.width},b.minWidth=function(a){var b=this;if("undefined"!==typeof a){if(b.d.img.minWidth=a,false===a)b.d.inputs.minWidth.val("");else b.d.inputs.minWidth.val(parseInt(a));return b}return b.d.img.minWidth},b["delete"]=function(a){var b=this;if("function"===typeof a)b.d["delete"]=a;else b.d["delete"].apply(this,[]);return b},b.enableDelete=function(){return this.d.buttons["delete"].show(),this},b.disableDelete=function(){return this.d.buttons["delete"].hide(),this},b.save=function(a){var b=this;if("function"===typeof a)b.d.save=a;else{if("string"===typeof b.d.img.src&&b.d.img.src.length>0){var c;var d=$("<img/>").attr({src:b.d.img.src,alt:b.d.img.alt,title:b.d.img.title,width:b.d.img.width}).addClass("aee-imagepicker-image").attr("style","max-width:100%; min-width:"+(b.d.img.minWidth||0)+"px; border:none; text-decoration:none; "+b.d.img.style);if($.inArray(b.d.inputs.link.val(),["","http://","https://"])<=-1)c=$('<a href="'+b.d.inputs.link.val()+'" class="aee-imagepicker-image-link"></a>'),d.appendTo(c);else c=d;b.d.img.$elem=c,b.d.img.$img=d}else b.d.img.$elem=false;b.d.save.apply(b,[b.d.img])}return b},b.reset=function(){return this.dialogTitle($A.translate("Upload image")).enableAlign().disableDelete().src("").link("http://").alt("").title("").minWidth(false).align("center")},$A.initBasicFunctions(a,"ImagePicker")})}(),function(){$AEE.setImageSize=function(a){var b=a.find("img");var c=parseInt(b[0].style.minWidth||0);b.one("load",function(){var a=$(this);var b=this;var d=a.closest(".ui-wrapper");if("undefined"!==typeof d[0]){var e=a.closest(".aee-block-content-cell");var f=e.width();var g=a.width();var h=Math.min(Math.round(g/f*100),100);var i=Math.min(Math.round(g/f*100),100);var j=Math.round(f*i/100);var k=j;if(d[0].style.width=h+"%",d[0].style.minWidth=c+"px",d[0].style.height="auto","undefined"!==typeof b.naturalWidth)if(Math.abs(j-b.naturalWidth)<b.naturalWidth/100)j=b.naturalWidth;a.attr("style","max-width: 100%; min-width:"+c+"px; margin: 0px; resize: none; position: static; zoom: 1; display: block; width: 100%; opacity:1;").attr("data-percent-width",i).attr("data-natural-width",b.naturalWidth).attr("data-width",j).attr("data-calculated-width",k)}}).each(function(){if(this.complete)$(this).load()})},$AEE.ready(function(){$AEE.blocks.push({icon:"image.gif",name:"image",category:"content",title:$A.translate("Image"),drop:function(a,b,c,d,e,f){a.addClass("aee-image-block-item aee-empty");var g=$('<div class="aee-image-block-content" style="position: relative; padding: 24px; border: 1px solid #c1c1c1; font-size: 7px; text-align: center; background-color: #efefef;"></div>').appendTo(b);var h=$('<img src="'+$AEE.d.config.url+'/images/noimage.gif" class="aee-image-block-image" />').appendTo(g).after("<br/><br/>");var i=$('<a href="javascript:;" class="aee-image-block-button"></a>').text($A.translate("Select image")).appendTo(g);$AEE.imagePicker.reset().save(function(a){if(false!==a.$elem)a.$elem.appendTo(b.empty()),a.$img.automizyResizabe(),b.css({textAlign:a.align})}).open()}})}),$AEE.layoutReady(function(){$AEE.imagePicker=$A.newImagePicker(),$AEE.elements.$document.on("click",".aee-image-block-item .aee-image-block-button, .aee-image-block-item .aee-image-block-image",function(){var a=$(this);var b=a.closest(".aee-image-block-item");var c=b.find(".aee-block-content-cell");$AEE.imagePicker.reset().save(function(a){if(false!==a.$elem)a.$elem.appendTo(c.empty()),a.$img.automizyResizabe(),c.css({textAlign:a.align}),$AEE.setImageSize(c)}).open()}).on("click",".aee-image-block-item .aee-imagepicker-image",function(){var a=$(this);var b=$(this).closest(".aee-block-content-cell");$AEE.imagePicker.reset().dialogTitle($A.translate("Modify image")).src(this.src).link(a.closest("a").attr("href")||"").alt(this.alt||"").title(this.title||"").align(a.parent().css("text-align")||"center").minWidth(this.style.minWidth||false).save(function(a){if(false!==a.$elem)a.$elem.appendTo(b.empty()),a.$img.automizyResizabe(),b.css({textAlign:a.align})}).open()}).on("click",".aee-gallery-block-item a",function(a){a.preventDefault()})})}(),function(){$AEE.ready(function(){$AEE.blocks.push({icon:"text.gif",name:"text",category:"content",title:$A.translate("Text"),drop:function(a,b,c,d,e,f){a.addClass("aee-text-block-item");var g="";var h=$A.translate("Enter text here. ");for(var i=0;i<30;i++)g+=h;g='<div style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 11pt;">'+g+"</span></div>";var j=$("<div contenteditable></div>").addClass("aee-text-block-content").html(g).appendTo(b);$AEE.settings.tinymceBlock.oninit=function(a){a.focus()},j.tinymce($AEE.settings.tinymceBlock)}})})}(),function(){$AEE.ready(function(){$AEE.blocks.push({icon:"title.gif",name:"title",category:"content",title:$A.translate("Title"),drop:function(a,b,c,d,e,f){a.addClass("aee-title-block-item");var g='<div style="text-align: left;"><b><span style="font-family: arial, helvetica, sans-serif; font-size: 16pt;">'+$A.translate("Enter title here.")+"</span></b></div>";var h=$("<div contenteditable></div>").addClass("aee-text-block-content").html(g).appendTo(b);$AEE.settings.tinymceBlock.oninit=function(a){a.focus()},h.tinymce($AEE.settings.tinymceBlock)}})})}(),function(){$AEE.ready(function(){$AEE.blocks.push({icon:"button.gif",name:"button",category:"content",title:$A.translate("Button"),drop:function(a,b,c,d,e,f){a.addClass("aee-button-block-item");var g=$('<div class="aee-button-block-content"></div>').appendTo(b).attr("style","text-align:center");var h=$('<a href="#" class="aee-button-block-button"></a>').text($A.translate("My button")).appendTo(g).attr("style","border-top-width: 9px; border-right-width:36px; border-bottom-width:9px; border-left-width:36px; border-style:solid; border-color:#b8b8b8; font-size: 14px; display: inline-block; text-decoration: none; background-color: #b8b8b8; color: #ffffff; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; font-weight:normal; text-decoration:none; font-style:normal;")}})}),$AEE.layoutReady(function(){$AEE.elements.$document.on("click",".aee-button-block-item .aee-button-block-button",function(){setTimeout(function(){$AEE.dialogs.buttonSettings.open()},10)}).on("click",".aee-button-block-item a",function(a){a.preventDefault()})}),$AEE.ready(function(){$AEE.inputs.buttonSettings={},$AEE.buttons.buttonSettings={};var a,b,c,d=$(),e;$AEE.inputs.buttonSettings.text=$A.newInput({label:$A.translate("Button text"),value:$A.translate("My button"),validator:"notEmpty",change:function(){g()}}),$AEE.inputs.buttonSettings.link=$A.newInput({label:$A.translate("Link"),value:$A.translate("http://"),validator:"domainOrUrl",change:function(){g()}}),$AEE.inputs.buttonSettings.radius=$A.newInput({label:$A.translate("Border radius"),value:5,type:"number",labelAfter:" px",create:function(){this.input().attr("min",0).pbmInput()},change:function(){g()}}),$AEE.inputs.buttonSettings.paddingTop=$A.newInput({label:$A.translate("Padding top"),type:"number",labelAfter:" px",create:function(){this.input().attr("min",0).pbmInput()},change:function(){g()}}),$AEE.inputs.buttonSettings.paddingRight=$A.newInput({label:$A.translate("Padding right"),type:"number",labelAfter:" px",create:function(){this.input().attr("min",0).pbmInput()},change:function(){g()}}),$AEE.inputs.buttonSettings.paddingBottom=$A.newInput({label:$A.translate("Padding bottom"),type:"number",labelAfter:" px",create:function(){this.input().attr("min",0).pbmInput()},change:function(){g()}}),$AEE.inputs.buttonSettings.paddingLeft=$A.newInput({label:$A.translate("Padding left"),type:"number",labelAfter:" px",create:function(){this.input().attr("min",0).pbmInput()},change:function(){g()}}),$AEE.inputs.buttonSettings.fontSize=$A.newInput({label:$A.translate("Font size"),type:"number",labelAfter:" px",create:function(){this.input().attr("min",0).pbmInput()},change:function(){g()}}),$AEE.inputs.buttonSettings.position=$A.newInput({label:$A.translate("Button position"),type:"select",options:[["left",$A.translate("Left")],["center",$A.translate("Center"),true],["right",$A.translate("Right")]],change:function(){g()}}),$AEE.inputs.buttonSettings.textPosition=$A.newInput({label:$A.translate("Text position"),type:"select",options:[["left",$A.translate("Left")],["center",$A.translate("Center"),true],["right",$A.translate("Right")]],change:function(){g()}}),$AEE.inputs.buttonSettings.fontFamily=$A.newInput({label:$A.translate("Font family"),type:"select",options:$AEE.settings.fontFamilies,change:function(){g()}}),$AEE.inputs.buttonSettings.bold=$A.newInput({label:$A.translate("Bold"),type:"checkbox",change:function(){g()}}),$AEE.inputs.buttonSettings.underline=$A.newInput({label:$A.translate("Underline"),type:"checkbox",change:function(){g()}}),$AEE.inputs.buttonSettings.italic=$A.newInput({label:$A.translate("Italic"),type:"checkbox",change:function(){g()}}),$AEE.inputs.buttonSettings.backgroundColor=$A.newInput({label:$A.translate("Background color"),width:"32px",create:function(){this.input().css({fontSize:0,backgroundColor:"#b8b8b8",cursor:"pointer","-webkit-box-shadow":"none","box-shadow":"none"}).colpick({colorScheme:"dark",layout:"rgbhex",color:"b8b8b8",onSubmit:function(a,b,c,d){$(d).css({backgroundColor:"#"+b,color:"#"+b}).val("#"+b).trigger("change").colpickHide()}})},change:function(){g()}}),$AEE.inputs.buttonSettings.textColor=$A.newInput({label:$A.translate("Text color"),width:"32px",create:function(){this.input().css({fontSize:0,backgroundColor:"#ffffff",cursor:"pointer","-webkit-box-shadow":"none","box-shadow":"none"}).colpick({colorScheme:"dark",layout:"rgbhex",color:"ffffff",onSubmit:function(a,b,c,d){$(d).css({backgroundColor:"#"+b,color:"#"+b}).val("#"+b).trigger("change").colpickHide()}})},change:function(){g()}}),$AEE.buttons.buttonSettings.cancel=$A.newButton({text:$A.translate("Cancel"),click:function(){$AEE.dialogs.buttonSettings.close()}});function f(){var a={text:$AEE.inputs.buttonSettings.text.val(),link:$AEE.inputs.buttonSettings.link.val(),radius:$AEE.inputs.buttonSettings.radius.val(),paddingTop:$AEE.inputs.buttonSettings.paddingTop.val(),paddingRight:$AEE.inputs.buttonSettings.paddingRight.val(),paddingBottom:$AEE.inputs.buttonSettings.paddingBottom.val(),paddingLeft:$AEE.inputs.buttonSettings.paddingLeft.val(),fontSize:$AEE.inputs.buttonSettings.fontSize.val(),position:$AEE.inputs.buttonSettings.position.val(),fontFamily:$AEE.inputs.buttonSettings.fontFamily.val(),bold:$AEE.inputs.buttonSettings.bold.checked(),underline:$AEE.inputs.buttonSettings.underline.checked(),italic:$AEE.inputs.buttonSettings.italic.checked(),backgroundColor:$AEE.inputs.buttonSettings.backgroundColor.val(),textColor:$AEE.inputs.buttonSettings.textColor.val()};var b=["border-top-width:"+a.paddingTop+"px","border-right-width:"+a.paddingRight+"px","border-bottom-width:"+a.paddingBottom+"px","border-left-width:"+a.paddingLeft+"px","border-style:solid","border-color:"+$AEE.rgbStyleToHex(a.backgroundColor),"background-color:"+$AEE.rgbStyleToHex(a.backgroundColor),"color:"+$AEE.rgbStyleToHex(a.textColor),"font-size:"+a.fontSize+"px","text-align:center","font-family:"+a.fontFamily,"font-weight:"+(a.bold?"bold":"normal"),"text-decoration:"+(a.underline?"underline":"none"),"font-style:"+(a.italic?"italic":"normal"),"-webkit-border-radius:"+a.radius+"px","-moz-border-radius:"+a.radius+"px","border-radius:"+a.radius+"px","white-space: nowrap"];return{data:a,style:b}}function g(){var a=f();e.text(a.data.text).attr("href","javascript:;").attr("style",a.style.join(";")).attr("data-font-family",a.fontFamily).css("display","inline-block"),d.css("text-align",a.data.position)}$AEE.buttons.buttonSettings.save=$A.newButton({skin:"simple-orange",text:$A.translate("Save"),click:function(){var c=f();b.text(c.data.text).attr("href",c.data.link).attr("data-font-family",c.data.fontFamily).attr("style",c.style.join(";")),a.css("text-align",c.data.position),$AEE.dialogs.buttonSettings.close()}});var h=$('<table border="0" cellpadding="0" cellspacing="0" style="width:100%"></table>');var i=$("<tr></tr>").appendTo(h);var j=$('<td align="left" valign="top" style="max-width:630px; width:630px;"></td>').appendTo(i);var k=$('<td align="left" valign="top"></td>').appendTo(i);$AEE.forms.buttonSettings=$A.newForm({inputs:[$AEE.inputs.buttonSettings.text,$AEE.inputs.buttonSettings.link,$AEE.inputs.buttonSettings.backgroundColor,$AEE.inputs.buttonSettings.textColor,$AEE.inputs.buttonSettings.fontSize,$AEE.inputs.buttonSettings.fontFamily,$AEE.inputs.buttonSettings.bold,$AEE.inputs.buttonSettings.underline,$AEE.inputs.buttonSettings.italic,$AEE.inputs.buttonSettings.radius,$AEE.inputs.buttonSettings.position,$AEE.inputs.buttonSettings.paddingTop,$AEE.inputs.buttonSettings.paddingRight,$AEE.inputs.buttonSettings.paddingBottom,$AEE.inputs.buttonSettings.paddingLeft]}).drawTo(j),$AEE.dialogs.buttonSettings=$A.newDialog({title:$A.translate("Button settings"),content:h,width:"85%",buttons:[$AEE.buttons.buttonSettings.cancel,$AEE.buttons.buttonSettings.save],open:function(){a=$AEE.elements.$activeBlock.find(".aee-button-block-content"),b=a.find(".aee-button-block-button"),c=a.parent(),d.remove(),d=a.clone(),d.appendTo(k).css({border:"1px dashed #cccccc",padding:"12px",marginLeft:"12px",width:"100%"}),e=d.find(".aee-button-block-button"),$AEE.inputs.buttonSettings.text.val(b.text()),$AEE.inputs.buttonSettings.link.val(b.attr("href")),$AEE.inputs.buttonSettings.radius.val(parseInt(b.css("border-radius"))),$AEE.inputs.buttonSettings.paddingTop.val(parseInt(b.css("border-top-width"))),$AEE.inputs.buttonSettings.paddingRight.val(parseInt(b.css("border-right-width"))),$AEE.inputs.buttonSettings.paddingBottom.val(parseInt(b.css("border-bottom-width"))),$AEE.inputs.buttonSettings.paddingLeft.val(parseInt(b.css("border-left-width"))),$AEE.inputs.buttonSettings.fontSize.val(parseInt(b.css("font-size"))),$AEE.inputs.buttonSettings.position.val(a.css("text-align")),$AEE.inputs.buttonSettings.fontFamily.val(b.attr("data-font-family")||b.css("font-family")),$AEE.inputs.buttonSettings.bold.checked("bold"===b.css("font-weight")||"700"===b.css("font-weight")),$AEE.inputs.buttonSettings.underline.checked("underline"===b.css("text-decoration")),$AEE.inputs.buttonSettings.italic.checked("italic"===b.css("font-style"));var f=$AEE.rgbStyleToHex(b[0].style.backgroundColor);$AEE.inputs.buttonSettings.backgroundColor.input()[0].style.backgroundColor=f,$AEE.inputs.buttonSettings.backgroundColor.input().val(f).colpickSetColor(f);var g=$AEE.rgbStyleToHex(b[0].style.color);$AEE.inputs.buttonSettings.textColor.input()[0].style.color=g,$AEE.inputs.buttonSettings.textColor.input().val(g).colpickSetColor(g),$AEE.inputs.buttonSettings.radius.labelAfter("px"),$AEE.inputs.buttonSettings.paddingTop.labelAfter("px"),$AEE.inputs.buttonSettings.paddingRight.labelAfter("px"),$AEE.inputs.buttonSettings.paddingBottom.labelAfter("px"),$AEE.inputs.buttonSettings.paddingLeft.labelAfter("px"),$AEE.inputs.buttonSettings.fontSize.labelAfter("px"),setTimeout(function(){$AEE.dialogs.buttonSettings.d.$content.trigger("scroll")},10)}}),$AEE.dialogs.buttonSettings.d.$content.scroll(function(){d.css({marginTop:$AEE.dialogs.buttonSettings.d.$content.scrollTop()+"px"})})})}(),function(){$AEE.ready(function(){$AEE.blocks.push({icon:"html.gif",name:"html",category:"content",title:$A.translate("HTML"),drop:function(a,b,c,d,e,f){a.addClass("aee-html-block-item aee-empty");var g=$("<div></div>").addClass("aee-html-block-content").appendTo(b);var h=$("<span></span>").addClass("aee-html-block-button").html($A.translate("Insert HTML code")).appendTo(g)}});var a=$("<textarea></textarea>").addClass("aee-html-block-dialog-input");var b=false;$AEE.dialogs.htmlCode=$A.newDialog({data:{$textarea:a},content:a,open:function(){var a=this.data("$textarea");if(setTimeout(function(){if($AEE.elements.$activeBlock.hasClass("aee-empty"))a.val("");else a.val($AEE.elements.$activeBlock.data("$contentCell")[0].innerHTML)},10),!b)b=true,setTimeout(function(){a.tinymce($AEE.settings.tinymceHtmlBlock)},10)},buttons:[{text:$A.translate("Cancel"),click:function(){$AEE.dialogs.htmlCode.close()}},{skin:"simple-orange",text:$A.translate("Save"),data:{$textarea:a},click:function(){$AEE.elements.$activeBlock.data("$contentCell").html(this.data("$textarea").val()),$AEE.elements.$activeBlock.removeClass("aee-empty"),$AEE.dialogs.htmlCode.close()}}]})}),$AEE.layoutReady(function(){$AEE.imagePicker=$A.newImagePicker(),$AEE.elements.$document.on("click",".aee-html-block-item.aee-empty .aee-html-block-content",function(){$AEE.dialogs.htmlCode.title($A.translate("Insert HTML code")).open()}).on("click",".aee-html-block-item:not(.aee-empty) .aee-block-content-cell",function(){$AEE.dialogs.htmlCode.title($A.translate("Modify HTML code")).open()}).on("click",".aee-html-block-item .aee-block-content-cell a, .aee-html-block-item .aee-block-content-cell area",function(a){a.preventDefault()})})}(),function(){$AEE.ready(function(){$AEE.blocks.push({icon:"share.gif",name:"share",category:"content",title:$A.translate("Share"),drop:function(a,b,c,d,e,f){a.addClass("aee-share-block-item").attr("data-space",6);var g=$('<table cellpadding="0" cellspacing="0" border="0" class="aee-share-block-content" style="width:100%"></table>').appendTo(b);var h=$("<tr></tr>").appendTo(g);var i=$('<td style="width:50%" class="aee-share-block-content-cell-text"></td>').appendTo(h);var j=$('<td style="width:50%; padding:0 12px 0 12px; text-align:left" class="aee-share-block-content-cell-icons"></td>').appendTo(h);var k='<div style="text-align: right;"><b><span style="font-family: arial, helvetica, sans-serif; font-size: 16pt;">'+$A.translate("Share this email!")+"</span></b></div>";var l=$('<div contenteditable class="aee-text-block-content"></div>').html(k).appendTo(i);$AEE.inputs.blockSettingsShareFacebook.check(),$AEE.inputs.blockSettingsShareTwitter.check(),$AEE.inputs.blockSettingsShareGoogleplus.check(),$AEE.inputs.blockSettingsShareLinkedin.check(),$AEE.inputs.blockSettingsShareDistanceBetween.val(6),$AEE.rebuildIcons(),$AEE.settings.tinymceBlock.oninit=function(a){a.focus()},l.tinymce($AEE.settings.tinymceBlock)}})}),$AEE.layoutReady(function(){$AEE.elements.$blockSettingsShareBox=$('<div id="aee-block-settings-share-box" class="aee-block-settings-box"></div>').appendTo($AEE.elements.$blockSettingsContent),$AEE.elements.$shareFacebookIcon=$('<img src="'+$AEE.d.config.dir+'/images/social-facebook.gif" />'),$AEE.elements.$shareTwitterIcon=$('<img src="'+$AEE.d.config.dir+'/images/social-twitter.gif" />'),$AEE.elements.$shareGoogleplusIcon=$('<img src="'+$AEE.d.config.dir+'/images/social-googleplus.gif" />'),$AEE.elements.$shareLinkedinIcon=$('<img src="'+$AEE.d.config.dir+'/images/social-linkedin.gif" />'),$AEE.rebuildIcons=function(a,b){var a=a||$AEE.elements.$activeBlock;var b=b||{};var c=a.find(".aee-share-block-content-cell-text:first");var d=a.find(".aee-share-block-content-cell-icons:first");var e=$('<div class="aee-share-block-icons"></div>');var f=[];var g=$AEE.inputs.blockSettingsShareDistanceBetween.val();if(b.facebook||$AEE.inputs.blockSettingsShareFacebook.checked())f.push('<a href="[{share_facebook}]" onclick="return false;" style="text-decoration:none"><img src="'+$AEE.d.config.url+'/images/social-facebook.gif" class="aee-share-block-icons-facebook" /></a>');if(b.twitter||$AEE.inputs.blockSettingsShareTwitter.checked())f.push('<a href="[{share_twitter}]" onclick="return false;" style="text-decoration:none"><img src="'+$AEE.d.config.url+'/images/social-twitter.gif" class="aee-share-block-icons-twitter" /></a>');if(b.googleplus||$AEE.inputs.blockSettingsShareGoogleplus.checked())f.push('<a href="[{share_gplus}]" onclick="return false;" style="text-decoration:none"><img src="'+$AEE.d.config.url+'/images/social-googleplus.gif" class="aee-share-block-icons-googleplus" /></a>');if(b.linkedin||$AEE.inputs.blockSettingsShareLinkedin.checked())f.push('<a href="[{share_linkedin}]" onclick="return false;" style="text-decoration:none"><img src="'+$AEE.d.config.url+'/images/social-linkedin.gif" class="aee-share-block-icons-linkedin" /></a>');a.attr("data-space",g);var h=f.join('<img src="'+$AEE.d.config.url+'/images/spacer.gif" height="1" width="'+g+'" style="height:1px; width:'+g+'px" />');d.html(h)},$AEE.inputs.blockSettingsShareFacebook=$A.newInput2({type:"checkbox",labelBefore:$AEE.elements.$shareFacebookIcon,change:function(){$AEE.rebuildIcons()},create:function(){this.widget().css("padding",0)}}),$AEE.inputs.blockSettingsShareTwitter=$A.newInput2({type:"checkbox",labelBefore:$AEE.elements.$shareTwitterIcon,change:function(){$AEE.rebuildIcons()},create:function(){this.widget().css("padding",0)}}),$AEE.inputs.blockSettingsShareGoogleplus=$A.newInput2({type:"checkbox",labelBefore:$AEE.elements.$shareGoogleplusIcon,change:function(){$AEE.rebuildIcons()},create:function(){this.widget().css("padding",0)}}),$AEE.inputs.blockSettingsShareLinkedin=$A.newInput2({type:"checkbox",labelBefore:$AEE.elements.$shareLinkedinIcon,change:function(){$AEE.rebuildIcons()},create:function(){this.widget().css("padding",0)}}),$AEE.inputs.blockSettingsShareDistanceBetween=$A.newInput2({type:"number",labelBefore:$A.translate("Space between icons"),labelAfter:"px",value:6,enter:function(){return $AEE.rebuildIcons(),false},change:function(){$AEE.rebuildIcons()},create:function(){this.widget().css("padding-top","12px"),this.input().attr("min",0),this.input().pbmInput()}}),$AEE.forms.blockSettingsShare=$A.newForm().addInputs([$AEE.inputs.blockSettingsShareFacebook,$AEE.inputs.blockSettingsShareTwitter,$AEE.inputs.blockSettingsShareGoogleplus,$AEE.inputs.blockSettingsShareLinkedin,$AEE.inputs.blockSettingsShareDistanceBetween]).drawTo($AEE.elements.$blockSettingsShareBox)})}(),function(){$AEE.ready(function(){$AEE.blocks.push({icon:"gallery.gif",name:"gallery",category:"content",title:$A.translate("Image gallery"),drop:function(a,b,c,d,e,f){a.addClass("aee-gallery-block-item").attr("data-space",6),b[0].style.textAlign="center";for(var g=0;g<3;g++)$AEE.addEmptyGalleryItem(b);$AEE.inputs.blockSettingsGalleryDistanceBetween.val(6),$AEE.rebuildGallery()}})}),$AEE.layoutReady(function(){$AEE.elements.$gallerySeparatorHtml=$('<img src="'+$AEE.d.config.url+'/images/spacer.gif" class="aee-gallery-block-element-separator" height="1" style="height:1px" />'),$AEE.rebuildGallery=function(a,b){var a=a||$AEE.elements.$activeBlock;var b=b||{};var c=a.find(".aee-block-content-cell:first");var d=$AEE.inputs.blockSettingsGalleryDistanceBetween.val();$AEE.elements.$gallerySeparatorHtml.attr("width",d).css({width:d+"px"}),a.find(".aee-gallery-block-element-separator").remove(),a.find(".aee-gallery-block-element").each(function(a){if(a>0)$(this).before($AEE.elements.$gallerySeparatorHtml[0].outerHTML)}),a.attr("data-space",d)},$AEE.addEmptyGalleryItem=function(a){var b=$('<div class="aee-gallery-block-element aee-empty"></div>').appendTo(a);var c=$('<div class="aee-gallery-block-content"></div>').appendTo(b);var d=$('<img src="'+$AEE.d.config.url+'/images/noimage.gif" class="aee-gallery-block-image" />').appendTo(c).after("<br/><br/>");var e=$('<a href="javascript:;" class="aee-gallery-block-button"></a>').text($A.translate("Select image")).appendTo(c)},$AEE.elements.$document.on("click",".aee-gallery-block-item .aee-gallery-block-button, .aee-gallery-block-item .aee-gallery-block-image",function(){var a=$(this);var b=a.closest(".aee-gallery-block-item");var c=a.closest(".aee-gallery-block-element");var d=b.find(".aee-block-content-cell:first");$AEE.imagePicker.reset().enableDelete().disableAlign()["delete"](function(){if(c.remove(),$AEE.imagePicker.close(),0===b.find(".aee-gallery-block-content").length)$AEE.addEmptyGalleryItem(d);$AEE.rebuildGallery()}).save(function(a){if(false!==a.$elem)if(a.$elem.appendTo(c.removeClass("aee-empty").empty()),a.$img.automizyResizabe(),0===b.find(".aee-gallery-block-content").length)$AEE.addEmptyGalleryItem(d)}).open()}).on("click",".aee-gallery-block-item .aee-imagepicker-image",function(){var a=$(this);var b=a.closest(".aee-gallery-block-item");var c=a.closest(".aee-gallery-block-element");var d=b.find(".aee-block-content-cell:first");$AEE.imagePicker.reset().enableDelete().disableAlign()["delete"](function(){if(c.remove(),$AEE.imagePicker.close(),0===b.find(".aee-gallery-block-content").length)$AEE.addEmptyGalleryItem(d);$AEE.rebuildGallery()}).dialogTitle($A.translate("Modify image")).src(this.src).link(a.closest("a").attr("href")||"").alt(this.alt||"").title(this.title||"").save(function(a){if(false!==a.$elem)if(a.$elem.appendTo(c.removeClass("aee-empty").empty()),a.$img.automizyResizabe(),0===b.find(".aee-gallery-block-content").length)$AEE.addEmptyGalleryItem(d)}).open()}).on("click",".aee-gallery-block-item .aee-gallery-block-button",function(a){a.preventDefault()}),$AEE.elements.$blockSettingsGalleryBox=$('<div id="aee-block-settings-gallery-box" class="aee-block-settings-box"></div>').appendTo($AEE.elements.$blockSettingsContent),$AEE.inputs.blockSettingsGalleryDistanceBetween=$A.newInput({type:"number",label:$A.translate("Space between images"),labelAfter:"px",value:6,enter:function(){return $AEE.rebuildGallery(),false},change:function(){$AEE.rebuildGallery()},create:function(){this.input().attr("min",0),this.input().pbmInput()}}),$AEE.inputs.blockSettingsGalleryAlign=$A.newInput({label:$A.translate("Alignment"),type:"select",options:[["left",$A.translate("Left")],["center",$A.translate("Center"),true],["right",$A.translate("Right")]],change:function(){$AEE.elements.$activeBlock.data("$contentCell")[0].style.textAlign=this.val()}}),$AEE.forms.blockSettingsGallery=$A.newForm().addInputs([$AEE.inputs.blockSettingsGalleryDistanceBetween,$AEE.inputs.blockSettingsGalleryAlign]).drawTo($AEE.elements.$blockSettingsGalleryBox)})}(),function(){$AEE.ready(function(){$AEE.blocks.push({icon:"columns.gif",name:"columns",category:"content",title:$A.translate("Columns"),drop:function(a,b,c,d,e,f){var g=$('<div class="aee-columns-block-column aee-columns-block-column-1 aee-block-drop-zone aee-active" style="width:50%; display:block; float:left; margin:0; padding:0; border:none"></div>').appendTo(b);var h=$('<div class="aee-columns-block-column aee-columns-block-column-2 aee-block-drop-zone aee-active" style="width:50%; display:block; float:left; margin:0; padding:0; border:none"></div>').appendTo(b);var i=$('<div class="aee-columns-block-column aee-columns-block-column-3 aee-block-drop-zone" style="display:none; float:left; margin:0; padding:0; border:none"></div>').appendTo(b);var j=$('<div class="aee-columns-block-column aee-columns-block-column-4 aee-block-drop-zone" style="display:none; float:left; margin:0; padding:0; border:none"></div>').appendTo(b);a.addClass("aee-columns-block-item").attr({"data-column-1":true,"data-column-2":true,"data-column-3":false,"data-column-4":false,"data-floatable":false}),$AEE.inputs.blockSettingsColumns1.check(),$AEE.inputs.blockSettingsColumns2.check(),$AEE.inputs.blockSettingsColumns3.uncheck(),$AEE.inputs.blockSettingsColumns4.uncheck(),$AEE.inputs.blockSettingsColumnsFloatable.uncheck(),$AEE.elements.$document.add(".aee-block-drop-zone").sortable($AEE.settings.sortable)}})}),$AEE.layoutReady(function(){var a=0;var b=0;var c=0;var d=0;$AEE.rebuildColumns=function(a){var a=a||$AEE.elements.$activeBlock;var b=a.find(".aee-block-content-cell:first");var c=a.find(".aee-columns-block-column:first").siblings().andSelf();var d=$AEE.inputs.blockSettingsColumns1.checked();if($AEE.elements.$activeBlock.attr("data-column-1",d),c.filter(".aee-columns-block-column-1").toggleClass("aee-active",d)[0].style.display=d?"block":"none",d)$AEE.inputs.blockSettingsColumns1Width.show(),$AEE.inputs.blockSettingsColumns1MinWidth.show();else $AEE.inputs.blockSettingsColumns1Width.hide(),$AEE.inputs.blockSettingsColumns1MinWidth.hide();var d=$AEE.inputs.blockSettingsColumns2.checked();if($AEE.elements.$activeBlock.attr("data-column-2",d),c.filter(".aee-columns-block-column-2").toggleClass("aee-active",d)[0].style.display=d?"block":"none",d)$AEE.inputs.blockSettingsColumns2Width.show(),$AEE.inputs.blockSettingsColumns2MinWidth.show();else $AEE.inputs.blockSettingsColumns2Width.hide(),$AEE.inputs.blockSettingsColumns2MinWidth.hide();var d=$AEE.inputs.blockSettingsColumns3.checked();if($AEE.elements.$activeBlock.attr("data-column-3",d),c.filter(".aee-columns-block-column-3").toggleClass("aee-active",d)[0].style.display=d?"block":"none",d)$AEE.inputs.blockSettingsColumns3Width.show(),$AEE.inputs.blockSettingsColumns3MinWidth.show();else $AEE.inputs.blockSettingsColumns3Width.hide(),$AEE.inputs.blockSettingsColumns3MinWidth.hide();var d=$AEE.inputs.blockSettingsColumns4.checked();if($AEE.elements.$activeBlock.attr("data-column-4",d),c.filter(".aee-columns-block-column-4").toggleClass("aee-active",d)[0].style.display=d?"block":"none",d)$AEE.inputs.blockSettingsColumns4Width.show(),$AEE.inputs.blockSettingsColumns4MinWidth.show();else $AEE.inputs.blockSettingsColumns4Width.hide(),$AEE.inputs.blockSettingsColumns4MinWidth.hide();var e=c.filter(".aee-active");var f=e.length;var g=250;if(2===f)g=250;else if(3===f)g=200;else if(4===f)g=150;var h=c.filter(":not(.aee-active)");var i=100/f;e.each(function(){var a=$(this);a[0].style.width=i+"%",a.attr("data-width-in-percent",i),a.attr("data-min-width",g);
}),a.removeClass("automizy-column-1 automizy-column-2 automizy-column-3 automizy-column-4").addClass("automizy-column-"+f),$AEE.inputs.blockSettingsColumns1Width.val(Math.round(i)),$AEE.inputs.blockSettingsColumns2Width.val(Math.round(i)),$AEE.inputs.blockSettingsColumns3Width.val(Math.round(i)),$AEE.inputs.blockSettingsColumns4Width.val(Math.round(i)),$AEE.inputs.blockSettingsColumns1MinWidth.val(Math.round(g)),$AEE.inputs.blockSettingsColumns2MinWidth.val(Math.round(g)),$AEE.inputs.blockSettingsColumns3MinWidth.val(Math.round(g)),$AEE.inputs.blockSettingsColumns4MinWidth.val(Math.round(g))},$AEE.elements.$document.on("click",".aee-gallery-block-item .aee-gallery-block-button, .aee-gallery-block-item .aee-gallery-block-image",function(){}).on("click",".aee-gallery-block-item .aee-imagepicker-image",function(){}),$AEE.recalculateColumnsWidth=function(a){var b=$AEE.elements.$activeBlock.find(".aee-columns-block-column-"+a+":first");var c=$AEE.inputs["blockSettingsColumns"+a+"Width"];var d=$AEE.inputs["blockSettingsColumns"+a+"MinWidth"];var e=parseInt(c.val());var f=parseFloat(b.attr("data-width-in-percent")||b[0].style.width);var g=parseInt(d.val());var h=parseFloat(b.attr("data-min-width")||0);var i=$AEE.elements.$activeBlock.find(".aee-columns-block-column:first").siblings().andSelf();if(0===e||isNaN(e))b.removeAttr("data-min-width");else b.attr("data-min-width",g);var j=i.filter(".aee-columns-block-column-1:first");var k=i.filter(".aee-columns-block-column-2:first");var l=i.filter(".aee-columns-block-column-3:first");var m=i.filter(".aee-columns-block-column-4:first");var n=[{$elem:j,active:j.hasClass("aee-active"),width:parseFloat(j.attr("data-width-in-percent")||j[0].style.width),minWidth:parseFloat(j.attr("data-min-width")||0),input:$AEE.inputs.blockSettingsColumns1Width,current:1===a},{$elem:k,active:k.hasClass("aee-active"),width:parseFloat(k.attr("data-width-in-percent")||k[0].style.width),minWidth:parseFloat(k.attr("data-min-width")||0),input:$AEE.inputs.blockSettingsColumns2Width,current:2===a},{$elem:l,active:l.hasClass("aee-active"),width:parseFloat(l.attr("data-width-in-percent")||l[0].style.width),minWidth:parseFloat(l.attr("data-min-width")||0),input:$AEE.inputs.blockSettingsColumns3Width,current:3===a},{$elem:m,active:m.hasClass("aee-active"),width:parseFloat(m.attr("data-width-in-percent")||m[0].style.width),minWidth:parseFloat(m.attr("data-min-width")||0),input:$AEE.inputs.blockSettingsColumns4Width,current:4===a}];var o=0;var p=0;for(var q=0;q<n.length;q++)if(n[q].active)if(o++,n[q].current)p+=e;else p+=n[q].width;var r=101-1*o;if(e<1)e=1;if(e>r)e=r;var s=p-100;var t=0;var u=0;var v=e;var w=0;for(var q=0;q<n.length;q++)if(n[q].active)if(n[q].current)c.val(parseInt(e)),t+=e;else{var x=s/(o-1);if(u=n[q].width-x,u<1)u=1;if(u>r)u=r;t+=u,w+=u,n[q].$elem.attr("data-width-in-percent",u),n[q].$elem[0].style.width=n[q].width+"%",$AEE.inputs["blockSettingsColumns"+(q+1)+"Width"].val(parseInt(n[q].width))}for(var q=0;q<n.length;q++)if(n[q].current)v=100-w,n[q].$elem.attr("data-width-in-percent",v),n[q].$elem[0].style.width=v+"%";if(parseFloat(t.toFixed(5))>100)$AEE.recalculateColumnsWidth(a);else(function(a,b,c){setTimeout(function(){var c=0;for(var d=0;d<a.length;d++)if(a[d].active)c+=parseInt(a[d].input.val());if(c>100)return $AEE.recalculateColumnsWidth(b)},10)})(n,a)},$AEE.elements.$blockSettingsColumnBox=$('<div id="aee-block-settings-columns-box" class="aee-block-settings-box"></div>').appendTo($AEE.elements.$blockSettingsContent),$AEE.inputs.blockSettingsColumns1=$A.newInput({type:"checkbox",labelWidth:"150px",label:$A.translate("First column"),newRow:false,checked:true,change:function(){$AEE.rebuildColumns()}}),$AEE.inputs.blockSettingsColumns1.input().attr("tabindex",-1),$AEE.inputs.blockSettingsColumns1Width=$A.newInput2({type:"number",labelBefore:$A.translate("width:"),labelAfter:"%",value:"50",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(1)}}),$AEE.inputs.blockSettingsColumns1MinWidth=$A.newInput2({type:"number",labelBefore:$A.translate("min width:"),labelAfter:"px",value:"200",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(1)}}),$AEE.inputs.blockSettingsColumns2=$A.newInput({type:"checkbox",labelWidth:"150px",label:$A.translate("Second column"),checked:true,change:function(){$AEE.rebuildColumns()}}),$AEE.inputs.blockSettingsColumns2.input().attr("tabindex",-1),$AEE.inputs.blockSettingsColumns2Width=$A.newInput2({type:"number",labelAfter:"%",labelBefore:$A.translate("width:"),value:"50",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(2)}}),$AEE.inputs.blockSettingsColumns2MinWidth=$A.newInput2({type:"number",labelBefore:$A.translate("min width:"),labelAfter:"px",value:"200",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(2)}}),$AEE.inputs.blockSettingsColumns3=$A.newInput({type:"checkbox",labelWidth:"150px",label:$A.translate("Third column"),checked:false,change:function(){$AEE.rebuildColumns()}}),$AEE.inputs.blockSettingsColumns3.input().attr("tabindex",-1),$AEE.inputs.blockSettingsColumns3Width=$A.newInput2({type:"number",labelAfter:"%",labelBefore:$A.translate("width:"),value:"50",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(3)}}),$AEE.inputs.blockSettingsColumns3MinWidth=$A.newInput2({type:"number",labelAfter:"px",labelBefore:$A.translate("min width:"),value:"200",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(3)}}),$AEE.inputs.blockSettingsColumns4=$A.newInput({type:"checkbox",labelWidth:"150px",label:$A.translate("Fourth column"),checked:false,change:function(){$AEE.rebuildColumns()}}),$AEE.inputs.blockSettingsColumns4.input().attr("tabindex",-1),$AEE.inputs.blockSettingsColumns4Width=$A.newInput2({type:"number",labelAfter:"%",labelBefore:$A.translate("width:"),value:"50",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(4)}}),$AEE.inputs.blockSettingsColumns4MinWidth=$A.newInput2({type:"number",labelAfter:"px",labelBefore:$A.translate("min width:"),value:"200",create:function(){this.input().pbmInput()},change:function(){$AEE.recalculateColumnsWidth(4)}}),$AEE.inputs.blockSettingsColumnsFloatable=$A.newInput({type:"checkbox",labelWidth:"150px",label:$A.translate("Floatable"),checked:false,change:function(){var a=a||$AEE.elements.$activeBlock;a.attr("data-floatable",this.checked())}}),$AEE.forms.blockSettingsColumns=$A.newForm().addInputs([$AEE.inputs.blockSettingsColumns1,$AEE.inputs.blockSettingsColumns1Width,$AEE.inputs.blockSettingsColumns1MinWidth]).addHtml("<br/>").addInputs([$AEE.inputs.blockSettingsColumns2,$AEE.inputs.blockSettingsColumns2Width,$AEE.inputs.blockSettingsColumns2MinWidth]).addHtml("<br/>").addInputs([$AEE.inputs.blockSettingsColumns3,$AEE.inputs.blockSettingsColumns3Width,$AEE.inputs.blockSettingsColumns3MinWidth]).addHtml("<br/>").addInputs([$AEE.inputs.blockSettingsColumns4,$AEE.inputs.blockSettingsColumns4Width,$AEE.inputs.blockSettingsColumns4MinWidth]).addHtml("<br/>").addInputs([$AEE.inputs.blockSettingsColumnsFloatable]).drawTo($AEE.elements.$blockSettingsColumnBox)})}(),function(){$AEE.newBlock=function(a){var b=false;if("undefined"!==typeof a)b=a.onlyContent||false;var c=$('<table cellpadding="0" cellspacing="0" border="0" class="aee-block"></table>');if(c.css({width:"100%"}).data({aeeBlock:true}),!b){var d=$("<tr></tr>").appendTo(c);var e=$('<td colspan="3">&nbsp;</td>').appendTo(d);e.css({height:0+"px",fontSize:0+"px",lineHeight:0+"px",padding:0,border:"none"}),c.data({$topRow:d,$topCell:e})}var f=$("<tr></tr>").appendTo(c);var g=$("<td>&nbsp;</td>").appendTo(f);var h=$('<td class="aee-block-content-cell"></td>').appendTo(f);var i=$("<td>&nbsp;</td>").appendTo(f);if(i.css({width:0+"%",fontSize:0+"px",lineHeight:0+"px",padding:0,border:"none"}),h.css({padding:"12px 12px 12px 12px",border:"0px solid #000000"}),g.css({width:0+"%",fontSize:0+"px",lineHeight:0+"px",padding:0,border:"none"}),c.data({$middleRow:f,$leftCell:g,$contentCell:h,$rightCell:i}),!b){var j=$("<tr></tr>").appendTo(c);var k=$('<td colspan="3">&nbsp;</td>').appendTo(j);k.css({height:0+"px",fontSize:0+"px",lineHeight:0+"px",padding:0,border:"none"}),c.data({$bottomRow:j,$bottomCell:k})}return c}}(),function(){$AEE.dragging=false,$AEE.buildBlockListSetDisplay=function(){if($AEE.settingsShowed=true,$AEE.screenSize().x<800)$AEE.settingsShowed=false,$AEE.blocksShowed=false;$AEE.setLayoutByDisplay()},$AEE.buildBlockListDoBlock=function(a,b){b.drop.apply($AEE,[a,a.data("$contentCell"),a.data("$topCell"),a.data("$rightCell"),a.data("$leftCell"),a.data("$bottomCell")]),setTimeout(function(){a.data("automizy-dropped",true),$AEE.setBlockSettings(a),$AEE.inputs.bpbm.change()},20)},$AEE.buildBlockList=function(){var a=["image","text","title","columns","share","button","gallery","html"];$AEE.blocksInSort=[];for(var b=0;b<a.length;b++)for(var c=0;c<$AEE.blocks.length;c++)if(a[b]===$AEE.blocks[c].name){$AEE.blocksInSort.push($AEE.blocks[c]);break}$AEE.block={};for(var b=0;b<$AEE.blocksInSort.length;b++){var d=$AEE.blocksInSort[b];d.$widget=$('<div class="aee-block-item"></div>').attr("data-title",d.title).attr("data-name",d.name).appendTo($AEE.elements.$blockList).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/blocks/frame.gif)",cursor:"url("+$AEE.d.config.dir+"/images/cursors/openhand.cur), move"}).data("block",d),d.$content=$('<div class="aee-block-item-content"></div>').appendTo(d.$widget).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/blocks/"+d.icon+")"}),$AEE.block[d.name]=d}$AEE.blocksShowed=true,$AEE.elements.$blockList.find(".aee-block-item").click(function(){if(!$AEE.touchable()||$AEE.dragging)return false;var a=$AEE.newBlock();a.appendTo($AEE.elements.$document);var b=$(this).data("block");$AEE.buildBlockListSetDisplay(),$AEE.buildBlockListDoBlock(a,b)}).draggable($AEE.settings.draggable)}}(),function(){var a;function b(c){clearTimeout(a),$AEE.elements.$blockTouchController.stop().animate({top:c.position().top-$AEE.elements.$documentBox.scrollTop()+60+"px",left:c.position().left+c.width()+"px"},250,function(){if(parseInt($AEE.elements.$blockTouchController.css("top"))!==parseInt(c.position().top-$AEE.elements.$documentBox.scrollTop()+60))b(c);else if(parseInt($AEE.elements.$blockTouchController.css("left"))!==parseInt(c.position().left+c.width()))b(c);else a=setTimeout(function(){b(c)},500)})}$AEE.setBlockSettings=function(a){if($AEE.elements.$activeBlock=a,"aee-document"===a.attr("id")){if(a.addClass("aee-active"),$AEE.touchable())$AEE.elements.$blockTouchController.hide();$AEE.elements.$document.find(".aee-block").removeClass("aee-active"),$AEE.inputs.bpbm.disableMargin();var c=$AEE.elements.$document[0].style.backgroundColor||false;if(false!==c)$AEE.inputs.bpbm.backgroundColor($AEE.rgbStyleToHex(c));else $AEE.inputs.bpbm.backgroundColor(false);$AEE.inputs.bpbm.marginTop(0).marginRight(0).marginBottom(0).marginLeft(0).paddingTop(parseInt($AEE.elements.$document[0].style.paddingTop)||0).paddingRight(parseInt($AEE.elements.$document[0].style.paddingRight)||0).paddingBottom(parseInt($AEE.elements.$document[0].style.paddingBottom)||0).paddingLeft(parseInt($AEE.elements.$document[0].style.paddingLeft)||0).borderTopWidth(parseInt($AEE.elements.$document[0].style.borderTopWidth)||0).borderTopColor($AEE.rgbStyleToHex($AEE.elements.$document[0].style.borderTopColor)).borderRightWidth(parseInt($AEE.elements.$document[0].style.borderRightWidth)||0).borderRightColor($AEE.rgbStyleToHex($AEE.elements.$document[0].style.borderRightColor)).borderBottomWidth(parseInt($AEE.elements.$document[0].style.borderBottomWidth)||0).borderBottomColor($AEE.rgbStyleToHex($AEE.elements.$document[0].style.borderBottomColor)).borderLeftWidth(parseInt($AEE.elements.$document[0].style.borderLeftWidth)||0).borderLeftColor($AEE.rgbStyleToHex($AEE.elements.$document[0].style.borderLeftColor)).change(function(){var a=["padding-top:"+$AEE.inputs.bpbm.paddingTop()+"px","padding-right:"+$AEE.inputs.bpbm.paddingRight()+"px","padding-bottom:"+$AEE.inputs.bpbm.paddingBottom()+"px","padding-left:"+$AEE.inputs.bpbm.paddingLeft()+"px","border-top-width:"+$AEE.inputs.bpbm.borderTopWidth()+"px","border-right-width:"+$AEE.inputs.bpbm.borderRightWidth()+"px","border-bottom-width:"+$AEE.inputs.bpbm.borderBottomWidth()+"px","border-left-width:"+$AEE.inputs.bpbm.borderLeftWidth()+"px","border-top-style:"+$AEE.inputs.bpbm.borderTopStyle(),"border-right-style:"+$AEE.inputs.bpbm.borderRightStyle(),"border-bottom-style:"+$AEE.inputs.bpbm.borderBottomStyle(),"border-left-style:"+$AEE.inputs.bpbm.borderLeftStyle(),"border-top-color:"+$AEE.inputs.bpbm.borderTopColor(),"border-right-color:"+$AEE.inputs.bpbm.borderRightColor(),"border-bottom-color:"+$AEE.inputs.bpbm.borderBottomColor(),"border-left-color:"+$AEE.inputs.bpbm.borderLeftColor(),"width:"+$AEE.maxWidth()+"px"];var b=$AEE.inputs.bpbm.backgroundColor()||false;if(false!==b&&""!==b)a.push("background-color:"+b);$AEE.elements.$document.attr("style",a.join("; ")),$AEE.elements.$document.find(".aee-image-block-item .aee-block-content-cell").each(function(){$AEE.setImageSize($(this))})}),$AEE.elements.$blockSettingsContentTitle.html($A.translate("Document settings"))}else{if(a.addClass("aee-active"),$AEE.touchable())$AEE.elements.$blockTouchController.show(),b(a);$AEE.elements.$document.find(".aee-block").add($AEE.elements.$document).not(a).removeClass("aee-active"),$AEE.inputs.bpbm.enableMargin();var d=a.data();if("undefined"===typeof d.aeeBlock)a=$AEE.getBlock(a),d=a.data();var c=d.$contentCell[0].style.backgroundColor||false;if(false!==c)$AEE.inputs.bpbm.backgroundColor($AEE.rgbStyleToHex(c));else $AEE.inputs.bpbm.backgroundColor(false);$AEE.inputs.bpbm.marginTop(parseInt(d.$topCell[0].style.height)).marginRight(parseInt(d.$rightCell[0].style.width)).marginBottom(parseInt(d.$bottomCell[0].style.height)).marginLeft(parseInt(d.$leftCell[0].style.width)).paddingTop(parseInt(d.$contentCell[0].style.paddingTop)).paddingRight(parseInt(d.$contentCell[0].style.paddingRight)).paddingBottom(parseInt(d.$contentCell[0].style.paddingBottom)).paddingLeft(parseInt(d.$contentCell[0].style.paddingLeft)).borderTopWidth(parseInt(d.$contentCell[0].style.borderTopWidth)).borderTopColor($AEE.rgbStyleToHex(d.$contentCell[0].style.borderTopColor)).borderRightWidth(parseInt(d.$contentCell[0].style.borderRightWidth)).borderRightColor($AEE.rgbStyleToHex(d.$contentCell[0].style.borderRightColor)).borderBottomWidth(parseInt(d.$contentCell[0].style.borderBottomWidth)).borderBottomColor($AEE.rgbStyleToHex(d.$contentCell[0].style.borderBottomColor)).borderLeftWidth(parseInt(d.$contentCell[0].style.borderLeftWidth)).borderLeftColor($AEE.rgbStyleToHex(d.$contentCell[0].style.borderLeftColor)).change(function(){var b=$AEE.inputs.bpbm.marginTop();var c=$AEE.inputs.bpbm.marginBottom();if(d.$topCell.add(d.$bottomCell).removeClass("automizy-remove-tr"),b<=0)d.$topCell.addClass("automizy-remove-tr");if(c<=0)d.$bottomCell.addClass("automizy-remove-tr");var e=$AEE.inputs.bpbm.marginRight();var f=$AEE.inputs.bpbm.marginLeft();if(e<=0);if(f<=0);if(d.$topCell.attr("style","font-size: 0px; line-height: 0px; padding: 0px; border: none; mso-line-height-alt: 0; mso-margin-top-alt: 0px; height:"+b+"px"),d.$rightCell[0].style.width=e+"%",d.$rightCell[0].style.minWidth=e+"%",d.$rightCell[0].style.maxWidth=e+"%",d.$rightCell[0].style.padding=0,d.$rightCell[0].style.margin=0,d.$rightCell[0].style.border="none",d.$rightCell[0].style.lineHeight=0,d.$rightCell[0].style.fontSize=0,e<=0)d.$rightCell[0].style.width="0.01%",d.$rightCell[0].style.minWidth="0.01%",d.$rightCell[0].style.maxWidth="0.01%";if(d.$bottomCell.attr("style","font-size: 0px; line-height: 0px; padding: 0px; border: none; mso-line-height-alt: 0; mso-margin-top-alt: 0px; height:"+c+"px"),d.$leftCell[0].style.width=f+"%",d.$leftCell[0].style.minWidth=f+"%",d.$leftCell[0].style.maxWidth=f+"%",d.$leftCell[0].style.padding=0,d.$leftCell[0].style.margin=0,d.$leftCell[0].style.border="none",d.$leftCell[0].style.lineHeight=0,d.$leftCell[0].style.fontSize=0,f<=0)d.$leftCell[0].style.width="0.01%",d.$leftCell[0].style.minWidth="0.01%",d.$leftCell[0].style.maxWidth="0.01%";var g=d.$contentCell[0].style.textAlign;if($.inArray(g,["left","center","right"])<0)g="left";var h=["padding-top:"+$AEE.inputs.bpbm.paddingTop()+"px","padding-right:"+$AEE.inputs.bpbm.paddingRight()+"px","padding-bottom:"+$AEE.inputs.bpbm.paddingBottom()+"px","padding-left:"+$AEE.inputs.bpbm.paddingLeft()+"px","border-top-width:"+$AEE.inputs.bpbm.borderTopWidth()+"px","border-right-width:"+$AEE.inputs.bpbm.borderRightWidth()+"px","border-bottom-width:"+$AEE.inputs.bpbm.borderBottomWidth()+"px","border-left-width:"+$AEE.inputs.bpbm.borderLeftWidth()+"px","border-top-style:"+$AEE.inputs.bpbm.borderTopStyle(),"border-right-style:"+$AEE.inputs.bpbm.borderRightStyle(),"border-bottom-style:"+$AEE.inputs.bpbm.borderBottomStyle(),"border-left-style:"+$AEE.inputs.bpbm.borderLeftStyle(),"border-top-color:"+$AEE.inputs.bpbm.borderTopColor(),"border-right-color:"+$AEE.inputs.bpbm.borderRightColor(),"border-bottom-color:"+$AEE.inputs.bpbm.borderBottomColor(),"border-left-color:"+$AEE.inputs.bpbm.borderLeftColor(),"text-align:"+g];var i=$AEE.inputs.bpbm.backgroundColor()||false;if(false!==i&&""!==i)h.push("background-color:"+i);if(a.hasClass("aee-image-block-item"))h.push("font-size:0; line-height:0"),function(a){$AEE.delay(function(){$AEE.setImageSize(a)},500)}(d.$contentCell);d.$contentCell.attr("style",h.join("; "))}),$AEE.elements.$blockSettingsContentTitle.html($A.translate("Selected block settings"))}if($AEE.elements.$blockSettingsContent.find(".aee-block-settings-box").hide(),"aee-document"===a.attr("id"))$AEE.elements.$blockSettingsDocumentBox.show(),$AEE.inputs.blockSettingsDocumentMaxWidth.val(parseInt($AEE.elements.$document[0].style.width));else if(a.hasClass("aee-share-block-item")){$AEE.elements.$blockSettingsShareBox.show();var e=a.find(".aee-share-block-content-cell-text:first");var f=a.find(".aee-share-block-content-cell-icons:first");$AEE.inputs.blockSettingsShareFacebook.checked(f.find(".aee-share-block-icons-facebook").length>0),$AEE.inputs.blockSettingsShareTwitter.checked(f.find(".aee-share-block-icons-twitter").length>0),$AEE.inputs.blockSettingsShareGoogleplus.checked(f.find(".aee-share-block-icons-googleplus").length>0),$AEE.inputs.blockSettingsShareLinkedin.checked(f.find(".aee-share-block-icons-linkedin").length>0),$AEE.inputs.blockSettingsShareDistanceBetween.val(a.attr("data-space")||6)}else if(a.hasClass("aee-gallery-block-item"))$AEE.elements.$blockSettingsGalleryBox.show(),$AEE.inputs.blockSettingsGalleryDistanceBetween.val(a.attr("data-space")||6),$AEE.inputs.blockSettingsGalleryAlign.val(a.data("$contentCell").css("text-align")||"center");else if(a.hasClass("aee-columns-block-item")){$AEE.elements.$blockSettingsColumnBox.show();var g=$A.parseBoolean(a.attr("data-column-1"));var h=$A.parseBoolean(a.attr("data-column-2"));var i=$A.parseBoolean(a.attr("data-column-3"));var j=$A.parseBoolean(a.attr("data-column-4"));var k=$A.parseBoolean(a.attr("data-floatable"));var l=a.find(".aee-columns-block-column:first").siblings().andSelf();var m=l.filter(".aee-columns-block-column-1:first");var n=l.filter(".aee-columns-block-column-2:first");var o=l.filter(".aee-columns-block-column-3:first");var p=l.filter(".aee-columns-block-column-4:first");$AEE.inputs.blockSettingsColumns1.checked(g),$AEE.inputs.blockSettingsColumns2.checked(h),$AEE.inputs.blockSettingsColumns3.checked(i),$AEE.inputs.blockSettingsColumns4.checked(j),$AEE.inputs.blockSettingsColumnsFloatable.checked(k),$AEE.inputs.blockSettingsColumns1Width.val(parseInt(m[0].style.width)),$AEE.inputs.blockSettingsColumns2Width.val(parseInt(n[0].style.width)),$AEE.inputs.blockSettingsColumns3Width.val(parseInt(o[0].style.width)),$AEE.inputs.blockSettingsColumns4Width.val(parseInt(p[0].style.width))}if(a.hasClass("aee-block")&&$AEE.dynamicBlocks())if($AEE.elements.$blockSettingsDynamicBox.show(),a.is("[data-dynamic-segments]")&&a.attr("data-dynamic-segments").length>0){var q=a.attr("data-dynamic-segments");$AEE.inputs.blockSettingsDynamicCheckbox.check(),$AEE.inputs.blockSettingsDynamicSegments.automizySelect().val(q.split(",")).change()}else $AEE.inputs.blockSettingsDynamicCheckbox.uncheck(),$AEE.inputs.blockSettingsDynamicSegments.automizySelect().val([]);return $AEE}}(),function(){window.automizyHasMouse=false;var a=function(){window.automizyHasMouse=true,document.removeEventListener("mousemove",a,false)};document.addEventListener("mousemove",a,false),$AEE.touchable=function(){if(window.automizyHasMouse)return false;return!!("ontouchstart"in window)}}(),function(){$AEE.ready(function(){$.fn.automizySetUp=function(){return this.each(function(){var a=$(this);if(!a.hasClass("aee-columns-block-item"))a.find("*").andSelf().removeAttr("id data-mce-style spellcheck mce-content-body data-mce-href"),$AEE.settings.tinymceBlock.oninit=function(){},a.find(".aee-text-block-content:first").tinymce($AEE.settings.tinymceBlock),a.find(".aee-imagepicker-image").automizyResizabe()})}})}(),function(){$AEE.ready(function(){var a=function(a){var b=this;if(b.d={$widget:$('<div class="automizy-bpbm"></div>'),$widgetHelp:$('<img src="'+$A.images.helpIcon+'" class="automizy-input-help" />'),$widgetHelpContent:$('<div class="automizy-input-help-content"><img src="'+$A.images.helpArrow+'" class="automizy-input-help-content-arrow" /></div>'),$widgetHelpContentInner:$("<span></span>"),$marginTable:$('<table cellpadding="0" cellspacing="0" border="0" class="automizy-bpbm-margin-table"></table>'),$marginTopRow:$('<tr class="automizy-bpbm-margin-top-row"></tr>'),$marginMiddleRow:$('<tr class="automizy-bpbm-margin-middle-row"></tr>'),$marginBottomRow:$('<tr class="automizy-bpbm-margin-bottom-row"></tr>'),$marginTopCell:$('<td colspan="3" class="automizy-bpbm-margin-top-cell"></td>'),$marginLeftCell:$('<td class="automizy-bpbm-margin-left-cell"></td>'),$marginMiddleCell:$('<td class="automizy-bpbm-margin-middle-cell automizy-bpbm-middle-cell"></td>'),$marginRightCell:$('<td class="automizy-bpbm-margin-right-cell"></td>'),$marginBottomCell:$('<td colspan="3" class="automizy-bpbm-margin-bottom-cell"></td>'),$marginTopCover:$('<div class="automizy-bpbm-cover"></div>'),$marginLeftCover:$('<div class="automizy-bpbm-cover"></div>'),$marginRightCover:$('<div class="automizy-bpbm-cover"></div>'),$marginBottomCover:$('<div class="automizy-bpbm-cover"></div>'),$marginText:$('<span class="automizy-bpbm-margin-text"></span>'),$marginTopInput:$('<input type="number" min="0" class="automizy-bpbm-margin-top-input automizy-bpbm-number-input"/>'),$marginRightInput:$('<input type="number" min="0" max="100" class="automizy-bpbm-margin-right-input automizy-bpbm-number-input"/>'),$marginBottomInput:$('<input type="number" min="0" class="automizy-bpbm-margin-bottom-input automizy-bpbm-number-input"/>'),$marginLeftInput:$('<input type="number" min="0" max="100" class="automizy-bpbm-margin-left-input automizy-bpbm-number-input"/>'),$borderTable:$('<table cellpadding="0" cellspacing="0" border="0" class="automizy-bpbm-border-table"></table>'),$borderTopRow:$('<tr class="automizy-bpbm-border-top-row"></tr>'),$borderMiddleRow:$('<tr class="automizy-bpbm-border-middle-row"></tr>'),$borderBottomRow:$('<tr class="automizy-bpbm-border-bottom-row"></tr>'),$borderTopCell:$('<td colspan="3" class="automizy-bpbm-border-top-cell"></td>'),$borderLeftCell:$('<td class="automizy-bpbm-border-left-cell"></td>'),$borderMiddleCell:$('<td class="automizy-bpbm-border-middle-cell automizy-bpbm-middle-cell"></td>'),$borderRightCell:$('<td class="automizy-bpbm-border-right-cell"></td>'),$borderBottomCell:$('<td colspan="3" class="automizy-bpbm-border-bottom-cell"></td>'),$borderText:$('<span class="automizy-bpbm-border-text"></span>'),$borderTopWidthInput:$('<input type="number" min="0" class="automizy-bpbm-border-top-input automizy-bpbm-number-input"/>'),$borderRightWidthInput:$('<input type="number" min="0" class="automizy-bpbm-border-right-input automizy-bpbm-number-input"/>'),$borderBottomWidthInput:$('<input type="number" min="0" class="automizy-bpbm-border-bottom-input automizy-bpbm-number-input"/>'),$borderLeftWidthInput:$('<input type="number" min="0" class="automizy-bpbm-border-left-input automizy-bpbm-number-input"/>'),$borderTopColorInput:$('<input type="text" class="automizy-bpbm-border-top-color-input automizy-bpbm-color-input"/>'),$borderRightColorInput:$('<input type="text" class="automizy-bpbm-border-right-color-input automizy-bpbm-color-input"/>'),$borderBottomColorInput:$('<input type="text" class="automizy-bpbm-border-bottom-color-input automizy-bpbm-color-input"/>'),$borderLeftColorInput:$('<input type="text" class="automizy-bpbm-border-left-color-input automizy-bpbm-color-input"/>'),$paddingTable:$('<table cellpadding="0" cellspacing="0" border="0" class="automizy-bpbm-padding-table"></table>'),$paddingTopRow:$('<tr class="automizy-bpbm-padding-top-row"></tr>'),$paddingMiddleRow:$('<tr class="automizy-bpbm-padding-middle-row"></tr>'),$paddingBottomRow:$('<tr class="automizy-bpbm-padding-bottom-row"></tr>'),$paddingTopCell:$('<td colspan="3" class="automizy-bpbm-padding-top-cell"></td>'),$paddingLeftCell:$('<td class="automizy-bpbm-padding-left-cell"></td>'),$paddingMiddleCell:$('<td class="automizy-bpbm-padding-middle-cell automizy-bpbm-middle-cell"></td>'),$paddingRightCell:$('<td class="automizy-bpbm-padding-right-cell"></td>'),$paddingBottomCell:$('<td colspan="3" class="automizy-bpbm-padding-bottom-cell"></td>'),$paddingText:$('<span class="automizy-bpbm-padding-text"></span>'),$paddingTopInput:$('<input type="number" min="0" class="automizy-bpbm-padding-top-input automizy-bpbm-number-input"/>'),$paddingRightInput:$('<input type="number" min="0" class="automizy-bpbm-padding-right-input automizy-bpbm-number-input"/>'),$paddingBottomInput:$('<input type="number" min="0" class="automizy-bpbm-padding-bottom-input automizy-bpbm-number-input"/>'),$paddingLeftInput:$('<input type="number" min="0" class="automizy-bpbm-padding-left-input automizy-bpbm-number-input"/>'),$backgroundText:$('<span class="automizy-bpbm-background-text"></span>'),$backgroundColorInput:$('<input type="text" class="automizy-bpbm-background-color-input automizy-bpbm-color-input"/>'),id:"automizy-bpbm-"+$A.getUniqueString(),change:function(){},create:function(){},open:function(){},close:function(){}},b.init(),b.d.$widgetHelpContent.appendTo("body:first"),b.d.$widgetHelpContentInner.appendTo(b.d.$widgetHelpContent).html($A.translate("The padding clears an area around the content (inside the border) of an element. The padding is affected by the background color of the element. The top, right, bottom, and left padding can be changed independently using separate properties. The margin clears an area around an element (outside the border). The margin does not have a background color, and is completely transparent. The top, right, bottom, and left margin can be changed independently using separate properties. The border attribute specifies if a border should be displayed around the table cells or not.")),b.d.$widgetHelp.appendTo(b.d.$marginTopCell).on("mouseenter click",function(){var a=b.d.$widgetHelp.offset().left+40;var c=b.d.$widgetHelp.offset().top-16;b.d.$widgetHelpContent.css({left:a+"px",top:c+"px"}).stop().fadeIn()}).mouseout(function(){b.d.$widgetHelpContent.stop().fadeOut()}).css({position:"absolute",top:"10px",right:"10px"}),b.d.$marginTable.appendTo(b.d.$widget),b.d.$marginTopRow.appendTo(b.d.$marginTable),b.d.$marginMiddleRow.appendTo(b.d.$marginTable),b.d.$marginBottomRow.appendTo(b.d.$marginTable),b.d.$marginTopCell.appendTo(b.d.$marginTopRow),b.d.$marginText.appendTo(b.d.$marginTopCell).html($A.translate("margin")),b.d.$marginLeftCell.appendTo(b.d.$marginMiddleRow),b.d.$marginMiddleCell.appendTo(b.d.$marginMiddleRow),b.d.$marginRightCell.appendTo(b.d.$marginMiddleRow),b.d.$marginBottomCell.appendTo(b.d.$marginBottomRow),b.d.$marginTopCover.appendTo(b.d.$marginTopCell),b.d.$marginLeftCover.appendTo(b.d.$marginLeftCell),b.d.$marginRightCover.appendTo(b.d.$marginRightCell),b.d.$marginBottomCover.appendTo(b.d.$marginBottomCell),b.d.$marginTopInput.appendTo(b.d.$marginTopCell).pbmInput().after("px"),b.d.$marginLeftInput.appendTo(b.d.$marginLeftCell).pbmInput().after("%"),b.d.$marginBottomInput.appendTo(b.d.$marginBottomCell).pbmInput().after("px"),b.d.$marginRightInput.appendTo(b.d.$marginRightCell).pbmInput().after("%"),b.d.$borderTable.appendTo(b.d.$marginMiddleCell),b.d.$borderTopRow.appendTo(b.d.$borderTable),b.d.$borderMiddleRow.appendTo(b.d.$borderTable),b.d.$borderBottomRow.appendTo(b.d.$borderTable),b.d.$borderTopCell.appendTo(b.d.$borderTopRow),b.d.$borderText.appendTo(b.d.$borderTopCell).html($A.translate("border")),b.d.$borderLeftCell.appendTo(b.d.$borderMiddleRow),b.d.$borderMiddleCell.appendTo(b.d.$borderMiddleRow),b.d.$borderRightCell.appendTo(b.d.$borderMiddleRow),b.d.$borderBottomCell.appendTo(b.d.$borderBottomRow),b.d.$borderTopWidthInput.appendTo(b.d.$borderTopCell).pbmInput().after("px<br/>"),b.d.$borderLeftWidthInput.appendTo(b.d.$borderLeftCell).pbmInput().after("px<br/>"),b.d.$borderBottomWidthInput.appendTo(b.d.$borderBottomCell).pbmInput().after("px<br/>"),b.d.$borderRightWidthInput.appendTo(b.d.$borderRightCell).pbmInput().after("px<br/>"),b.d.$borderTopColorInput.appendTo(b.d.$borderTopCell),b.d.$borderLeftColorInput.appendTo(b.d.$borderLeftCell),b.d.$borderBottomColorInput.appendTo(b.d.$borderBottomCell),b.d.$borderRightColorInput.appendTo(b.d.$borderRightCell),b.d.$paddingTable.appendTo(b.d.$borderMiddleCell),b.d.$paddingTopRow.appendTo(b.d.$paddingTable),b.d.$paddingMiddleRow.appendTo(b.d.$paddingTable),b.d.$paddingBottomRow.appendTo(b.d.$paddingTable),b.d.$paddingTopCell.appendTo(b.d.$paddingTopRow),b.d.$paddingText.appendTo(b.d.$paddingTopCell).html($A.translate("padding")),b.d.$paddingLeftCell.appendTo(b.d.$paddingMiddleRow),b.d.$paddingMiddleCell.appendTo(b.d.$paddingMiddleRow),b.d.$paddingRightCell.appendTo(b.d.$paddingMiddleRow),b.d.$paddingBottomCell.appendTo(b.d.$paddingBottomRow),b.d.$paddingTopInput.appendTo(b.d.$paddingTopCell).val(12).pbmInput().after("px"),b.d.$paddingLeftInput.appendTo(b.d.$paddingLeftCell).val(2).pbmInput().after("px"),b.d.$paddingBottomInput.appendTo(b.d.$paddingBottomCell).val(12).pbmInput().after("px"),b.d.$paddingRightInput.appendTo(b.d.$paddingRightCell).val(2).pbmInput().after("px"),b.d.$backgroundText.appendTo(b.d.$paddingMiddleCell).html($A.translate("back-<br/>color")),b.d.$backgroundColorInput.appendTo(b.d.$paddingMiddleCell),b.d.$marginTopInput.add(b.d.$marginLeftInput).add(b.d.$marginBottomInput).add(b.d.$marginRightInput).add(b.d.$borderTopWidthInput).add(b.d.$borderLeftWidthInput).add(b.d.$borderBottomWidthInput).add(b.d.$borderRightWidthInput).val(0),b.d.$marginTopInput.add(b.d.$marginLeftInput).add(b.d.$marginBottomInput).add(b.d.$marginRightInput).add(b.d.$paddingTopInput).add(b.d.$paddingLeftInput).add(b.d.$paddingBottomInput).add(b.d.$paddingRightInput).add(b.d.$borderTopWidthInput).add(b.d.$borderLeftWidthInput).add(b.d.$borderBottomWidthInput).add(b.d.$borderRightWidthInput).add(b.d.$borderTopColorInput).add(b.d.$borderLeftColorInput).add(b.d.$borderBottomColorInput).add(b.d.$borderRightColorInput).add(b.d.$backgroundColorInput).change(function(){b.change.apply(b,[])}),b.d.$borderTopColorInput.add(b.d.$borderLeftColorInput).add(b.d.$borderBottomColorInput).add(b.d.$borderRightColorInput).add(b.d.$backgroundColorInput).colpick({colorScheme:"dark",layout:"rgbhex",color:"b8b8b8",onSubmit:function(a,b,c,d){$(d).css({backgroundColor:"#"+b,color:"#"+b}).val("#"+b).trigger("change").colpickHide()}}),"undefined"!==typeof a){if("undefined"!==typeof a.margin)b.margin(a.margin);if("undefined"!==typeof a.marginTop)b.marginTop(a.marginTop);if("undefined"!==typeof a.marginRight)b.marginRight(a.marginRight);
if("undefined"!==typeof a.marginBottom)b.marginBottom(a.marginBottom);if("undefined"!==typeof a.marginLeft)b.marginLeft(a.marginLeft);if("undefined"!==typeof a.border)b.border(a.border);if("undefined"!==typeof a.borderTopWidth)b.borderTopWidth(a.borderTopWidth);if("undefined"!==typeof a.borderTopColor)b.borderTopColor(a.borderTopColor);if("undefined"!==typeof a.borderRightWidth)b.borderRightWidth(a.borderRightWidth);if("undefined"!==typeof a.borderRightColor)b.borderRightColor(a.borderRightColor);if("undefined"!==typeof a.borderBottomWidth)b.borderBottomWidth(a.borderBottomWidth);if("undefined"!==typeof a.borderBottomColor)b.borderBottomColor(a.borderBottomColor);if("undefined"!==typeof a.borderLeftWidth)b.borderLeftWidth(a.borderLeftWidth);if("undefined"!==typeof a.borderLeftColor)b.borderLeftColor(a.borderLeftColor);if("undefined"!==typeof a.padding)b.padding(a.padding);if("undefined"!==typeof a.paddingTop)b.paddingTop(a.paddingTop);if("undefined"!==typeof a.paddingRight)b.paddingRight(a.paddingRight);if("undefined"!==typeof a.paddingBottom)b.paddingBottom(a.paddingBottom);if("undefined"!==typeof a.paddingLeft)b.paddingLeft(a.paddingLeft);b.initParameter(a)}};var b=a.prototype;b.margin=function(a){var b=this;if("undefined"===typeof a)return{top:b.marginTop(),right:b.marginRight(),bottom:b.marginBottom(),left:b.marginLeft()};else if($.isArray(a))b.marginTop(a[0]),b.marginRight(a[1]),b.marginBottom(a[2]),b.marginLeft(a[3]);else b.marginTop(a.top),b.marginRight(a.right),b.marginBottom(a.bottom),b.marginLeft(a.left);return b},b.marginTop=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$marginTopInput.val());return b.d.$marginTopInput.val(parseInt(a)),b},b.marginRight=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$marginRightInput.val());return b.d.$marginRightInput.val(parseInt(a)),b},b.marginBottom=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$marginBottomInput.val());return b.d.$marginBottomInput.val(parseInt(a)),b},b.marginLeft=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$marginLeftInput.val());return b.d.$marginLeftInput.val(parseInt(a)),b},b.padding=function(a){var b=this;if("undefined"===typeof a)return{top:b.paddingTop(),right:b.paddingRight(),bottom:b.paddingBottom(),left:b.paddingLeft()};else if($.isArray(a))b.paddingTop(a[0]),b.paddingRight(a[1]),b.paddingBottom(a[2]),b.paddingLeft(a[3]);else b.paddingTop(a.top),b.paddingRight(a.right),b.paddingBottom(a.bottom),b.paddingLeft(a.left);return b},b.paddingTop=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$paddingTopInput.val());return b.d.$paddingTopInput.val(parseInt(a)),b},b.paddingRight=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$paddingRightInput.val());return b.d.$paddingRightInput.val(parseInt(a)),b},b.paddingBottom=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$paddingBottomInput.val());return b.d.$paddingBottomInput.val(parseInt(a)),b},b.paddingLeft=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$paddingLeftInput.val());return b.d.$paddingLeftInput.val(parseInt(a)),b},b.border=function(a){var b=this;if("undefined"===typeof a)return{top:b.borderTopWidth(),right:b.borderRightWidth(),bottom:b.borderBottomWidth(),left:b.borderLeftWidth()};else if($.isArray(a))if(4===a.length)b.borderTopWidth(a[0]),b.borderRightWidth(a[1]),b.borderBottomWidth(a[2]),b.borderLeftWidth(a[3]);else b.borderTopWidth(a[0]),b.borderTopColor(a[1]),b.borderRightWidth(a[2]),b.borderRightColor(a[3]),b.borderBottomWidth(a[4]),b.borderBottomColor(a[5]),b.borderLeftWidth(a[6]),b.borderLeftColor(a[7]);else b.borderTopWidth(a.topWidth),b.borderRightWidth(a.rightWidth),b.borderBottomWidth(a.bottomWidth),b.borderLeftWidth(a.leftWidth),b.borderTopColor(a.topColor),b.borderRightColor(a.rightColor),b.borderBottomColor(a.bottomColor),b.borderLeftColor(a.leftColor);return b},b.borderTopWidth=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$borderTopWidthInput.val());return b.d.$borderTopWidthInput.val(parseInt(a)),b},b.borderRightWidth=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$borderRightWidthInput.val());return b.d.$borderRightWidthInput.val(parseInt(a)),b},b.borderBottomWidth=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$borderBottomWidthInput.val());return b.d.$borderBottomWidthInput.val(parseInt(a)),b},b.borderLeftWidth=function(a){var b=this;if("undefined"===typeof a)return parseInt(b.d.$borderLeftWidthInput.val());return b.d.$borderLeftWidthInput.val(parseInt(a)),b},b.borderTopColor=function(a){var b=this;if("undefined"===typeof a){if(b.borderTopWidth()<=0)return"transparent";return $AEE.rgbStyleToHex(b.d.$borderTopColorInput.val())}return b.d.$borderTopColorInput.css({backgroundColor:a,color:a}).val(a).colpickSetColor(a),b},b.borderRightColor=function(a){var b=this;if("undefined"===typeof a){if(b.borderRightWidth()<=0)return"transparent";return $AEE.rgbStyleToHex(b.d.$borderRightColorInput.val())}return b.d.$borderRightColorInput.css({backgroundColor:a,color:a}).val(a).colpickSetColor(a),b},b.borderBottomColor=function(a){var b=this;if("undefined"===typeof a){if(b.borderBottomWidth()<=0)return"transparent";return $AEE.rgbStyleToHex(b.d.$borderBottomColorInput.val())}return b.d.$borderBottomColorInput.css({backgroundColor:a,color:a}).val(a).colpickSetColor(a),b},b.borderLeftColor=function(a){var b=this;if("undefined"===typeof a){if(b.borderLeftWidth()<=0)return"transparent";return $AEE.rgbStyleToHex(b.d.$borderLeftColorInput.val())}return b.d.$borderLeftColorInput.css({backgroundColor:a,color:a}).val(a).colpickSetColor(a),b},b.borderTopStyle=function(){var a=this;if(a.borderTopWidth()<=0)return"none";return"solid"},b.borderRightStyle=function(){var a=this;if(a.borderRightWidth()<=0)return"none";return"solid"},b.borderBottomStyle=function(){var a=this;if(a.borderBottomWidth()<=0)return"none";return"solid"},b.borderLeftStyle=function(){var a=this;if(a.borderLeftWidth()<=0)return"none";return"solid"},b.backgroundColor=function(a){var b=this;if("undefined"===typeof a)return b.d.$backgroundColorInput.val();if(false===a||""===a)return b.d.$backgroundColorInput.css({backgroundColor:"#ffffff",color:"#ffffff"}).val("").colpickSetColor("#ffffff"),b;return b.d.$backgroundColorInput.css({backgroundColor:a,color:a}).val(a).colpickSetColor(a),b},b.change=function(a){var b=this;if("function"===typeof a)return b.d.change=a,b;return b.d.change.apply(b,[]),b},b.disableMargin=function(){var a=this;return a.d.$marginTopCover.show(),a.d.$marginRightCover.show(),a.d.$marginBottomCover.show(),a.d.$marginLeftCover.show(),a},b.enableMargin=function(){var a=this;return a.d.$marginTopCover.hide(),a.d.$marginRightCover.hide(),a.d.$marginBottomCover.hide(),a.d.$marginLeftCover.hide(),a},$A.initBasicFunctions(a,"bpbm")})}(),function(){$AEE.ready(function(){if($AEE.elements.$tmp=$("<div></div>"),$AEE.elements.$spacer=$('<img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />'),$AEE.elements.$widget=$('<div id="automizy-email-editor"></div>').appendTo("body:first"),$AEE.touchable())$A.convertToResponsive(),$AEE.elements.$widget.addClass("automizy-touchable"),$("body:first").addClass("automizy-touchable");if($AEE.elements.$widgetTable=$('<table cellpadding="0" cellspacing="0" border="0" id="aee-widget-table"></table>').appendTo($AEE.elements.$widget),$AEE.elements.$widgetTableFirstRow=$("<tr></tr>").appendTo($AEE.elements.$widgetTable),$AEE.elements.$widgetTableSecondRow=$("<tr></tr>").appendTo($AEE.elements.$widgetTable),$AEE.elements.$header=$('<td id="aee-header"></td>').appendTo($AEE.elements.$widgetTableFirstRow),$AEE.elements.$headerButtons=$('<div id="aee-header-buttons"></div>').appendTo($AEE.elements.$header),$AEE.elements.$logoLink=$('<a href="#" target="_blank" id="aee-logo-link" />').appendTo($AEE.elements.$header),$AEE.elements.$logoImage=$('<img src="" id="aee-logo-img" />').appendTo($AEE.elements.$logoLink),$AEE.elements.$headerTitle=$('<div id="aee-header-title" />').appendTo($AEE.elements.$header),$AEE.elements.$lastSave=$('<div id="aee-header-lastsave" />').html($A.translate("It has not been saved yet")).appendTo($AEE.elements.$header),$AEE.saved=false,$AEE.buttons.saveAndExitButton=$A.newButton({text:$A.translate("Save and next >>"),skin:"simple-orange","float":"right",thin:true,target:$AEE.elements.$headerButtons,click:function(){$AEE.clickToSaveAndExit()}}),$AEE.buttons.saveButton=$A.newButton({text:$A.translate("Save"),skin:"simple-orange","float":"right",thin:true,target:$AEE.elements.$headerButtons,click:function(){$AEE.clickToSave()}}),$AEE.buttons.previewButton=$A.newButton({text:$A.translate("Preview"),skin:"simple-white","float":"right",thin:true,target:$AEE.elements.$headerButtons,click:function(){$AEE.clickToPreview()}}),$AEE.buttons.backButton=$A.newButton({text:$A.translate("<< Back"),skin:"simple-white","float":"right",thin:true,target:$AEE.elements.$headerButtons,click:function(){$AEE.clickToBack()}}),$AEE.buttons.sendTestButton=$A.newButton({text:$A.translate("Send test email"),skin:"simple-orange",click:function(){$AEE.clickToSendTest()}}),$AEE.elements.$mobileMenu=$('<div id="aee-mobilemenu"></div>').appendTo($AEE.elements.$widget),$AEE.elements.$mobileSaveButton=$('<div class="aee-mobilemenu-item"></div>').html($A.translate("Save")).appendTo($AEE.elements.$mobileMenu).click(function(){$AEE.clickToSave(),$AEE.elements.$mobileMenu.stop().fadeOut()}),$AEE.elements.$mobilePreviewButton=$('<div class="aee-mobilemenu-item"></div>').html($A.translate("Preview")).appendTo($AEE.elements.$mobileMenu).click(function(){$AEE.clickToPreview(),$AEE.elements.$mobileMenu.stop().fadeOut()}),$AEE.elements.$mobileSaveAndExitButton=$('<div class="aee-mobilemenu-item"></div>').html($A.translate("Save and next >>")).appendTo($AEE.elements.$mobileMenu).click(function(){$AEE.clickToSaveAndExit(),$AEE.elements.$mobileMenu.stop().fadeOut()}),$AEE.elements.$mobileBackButton=$('<div class="aee-mobilemenu-item"></div>').html($A.translate("<< Back")).appendTo($AEE.elements.$mobileMenu).click(function(){$AEE.clickToBack(),$AEE.elements.$mobileMenu.stop().fadeOut()}),$AEE.elements.$widgetTableSecondCell=$('<td id="aee-second-cell"></td>').appendTo($AEE.elements.$widgetTableSecondRow),$AEE.elements.$mobileMenuIcon=$('<div id="aee-mobilemenu-icon"></div>').appendTo($AEE.elements.$widget).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/icon-menu.png)"}).click(function(a){a.stopPropagation(),$AEE.elements.$mobileMenu.stop().fadeToggle()}),$AEE.elements.$blocksIcon=$('<div id="aee-blocks-icon"></div>').appendTo($AEE.elements.$widgetTableSecondCell).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/icon-blocks.png)"}).click(function(){$AEE.blocksShowed=true,$AEE.settingsShowed=false,$AEE.setLayoutByDisplay()}),$AEE.elements.$settingsIcon=$('<div id="aee-settings-icon"></div>').appendTo($AEE.elements.$widgetTableSecondCell).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/icon-settings.png)"}).click(function(){$AEE.blocksShowed=false,$AEE.settingsShowed=true,$AEE.setLayoutByDisplay()}),$AEE.elements.$blockList=$('<div id="aee-block-list"></div>').appendTo($AEE.elements.$widgetTableSecondCell),$AEE.elements.$blockListModal=$('<div id="aee-block-list-modal"></div>').appendTo($AEE.elements.$blockList),$AEE.elements.$editor=$('<div id="aee-editor"></div>').appendTo($AEE.elements.$widgetTableSecondCell),$AEE.elements.$documentBox=$('<div id="aee-document-box"></div>').appendTo($AEE.elements.$editor),$AEE.elements.$document=$('<div id="aee-document" style="width:800px"></div>').appendTo($AEE.elements.$documentBox),$AEE.elements.$blockHandle=$('<div class="aee-block-handle"></div>').appendTo($AEE.elements.$widget).css({cursor:"url("+$AEE.d.config.dir+"/images/cursors/openhand.cur), move",backgroundImage:"url("+$AEE.d.config.dir+"/images/block-handle.gif)"}),$AEE.elements.$blockHandleCopy=$('<div class="aee-block-handle-copy"></div>').appendTo($AEE.elements.$blockHandle).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/block-copy.png)"}).click(function(){$AEE.hideTinyMcePanel(),setTimeout(function(){$AEE.elements.$blockHandle.appendTo($AEE.elements.$tmp),$AEE.setBlockSettings($AEE.elements.$activeBlock.clone().insertAfter($AEE.elements.$activeBlock).automizySetUp())},20)}),$AEE.elements.$blockHandleDelete=$('<div class="aee-block-handle-delete"></div>').appendTo($AEE.elements.$blockHandle).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/block-delete.png)"}).click(function(){$AEE.hideTinyMcePanel(),setTimeout(function(){$A.confirm({title:$A.translate("Are you sure you want to delete this block?"),content:$A.translate("Warning: This action is irreversible!"),ok:function(){$AEE.elements.$blockHandle.appendTo($AEE.elements.$tmp),$AEE.elements.$activeBlock.remove()}})},20)}),$AEE.elements.$blockSettings=$('<div id="aee-block-settings"></div>').appendTo($AEE.elements.$widgetTableSecondCell),$AEE.elements.$blockSettingsContent=$('<div id="aee-block-settings-content"></div>').appendTo($AEE.elements.$blockSettings),$AEE.elements.$blockSettingsContentTitle=$('<div id="aee-block-settings-content-title"></div>').appendTo($AEE.elements.$blockSettingsContent),$AEE.inputs.bpbm=$A.bpbm().drawTo($AEE.elements.$blockSettingsContent),$AEE.inputs.dropFiles=$A.newInput({id:"aee-drop-files",type:"file",name:"aee-drop-files"}).draw().hide(),$AEE.elements.$dropFilesCover=$('<div id="aee-drop-files-cover"></div>').text($A.translate("Drop the files here!")).appendTo($AEE.elements.$widget),$AEE.elements.$dropFilesProgressCover=$('<div id="aee-drop-files-progress-cover"></div>').appendTo($AEE.elements.$widget),$AEE.elements.$dropFilesProgressCoverText=$('<div id="aee-drop-files-progress-cover-text"></div>').text("Uploading files!").appendTo($AEE.elements.$dropFilesProgressCover),$AEE.elements.$dropFilesProgressBarBox=$('<div id="aee-drop-files-progress-bar-box"></div>').appendTo($AEE.elements.$dropFilesProgressCover),$AEE.elements.$dropFilesProgressBar=$('<div id="aee-drop-files-progress-bar"></div>').appendTo($AEE.elements.$dropFilesProgressBarBox),$AEE.elements.$dropFilesProgressBarText=$('<div id="aee-drop-files-progress-bar-text"></div>').appendTo($AEE.elements.$dropFilesProgressBarBox),$AEE.elements.$blockSettingsDynamicBox=$('<div id="aee-block-settings-dynamic-box" class="aee-block-settings-box"></div>').appendTo($AEE.elements.$blockSettingsContent),$AEE.elements.$zIndexStyle=$("<style></style>").appendTo($("body:first")),$AEE.inputs.blockSettingsDynamicCheckbox=$A.newInput2({type:"checkbox",labelBefore:$A.translate("Dynamic block"),checked:false,change:function(){if(this.checked()){$AEE.inputs.blockSettingsDynamicSegments.show();var a=$AEE.inputs.blockSettingsDynamicSegments.val()||[];$AEE.elements.$activeBlock.attr("data-dynamic-segments",a.join(","))}else $AEE.inputs.blockSettingsDynamicSegments.hide(),$AEE.elements.$activeBlock.removeAttr("data-dynamic-segments")}}),$AEE.inputs.blockSettingsDynamicSegments=$A.newInput2({type:"select",multiple:true,labelTop:$A.translate("Who should see this content block?"),options:[],change:function(){var a=this.automizySelect().val();if(!!a&&"function"===typeof a.join)$AEE.elements.$activeBlock.attr("data-dynamic-segments",a.join(","))}}).hide(),$AEE.forms.blockSettingsDynamic=$A.newForm().addInputs([$AEE.inputs.blockSettingsDynamicCheckbox,$AEE.inputs.blockSettingsDynamicSegments]).drawTo($AEE.elements.$blockSettingsDynamicBox),$AEE.elements.$blockSettingsDocumentBox=$('<div id="aee-block-settings-document-box" class="aee-block-settings-box"></div>').appendTo($AEE.elements.$blockSettingsContent),$AEE.inputs.blockSettingsResponsiveEmail=$A.newInput2({type:"checkbox",labelBefore:$A.translate("Responsive"),checked:true,change:function(){if(this.checked())$AEE.inputs.blockSettingsDocumentMaxWidth.labelBefore($A.translate("Max. width")),$AEE.elements.$document.attr("data-responsive-email","1");else $AEE.inputs.blockSettingsDocumentMaxWidth.labelBefore($A.translate("Width")),$AEE.elements.$document.attr("data-responsive-email","0")}}),$AEE.inputs.blockSettingsDocumentMaxWidth=$A.newInput2({type:"number",labelBefore:$A.translate("Max. width"),value:800,enter:function(){return this.change(),false},change:function(){$AEE.elements.$document[0].style.width=this.val()+"px"},create:function(){this.input().attr("min",300).attr("max",2500).pbmInput()}}),$AEE.inputs.blockSettingsDocumentOuterColor=$A.newInput2({type:"text",labelBefore:$A.translate("Outer color"),change:function(){$AEE.elements.$documentBox[0].style.backgroundColor=this.val(),$AEE.elements.$document.attr("data-outer-color",this.val())},create:function(){this.input().css({width:"29px",height:"25px","-webkit-box-shadow":"none","box-shadow":"none"}).addClass("automizy-bpbm-color-input").colpick({colorScheme:"dark",layout:"rgbhex",color:"#ffffff",onSubmit:function(a,b,c,d){$(d).css({backgroundColor:"#"+b,color:"#"+b}).val("#"+b).trigger("change").colpickHide()},onShow:function(a){(function(a){setTimeout(function(){var b=$(document);var c=$AEE.widget().width();var d=$AEE.widget().height();var e=parseInt(a.offsetWidth);var f=parseInt(a.offsetHeight);var g=parseInt(a.style.left)+e;var h=parseInt(a.style.top)+f;var i=g-c;var j=h-d;if(i>0)a.style.left=c-e+"px";if(j>0)a.style.top=d-f+"px"},10)})(a)}})}}),$AEE.inputs.blockSettingsPreviewText=$A.newInput2({type:"textarea",labelBefore:$A.translate("Preview text"),change:function(){$AEE.elements.$document.attr("data-preview-text",this.val())}}),$AEE.forms.blockSettingsDocument=$A.newForm().addInputs([$AEE.inputs.blockSettingsResponsiveEmail,$AEE.inputs.blockSettingsDocumentMaxWidth,$AEE.inputs.blockSettingsDocumentOuterColor,$AEE.inputs.blockSettingsPreviewText]).drawTo($AEE.elements.$blockSettingsDocumentBox),$('<style>#aee-document .aee-ui-state-highlight:before{content: "'+$A.translate("Drop here")+'"}</style>').appendTo("body:first"),$('<style>#aee-block-list .aee-ui-state-highlight:before{content: "'+$A.translate("Delete")+'"}</style>').appendTo("body:first"),!$AEE.d.values.logoLink)$AEE.logoLink("https://automizy.com");if(!$AEE.d.values.logoSrc)$AEE.logoSrc($AEE.d.config.dir+"/images/logo-automizy.png");if(!$AEE.d.values.title)$AEE.title($A.translate("Automizy Email Editor"));if(!$AEE.d.values.subject)$AEE.subject($A.translate("Test email"));if(!$AEE.d.functions.clickToPreview)$AEE.clickToPreview(function(){$AEE.dialogs.preview.open()});if(!$AEE.d.functions.clickToSendTest)$AEE.clickToSendTest(function(){$AEE.dialogs.sendTest.open()});if(!$AEE.d.functions.clickToSave)$AEE.clickToSave(function(){$AEE.save()});if(!$AEE.d.functions.clickToSaveAndExit)$AEE.clickToSaveAndExit(function(){$AEE.saveAndExit()});if(!$AEE.d.functions.clickToBack)$AEE.clickToBack(function(){if($AEE.saved)$AEE.close();else $A.confirm({title:$A.translate("You have unsaved edits in the campaign. Are you sure you want to exit without saving?"),ok:function(){$AEE.close()}})});if(!$AEE.d.functions.save)$AEE.save(function(a){if($AEE.newsletterId=$AEE.newsletterId||0,0===$AEE.newsletterId)return $AA.newsletters().insert({name:a.title,subject:"",tags:[],editorCode:a.editorCode,htmlCode:a.htmlCode,maxWidth:a.maxWidth}).done(function(a){$AEE.newsletterId=a.id}).error(function(){alert("Save error!")});else return $AA.newsletters().update({id:$AEE.newsletterId,name:a.title,subject:"",tags:[],editorCode:a.editorCode,htmlCode:a.htmlCode,maxWidth:a.maxWidth}).done(function(a){}).error(function(){alert("Save error!")})});if(!$AEE.d.functions.saveAndExit)$AEE.saveAndExit(function(a){$A.ajaxDocumentCover(1),$AEE.save().done(function(){$AEE.close()}).complete(function(){$A.ajaxDocumentCover(0)})});setTimeout(function(){setTimeout(function(){$AEE.elements.$blockList[0].addEventListener("touchmove",function(a){return a.preventDefault(),a.stopPropagation(),false},false),$AEE.elements.$documentBox[0].addEventListener("touchmove",function(a){return a.preventDefault(),a.stopPropagation(),false},false),$AEE.elements.$blockSettings[0].addEventListener("touchmove",function(a){return a.preventDefault(),a.stopPropagation(),false},false)},600),$AEE.buildBlockList(),$AEE.elements.$document.add(".aee-block-drop-zone").sortable($AEE.settings.sortable),$AEE.inputs.blockSettingsDocumentMaxWidth.labelAfter("px"),$AEE.layoutReady(),$AEE.setBlockSettings($AEE.elements.$document)},100)})}(),function(){$AEE.layoutReady(function(){if(!$AEE.touchable())return false;$AEE.elements.$blockTouchController=$('<div id="aee-block-touch-controller"></div>').appendTo($AEE.elements.$documentBox),$AEE.elements.$blockTouchDelete=$('<div id="aee-block-touch-controller-delete"></div>').appendTo($AEE.elements.$blockTouchController).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/block-move.png)"}).click(function(a){return a.preventDefault(),a.stopPropagation(),setTimeout(function(){if(confirm("Are you sure you want to delete this block?"))$AEE.elements.$blockHandle.appendTo($AEE.elements.$tmp),$AEE.elements.$activeBlock.remove(),$AEE.elements.$blockTouchController.hide()},20),false}),$AEE.elements.$blockTouchUp=$('<div id="aee-block-touch-controller-up"></div>').appendTo($AEE.elements.$blockTouchController).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/block-move.png)"}).click(function(a){return a.preventDefault(),a.stopPropagation(),$AEE.moveBlockUp($AEE.elements.$activeBlock),false}),$AEE.elements.$blockTouchDown=$('<div id="aee-block-touch-controller-down"></div>').appendTo($AEE.elements.$blockTouchController).css({backgroundImage:"url("+$AEE.d.config.dir+"/images/block-move.png)"}).click(function(){return event.preventDefault(),event.stopPropagation(),$AEE.moveBlockDown($AEE.elements.$activeBlock),false})})}(),function(){$AEE.d.functions.scriptLoadedFunctions=[],$AEE.scriptLoaded=function(a){if("function"===typeof a)return $AEE.d.functions.scriptLoadedFunctions.push(a),$AEE;$AEE.runTheFunctions($AEE.d.functions.scriptLoadedFunctions,$AEE,[$AEE.d.status])}}(),function(){$AEE.loadPlugins=function(){$AEE.loader={},function(){if("undefined"===typeof window.jQuery){var a=document.createElement("SCRIPT");a.src=$AEE.d.config.dir+"/vendor/jquery/jquery.min.js",a.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(a)}var b=function(a){if("function"===typeof window.jQuery)a(jQuery);else window.setTimeout(function(){b(a)},100)};b(function(a){var b=[];var c=[];var d=[];if("undefined"===typeof a.ui)d.push($AEE.d.config.dir+"/vendor/jquery-ui/theme.css"),d.push($AEE.d.config.dir+"/vendor/jquery-ui/jquery-ui.min.css"),b.push($AEE.d.config.dir+"/vendor/jquery-ui/jquery-ui.min.js");if(b.push($AEE.d.config.dir+"/vendor/jqueryui-touch-punch/jquery.ui.touch-punch.min.js"),"undefined"===typeof a().mousewheel)b.push($AEE.d.config.dir+"/vendor/jquery-mousewheel/jquery.mousewheel.min.js");if($AEE.touchable())if("undefined"===typeof Hammer)b.push($AEE.d.config.dir+"/vendor/hammer.js/hammer.min.js");if("undefined"===typeof prettyPrint)d.push($AEE.d.config.dir+"/vendor/prettify/sunburst.css"),b.push($AEE.d.config.dir+"/vendor/prettify/prettify.js");if("undefined"===typeof a().iphoneStyle)d.push($AEE.d.config.dir+"/vendor/iphone-style-checkboxes/style.css"),b.push($AEE.d.config.dir+"/vendor/iphone-style-checkboxes/iphone-style-checkboxes.js");if("undefined"===typeof a().colpick)d.push($AEE.d.config.dir+"/vendor/colpick/colpick.css"),b.push($AEE.d.config.dir+"/vendor/colpick/colpick.js");if("undefined"===typeof a().multiselect)d.push($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.css"),d.push($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.filter.css"),b.push($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.min.js"),b.push($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.filter.min.js");if("undefined"===typeof a().timepicker)d.push($AEE.d.config.dir+"/vendor/jquery-ui-timepicker-addon/jquery-ui-timepicker-addon.css"),b.push($AEE.d.config.dir+"/vendor/jquery-ui-timepicker-addon/jquery-ui-timepicker-addon.js");if("undefined"===typeof a().fileupload)b.push($AEE.d.config.dir+"/vendor/jquery-file-upload/jquery.fileupload.js"),b.push($AEE.d.config.dir+"/vendor/jquery-file-upload/jquery.iframe-transport.js");if("undefined"===typeof a().tinymce)b.push($AEE.d.config.dir+"/vendor/tinymce/tinymce.jquery.min.js"),b.push($AEE.d.config.dir+"/vendor/tinymce/jquery.tinymce.min.js");if("undefined"===typeof AutomizyJs)d.push($AEE.d.config.dir+"/vendor/automizy-js/automizy.min.css"),b.push($AEE.d.config.dir+"/vendor/automizy-js/automizy.min.js");if("undefined"===typeof AutomizyJsApi)b.push($AEE.d.config.dir+"/vendor/automizy-js-api/automizy.api.min.js");for(var e=0;e<d.length;e++){var f=document.getElementsByTagName("head")[0];var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.href=d[e],f.appendChild(g)}$AEE.d.status.scripts=b,$AEE.d.status.scriptsLength=b.length;var h=0;function i(c){a.getScript(c).complete(function(){if($AEE.d.status.loadedScripts++,$AEE.d.status.percent=$AEE.d.status.loadedScripts/$AEE.d.status.scriptsLength*100,$AEE.d.status.lastLoadedScript=this.url,$AEE.scriptLoaded(),$AEE.d.status.loadedScripts===$AEE.d.status.scriptsLength)$AEE.inited=true,$A.ajaxDocumentCover(false),tinyMCE.baseURL="vendor/tinymce",$AEE.ready(),$A.registerEvent("AutomizyEmailEditorBlockDragStart"),$A.registerEvent("AutomizyEmailEditorBlockDragStop"),$A.registerEvent("AutomizyEmailEditorBlockDragComplete"),$A.registerEvent("AutomizyEmailEditorBlockDragCreate");else i(b[++h])})}i(b[h]);for(var e=0;e<c.length;e++){var j=document.createElement("SCRIPT");j.src=c[e],j.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(j)}})}()}}(),function(){$AEE.init=function(){if(!$AEE.automizyInited){if(!$AEE.d.functions.open)$AEE.open(function(){});if(!$AEE.d.functions.close)$AEE.close(function(){});$AEE.loadPlugins()}return $AEE}}(),function(){$AEE.delay=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}()}(),function(){$AEE.screenSize=function(){return{x:window.innerWidth||document.documentElement.clientWidth||d.getElementsByTagName("body")[0].clientWidth,y:window.innerHeight||document.documentElement.clientHeight||d.getElementsByTagName("body")[0].clientHeight}}}(),function(){$AEE.layoutReady(function(){var a=true;$AEE.setLayoutByDisplay=function(){var b=$AEE.screenSize().x;var c=$AEE.screenSize().y;var d=422;var e=-61;var f=398;var g=0;var h=-61;var i=false;var j=false;var k=500;if(a)k=0,a=false;if($AEE.elements.$widget.removeClass("aee-width-lt-1000"),$AEE.elements.$widget.removeClass("aee-width-lt-1250"),$AEE.elements.$widget.removeClass("aee-width-lt-1450"),$AEE.settingsShowed)f=398,g=0,h=-61;else f=0,g=-398,h=0;if(b<1700)d=281;if(b<1450){if($AEE.settingsShowed)f=342;else f=0;$AEE.elements.$widget.addClass("aee-width-lt-1450")}if(b<1250)if($AEE.elements.$widget.addClass("aee-width-lt-1250"),$AEE.settingsShowed)d=0,e=0,f=342,g=0,h=-61;else d=281,e=-61,f=0,g=-342,h=0;if(b<1e3)$AEE.elements.$widget.addClass("aee-width-lt-1000");if(b<800){if(i=b,j=0,$AEE.settingsShowed)d=0,e=0,h=-61,g=0,f=342;else g=-342,h=0,f=0;if($AEE.blocksShowed)d=281,e=-61,h=0,g=-342,f=0;else d=0,e=0}if($AEE.elements.$blockList.stop().animate({width:d+"px",maxWidth:d+"px"},k),false===i)$AEE.elements.$editor.stop().animate({left:d+"px",width:b-d-f+"px"},k);else $AEE.elements.$editor.stop().animate({left:j+"px",width:i+"px"},k);$AEE.elements.$blockSettings.stop().animate({right:g+"px",width:f+"px"},k),$AEE.elements.$blocksIcon.stop().animate({left:e+"px"},k),$AEE.elements.$settingsIcon.stop().animate({right:h+"px"},k)},$AEE.setLayoutByDisplay()})}(),function(){$AEE.ready(function(){$(window).resize(function(){$AEE.delay(function(){$AEE.setLayoutByDisplay()},150)})})}(),function(){$AEE.ready(function(){$AEE.documentMouseDown=false,$AEE.documentMouseDownElement=null,$(document).mousedown(function(a){$AEE.documentMouseDownElement=a.target,$AEE.documentMouseDown=true}).click(function(a){if(!$AEE.documentMouseDown)return false;if(!$(a.target).closest(".aee-block").length&&$(a.target).closest("#aee-document-box").length>0)$AEE.setBlockSettings($AEE.elements.$document);if($(a.target).closest("#aee-editor").length>0)if($AEE.saved=false,$AEE.screenSize().x<800)$AEE.settingsShowed=false,$AEE.blocksShowed=false,$AEE.setLayoutByDisplay();if($(a.target).closest("#aee-mobilemenu").length<=0)$AEE.elements.$mobileMenu.stop().fadeOut()}).mouseup(function(a){setTimeout(function(){$AEE.documentMouseDown=false},10)}),$AEE.elements.$document.on("click",".aee-imagepicker-image-link",function(){return false})})}(),function(){$AEE.layoutReady(function(){$AEE.elements.$document.on("click",".aee-block",function(a){a.stopPropagation();var b=$(this);$AEE.elements.$document.find(".aee-block").not(b).removeClass("aee-active"),b.addClass("aee-active"),$AEE.setBlockSettings(b)}).on("mouseenter",".aee-block",function(a){if($AEE.dragging)return false;if(a.stopPropagation(),!$AEE.touchable()){var b=$(this);var c=-2;var d=4;if(b.hasClass("aee-active"))c=-4,d=8;if("undefined"===typeof b.data("$topCell"))b=$AEE.getBlock(b);$AEE.elements.$blockHandle.appendTo(b.data("$topCell")).show().css({left:c+"px",width:b.width()+d+"px"})}}).on("mouseleave",".aee-block",function(a){if($AEE.dragging)return false;a.stopPropagation();var b=$(this);b.find(".aee-block-handle").hide()})})}(),function(){$AEE.ready(function(){if(!$AEE.touchable())return false;var a=new Hammer($AEE.elements.$widget[0],{threshold:50});$AEE.panActive=true;var b;a.on("panleft panright tap press",function(a){if(!$AEE.touchable())return false;if(Math.abs(a.deltaX)<30||Math.abs(a.deltaY)>15)return false;if($AEE.dragging||$AEE.screenSize().x>=800)return false;if(clearTimeout(b),b=setTimeout(function(){$AEE.panActive=true},100),!$AEE.panActive)return false;if($($AEE.documentMouseDownElement).closest("[contenteditable]").length>0)return false;$AEE.panActive=false,setTimeout(function(){if($AEE.documentMouseDown=false,"panleft"===a.type){if(!$AEE.blocksShowed&&!$AEE.settingsShowed)$AEE.settingsShowed=true;else if($AEE.blocksShowed&&!$AEE.settingsShowed)$AEE.settingsShowed=false,$AEE.blocksShowed=false}else if("panright"===a.type)if(!$AEE.blocksShowed&&!$AEE.settingsShowed)$AEE.blocksShowed=true;else if(!$AEE.blocksShowed&&$AEE.settingsShowed)$AEE.settingsShowed=false,$AEE.blocksShowed=false;$AEE.setLayoutByDisplay()},10)})})}(),function(){$AEE.layoutReady(function(){var a=false;var b=true;var c;var d=[];var e=false;var f;$AEE.inputs.dropFiles.input().fileupload({url:$AEE.imageUploadApiUrl(),dataType:"json",dropZone:$AEE.elements.$widget,formData:{directory:"emaileditor"},beforeSend:function(a,b){b.url=$AEE.imageUploadApiUrl(),a.setRequestHeader("Authorization","Bearer "+$AA.token().get())},submit:function(c,d){if(1==d.originalFiles.length)a=true;if(!b)return false},dragover:function(){$AEE.elements.$dropFilesCover.show(),clearTimeout(c)},dragleave:function(){c=setTimeout(function(){$AEE.elements.$dropFilesCover.hide()},100)},send:function(a,b){console.log("UPLOAD FILE: "+b.files[0].name)},done:function(a,b){var c=b.result;var g=c[Object.keys(c)[0]].url;var h=Object.keys(c)[0];var i=$AEE.getExtension(h);if(d.push({name:h,url:g,ext:i}),"html"==i||"htm"==i||"xhtml"==i)e=true,f=g;console.log("FILE UPLOADED: "+h)},fail:function(a,b){console.log("FAIL:",b.errorThrown)},start:function(a){$AEE.elements.$dropFilesCover.hide(),$AEE.elements.$dropFilesProgressCover.show(),$AEE.elements.$dropFilesProgressBar.width(0+"%"),$AEE.elements.$dropFilesProgressBarText.text(0+"%")},progressall:function(a,b){var c=Math.min(100,parseInt(b.loaded/b.total*100,10));$AEE.elements.$dropFilesProgressBar.width(c+"%"),$AEE.elements.$dropFilesProgressBarText.text(c+"%")},stop:function(b){if(e)setTimeout(function(){$AEE.elements.$dropFilesProgressCover.hide(),d=[]},1500),$.ajax({url:f,timeout:6e5,dataType:"html",type:"GET",cache:false,ifModified:false,success:function(a){var b=$AEE.newBlock().appendTo($AEE.elements.$document).addClass("aee-html-block-item");
var c=b.data("$contentCell");c.html(a),c.css("padding",0),c.css("border","none"),c.find("a").each(function(){$(this).removeAttr("target")});for(var e=0;e<d.length;e++)if("undefined"!=typeof d[0])var f=c.find("img").filter(function(a){var b=$(this).attr("src");var a=b.lastIndexOf("/")+1;var c=b.substr(a);return d[e].name===c}).attr("src",d[e].url);$AEE.elements.$dropFilesProgressCover.hide(),$AEE.buildBlockListSetDisplay(),d=[]},error:function(){},beforeSend:function(){},complete:function(){}});else{if(a)if("undefined"!=typeof d[0]&&$.inArray(d[0].ext,["jpg","jpeg","png","gif","bmp","ico"])>=0){var c=$AEE.newBlock().appendTo($AEE.elements.$document).addClass("aee-image-block-item");var g=$("<img/>").attr({src:d[0].url,alt:d[0].name,title:d[0].name}).css({maxWidth:"100%"}).addClass("aee-image-block-image");c.data("$contentCell").html(g),setTimeout(function(){c.data("automizy-dropped",true),$AEE.setBlockSettings(c)},20)}$AEE.elements.$dropFilesProgressCover.hide(),d=[]}e=false,a=false}})})}(),function(){$AEE.ready(function(){$AEE.setPreviewScreenSize=function(a,b){$AEE.elements.$previewDialogScreen.stop().animate({width:a+"px",height:b+"px"},500,function(){})},$AEE.elements.$previewDialogContent=$('<div id="aee-preview-dialog-content"></div>'),$AEE.elements.$previewDialogLeftColumn=$('<div id="aee-preview-dialog-left-column"></div>').appendTo($AEE.elements.$previewDialogContent),$AEE.elements.$previewDialogRightColumn=$('<div id="aee-preview-dialog-right-column"></div>').appendTo($AEE.elements.$previewDialogContent),$AEE.elements.$previewDialogScreen=$('<div id="aee-preview-dialog-screen"></div>').appendTo($AEE.elements.$previewDialogRightColumn),$AEE.inputs.screenSizeSelect=$A.newInput2({labelTop:$A.translate("Select screen"),type:"select",options:[["general",$A.translate("General"),true],["480x800","Alcatel One Touch T10"],["600x1024","BlackBerry PlayBook"],["360x640","HTC Desire 700"],["320x533","Huawei Y300-0151"],["768x1024","iPad Air"],["320x480","iPhone 3/4"],["320x568","iPhone 5"],["375x627","iPhone 6"],["320x427","LG Optimus L3"],["360x598","Motorola Moto G"],["600x960","Nexus 7"],["800x1280","Nexus 10"],["320x480","Nokia Lumia"],["320x533","Samsung Galaxy Ace 2"],["360x598","Sony Xperia Z"],["320x534","ZTE T83"]],change:function(){var a=this.val();if("general"===a)a=$AEE.maxWidth()+"x600";var b=a.split("x");$AEE.inputs.screenSizeX.val(b[0]),$AEE.inputs.screenSizeY.val(b[1]),$AEE.setPreviewScreenSize(b[0],b[1])}}),$AEE.inputs.screenSizeX=$A.newInput2({labelTop:$A.translate("Screen width"),labelAfter:"px",type:"number",value:$AEE.maxWidth(),change:function(){$AEE.setPreviewScreenSize(this.val(),$AEE.inputs.screenSizeY.val())}}),$AEE.inputs.screenSizeX.input().attr("min",10).attr("max",5e3).pbmInput(),$AEE.inputs.screenSizeY=$A.newInput2({labelTop:$A.translate("Screen height"),labelAfter:"px",type:"number",value:600,change:function(){$AEE.setPreviewScreenSize($AEE.inputs.screenSizeX.val(),this.val())}}),$AEE.inputs.screenSizeY.input().attr("min",10).attr("max",5e3).pbmInput(),$AEE.inputs.previewSegments=$A.newInput2({type:"select",labelTop:$A.translate("A recipient from this segment"),options:[],change:function(){var a=this.val();$AEE.elements.$previewDialogScreen.find("[data-dynamic-segments]").each(function(){var b=$(this);var c=b.attr("data-dynamic-segments").split(",");if($.inArray(a,c)<0)b.hide();else b.show()})}}),$AEE.forms.preview=$A.newForm().addInputs([$AEE.inputs.screenSizeSelect,$AEE.inputs.screenSizeX,$AEE.inputs.screenSizeY,$AEE.inputs.previewSegments]).addButtons([$AEE.buttons.sendTestButton]).drawTo($AEE.elements.$previewDialogLeftColumn),$AEE.inputs.previewSegments.widget().css("margin-bottom","12px"),$AEE.dialogs.preview=$A.dialog({title:$A.translate("Preview"),positionY:"top",width:"85%",id:"aee-preview-dialog",content:$AEE.elements.$previewDialogContent,buttons:[{text:$A.translate("Close"),click:function(){$AEE.dialogs.preview.close()}}],open:function(){$AEE.elements.$previewDialogScreen.html($AEE.getHtmlCode()),$AEE.inputs.screenSizeSelect.val("general"),$AEE.inputs.screenSizeX.val($AEE.maxWidth()),$AEE.inputs.screenSizeY.val(600),$AEE.setPreviewScreenSize($AEE.maxWidth(),600),$AEE.inputs.previewSegments.val(Object.keys($AEE.d.segments)[0]||"").change()}})})}(),function(){$AEE.ready(function(){$AEE.inputs.sendTestRecipient=$A.newInput({label:$A.translate("Recipient"),name:"email",value:""}),$AEE.forms.sendTest=$A.newForm().addInput($AEE.inputs.sendTestRecipient),$AEE.dialogs.sendTest=$A.dialog({title:$A.translate("Send test"),positionY:"40px",id:"aee-send-test-dialog",content:$AEE.forms.sendTest,buttons:[{text:$A.translate("Cancel"),click:function(){$AEE.dialogs.sendTest.close()}},{skin:"simple-orange",text:$A.translate("Send"),click:function(){$A.ajaxDocumentCover(true,[$A.translate("Test email sending")]),$.ajax({url:$AEE.emailPreviewApiUrl(),type:"POST",dataType:"json",data:{recipient:$AEE.inputs.sendTestRecipient.val(),subject:$AEE.subject(),htmlCode:$AEE.getHtmlCode({conditions:false})},headers:{Authorization:"Bearer "+$AA.token().get()},beforeSend:function(a,b){b.url=$AEE.emailPreviewApiUrl()}}).complete(function(){$A.ajaxDocumentCover(false),$AEE.dialogs.sendTest.close()}).fail(function(a,b,c){})}}],open:function(){}})})}(),function(){$AEE.ready(function(){$.fn.removeStyle=function(a){var b=new RegExp(a+"[^;]+;?","g");return this.each(function(){$(this).attr("style",function(a,c){return c.replace(b,"")})})},$.fn.removeStyles=function(){for(var a=0;a<arguments.length;a++)$(this).removeStyle(arguments[a]);return this}})}(),function(){$AEE.ready(function(){$.fn.automizyResizabe=function(){return this.each(function(){var a=$(this);var b=false;if(a.closest(".aee-gallery-block-element").length>0)b=true;if(a.parent().hasClass("ui-wrapper")){var c=a.parent();var d=c[0].style.width;var e=a[0].style.minWidth||0;var f=c.height();if(a.insertAfter(c),c.remove(),b)a.resizable($AEE.settings.imgGalleryResizable),a.closest(".ui-wrapper").css({width:d,height:f,position:"relative"}),a.css({width:d,height:"auto",minWidth:e});else a.resizable($AEE.settings.imgResizable),a.closest(".ui-wrapper").css({width:d,height:f,position:"relative"}),a.css({width:"100%",height:"auto",minWidth:e})}else if(b)a.resizable($AEE.settings.imgGalleryResizable);else a.resizable($AEE.settings.imgResizable)})}})}(),function(){$AEE.title=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){$AEE.d.values.title=a,$AEE.elements.$headerTitle.text(a),$AEE.elements.$headerTitle.attr("title",a)}),$AEE;return $AEE.d.values.title},$AEE.subject=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){$AEE.d.values.subject=a}),$AEE;return $AEE.d.values.subject||$A.translate("Test email")},$AEE.zIndex=function(a){if("undefined"!==typeof a){if(false===a)return $AEE.elements.$zIndexStyle.replaceWith("<style></style>"),$AEE;return a=parseInt(a),$AEE.layoutReady(function(){$AEE.elements.$zIndexStyle.replaceWith("<style>"+"#automizy-email-editor{z-index:"+(a+2e3)+" !important}"+"#automizy-email-editor #aee-mobilemenu-icon{z-index:"+(a+65537)+" !important}"+"#automizy-email-editor #aee-mobilemenu{z-index:"+(a+65536)+" !important}"+"#automizy-email-editor #aee-drop-files-cover, #automizy-email-editor #aee-drop-files-progress-cover{z-index:"+(a+2001)+" !important}"+".colpick{z-index:"+(a+2010)+" !important}"+".automizy-dialog{z-index:"+(a+2001)+" !important}"+".mce-panel{z-index:"+(a+65538)+" !important}"+".mce-modal-block{z-index:"+(a+65536)+" !important}"+"</style>")}),$AEE}return $AEE.elements.$zIndexStyle},$AEE.dynamicBlocks=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){if($AEE.d.values.dynamicBlocks=$A.parseBoolean(a),$AEE.d.values.dynamicBlocks)$AEE.elements.$blockSettingsDynamicBox.show(),$AEE.inputs.previewSegments.show();else $AEE.elements.$blockSettingsDynamicBox.hide(),$AEE.inputs.previewSegments.hide()}),$AEE;return $AEE.d.values.dynamicBlocks},$AEE.logoSrc=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){$AEE.d.values.logoSrc=a,$AEE.elements.$logoImage.attr("src",a)}),$AEE;return $AEE.d.values.logoSrc},$AEE.logoLink=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){$AEE.d.values.logoLink=a,$AEE.elements.$logoLink.attr("href",a)}),$AEE;return $AEE.d.values.logoLink},$AEE.recipient=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){$AEE.inputs.sendTestRecipient.val(a)}),$AEE;return $AEE.inputs.sendTestRecipient.val()},$AEE.customFields=function(a){if("undefined"!==typeof a)return $AEE.d.customFields=a,$AEE;return $AEE.d.customFields},$AEE.systemFields=function(a){if("undefined"!==typeof a)return $AEE.d.systemFields=a,$AEE;return $AEE.d.systemFields},$AEE.links=function(a){if("undefined"!==typeof a)return $AEE.d.links=a,$AEE;return $AEE.d.links},$AEE.segments=function(a){if("undefined"!==typeof a)return $AEE.d.segments=a,$AEE.layoutReady(function(){$AEE.inputs.blockSettingsDynamicSegments.automizySelect().options(a),$AEE.inputs.previewSegments.options(a)}),$AEE;return $AEE.d.segments},$AEE.baseDir=function(a){if("undefined"!==typeof a)return $AEE.d.config.dir=a,$AEE;return $AEE.d.config.dir},$AEE.baseUrl=function(a){if("undefined"!==typeof a)return $AEE.d.config.url=a,$AEE;return $AEE.d.config.url},$AEE.imageUploadApiUrl=function(a){if("undefined"!==typeof a)return $AEE.d.config.imageUploadApiUrl=a,$AEE;return $AEE.d.config.imageUploadApiUrl},$AEE.imageGalleryApiUrl=function(a){if("undefined"!==typeof a)return $AEE.d.config.imageGalleryApiUrl=a,$AEE;return $AEE.d.config.imageGalleryApiUrl},$AEE.emailPreviewApiUrl=function(a){if("undefined"!==typeof a)return $AEE.d.config.emailPreviewApiUrl=a,$AEE;return $AEE.d.config.emailPreviewApiUrl},$AEE.maxWidth=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){$AEE.elements.$document[0].style.width=parseInt(a)+"px"}),$AEE;return parseInt($AEE.elements.$document[0].style.width)},$AEE.minWidth=function(a){if("undefined"!==typeof a)return $AEE.layoutReady(function(){$AEE.elements.$document[0].style.minWidth=parseInt(a)+"px"}),$AEE;return parseInt($AEE.elements.$document.css("min-width"))},$AEE.widget=function(){return $AEE.elements.$widget},$AEE.getDescription=function(){return $AEE.elements.$document.text().replace(/\n\s*\n/g,"\n").replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"").substr(0,255).trim()},$AEE.showSaveMessage=function(){$AEE.saved=true,$AEE.elements.$lastSave.html($A.translate("Last saved: %s",(new Date).toTimeString().substr(0,5)))},$AEE.clickToSendTest=function(a){if("function"===typeof a)$AEE.d.functions.clickToSendTest=a;else $AEE.layoutReady(function(){$AEE.d.functions.clickToSendTest.apply($AEE,[$AEE])});return $AEE},$AEE.clickToPreview=function(a){if("function"===typeof a)$AEE.d.functions.clickToPreview=a;else $AEE.layoutReady(function(){$AEE.d.functions.clickToPreview.apply($AEE,[$AEE])});return $AEE},$AEE.clickToSave=function(a){if("function"===typeof a)$AEE.d.functions.clickToSave=a;else $AEE.layoutReady(function(){$AEE.d.functions.clickToSave.apply($AEE,[$AEE])});return $AEE},$AEE.clickToSaveAndExit=function(a){if("function"===typeof a)$AEE.d.functions.clickToSaveAndExit=a;else $AEE.layoutReady(function(){$AEE.d.functions.clickToSaveAndExit.apply($AEE,[$AEE])});return $AEE},$AEE.clickToBack=function(a){if("function"===typeof a)$AEE.d.functions.clickToBack=a;else $AEE.layoutReady(function(){$AEE.d.functions.clickToBack.apply($AEE,[$AEE])});return $AEE},$AEE.open=function(a){if("function"===typeof a)$AEE.d.functions.open=a;else{var b=0;if("number"===typeof a)b=a;$AEE.ready(function(){$AEE.d.bodyOverflow=$("body").css("overflow")}),$AEE.layoutReady(function(){if(false!==$AEE.d.functions.open.apply($AEE,[$AEE]))$("body").css("overflow","hidden"),$AEE.widget().css({width:"100%",display:"block",opacity:0,zIndex:++window.AutomizyGlobalZIndex}).animate({opacity:1},b)})}return $AEE},$AEE.close=function(a){if("function"===typeof a)$AEE.d.functions.close=a;else{var b=0;if("number"===typeof a)b=a;$AEE.layoutReady(function(){if(false!==$AEE.d.functions.close.apply($AEE,[$AEE]))$("body").css("overflow",$AEE.d.bodyOverflow||"auto"),$AEE.widget().css({width:"100%",display:"block",opacity:1}).animate({opacity:0},b,function(){$AEE.zIndex(false),$(this).css("display","none")})})}return $AEE},$AEE.save=function(a){if("function"===typeof a)$AEE.d.functions.save=a;else return $AEE.showSaveMessage(),$AEE.d.functions.save.apply($AEE,[{editorCode:$AEE.getEditorCode(),htmlCode:$AEE.getHtmlCode(),title:$AEE.title(),maxWidth:$AEE.maxWidth(),links:$AEE.links()}]);return $AEE},$AEE.saveAndExit=function(a){if("function"===typeof a)$AEE.d.functions.saveAndExit=a;else return $AEE.showSaveMessage(),$AEE.d.functions.saveAndExit.apply($AEE,[{editorCode:$AEE.getEditorCode(),htmlCode:$AEE.getHtmlCode(),title:$AEE.title(),maxWidth:$AEE.maxWidth(),links:$AEE.links()}]);return $AEE}}(),function(){$AEE.getExtension=function(a){return a.substr((~-a.lastIndexOf(".")>>>0)+2).toLowerCase()}}(),function(){$AEE.isImageFile=function(a){var b=$AEE.getExtension(a);switch(b.toLowerCase()){case"jpg":case"jpeg":case"gif":case"bmp":case"png":return true}return false}}(),function(){$AEE.styleHtml=function(a,b){function c(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return true;return false}},this.get_content=function(){var a="";var b=[];var c=false;while("<"!==this.input.charAt(this.pos)){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(a,this.Utils.whitespace)){if(b.length)c=true;this.line_char_count--;continue}else if(c){if(this.line_char_count>=this.max_char){b.push("\n");for(var d=0;d<this.indent_level;d++)b.push(this.indent_string);this.line_char_count=0}else b.push(" "),this.line_char_count++;c=false}b.push(a)}return b.length?b.join(""):""},this.get_script=function(){var a="";var b=[];var c=new RegExp("</script"+">","igm");c.lastIndex=this.pos;var d=c.exec(this.input);var e=d?d.index:this.input.length;while(this.pos<e){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.pos),this.pos++,b.push(a)}return b.length?b.join(""):""},this.record_tag=function(a){if(this.tags[a+"count"])this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level;else this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level;this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){if(this.tags[a+"count"]){var b=this.tags.parent;while(b){if(a+this.tags[a+"count"]===b)break;b=this.tags[b+"parent"]}if(b)this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"];if(delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1==this.tags[a+"count"])delete this.tags[a+"count"];else this.tags[a+"count"]--}},this.get_tag=function(){var a="";var b=[];var c=false;do{if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(a,this.Utils.whitespace)){c=true,this.line_char_count--;continue}if("'"===a||'"'===a)if(!b[1]||"!"!==b[1])a+=this.get_unformatted(a),c=true;if("="===a)c=false;if(b.length&&"="!==b[b.length-1]&&">"!==a&&c){if(this.line_char_count>=this.max_char)this.print_newline(false,b),this.line_char_count=0;else b.push(" "),this.line_char_count++;c=false}b.push(a)}while(">"!==a);var d=b.join("");var e;if(d.indexOf(" ")!=-1)e=d.indexOf(" ");else e=d.indexOf(">");var f=d.substring(1,e).toLowerCase();if("/"===d.charAt(d.length-2)||this.Utils.in_array(f,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===f)this.record_tag(f),this.tag_type="SCRIPT";else if("style"===f)this.record_tag(f),this.tag_type="STYLE";else if(this.Utils.in_array(f,unformatted)){var g=this.get_unformatted("</"+f+">",d);b.push(g),this.tag_type="SINGLE"}else if("!"===f.charAt(0))if(f.indexOf("[if")!=-1){if(d.indexOf("!IE")!=-1){var g=this.get_unformatted("-->",d);b.push(g)}this.tag_type="START"}else if(f.indexOf("[endif")!=-1)this.tag_type="END",this.unindent();else if(f.indexOf("[cdata[")!=-1){var g=this.get_unformatted("]]>",d);b.push(g),this.tag_type="SINGLE"}else{var g=this.get_unformatted("-->",d);b.push(g),this.tag_type="SINGLE"}else{if("/"===f.charAt(0))this.retrieve_tag(f.substring(1)),this.tag_type="END";else this.record_tag(f),this.tag_type="START";if(this.Utils.in_array(f,this.Utils.extra_liners))this.print_newline(true,this.output)}return b.join("")},this.get_unformatted=function(a,b){if(b&&b.indexOf(a)!=-1)return"";var c="";var d="";var e=true;do{if(this.pos>=this.input.length)return d;if(c=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(c,this.Utils.whitespace)){if(!e){this.line_char_count--;continue}if("\n"===c||"\r"===c){d+="\n",this.line_char_count=0;continue}}d+=c,this.line_char_count++,e=true}while(d.indexOf(a)==-1);return d},this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token){var b=this.get_script();if("string"!==typeof b)return b;return a=js_beautify(b.replace(/^[\r\n]+/,""),{indent_size:this.indent_size,indent_char:this.indent_character,brace_style:this.brace_style}),[a,"TK_CONTENT"]}if("CONTENT"===this.current_mode)if(a=this.get_content(),"string"!==typeof a)return a;else return[a,"TK_CONTENT"];if("TAG"===this.current_mode)if(a=this.get_tag(),"string"!==typeof a)return a;else{var c="TK_TAG_"+this.tag_type;return[a,c]}},this.printer=function(a,b,c,d,e){this.input=a||"",this.output=[],this.indent_character=b,this.indent_string="",this.indent_size=c,this.brace_style=e,this.indent_level=0,this.max_char=d,this.line_char_count=0;for(var f=0;f<this.indent_size;f++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){if(this.line_char_count=0,!b||!b.length)return;if(!a)while(this.Utils.in_array(b[b.length-1],this.Utils.whitespace))b.pop();b.push("\n");for(var c=0;c<this.indent_level;c++)b.push(this.indent_string)},this.print_token=function(a){this.output.push(a)},this.indent=function(){this.indent_level++},this.unindent=function(){if(this.indent_level>0)this.indent_level--}},this}var d,e,f,g,h;b=b||{},e=b.indent_size||4,f=b.indent_char||" ",h=b.brace_style||"collapse",g=b.max_char||"70",unformatted=b.unformatted||["a"],d=new c,d.printer(a,f,e,g,h);while(true){var i=d.get_token();if(d.token_text=i[0],d.token_type=i[1],"TK_EOF"===d.token_type)break;switch(d.token_type){case"TK_TAG_START":case"TK_TAG_STYLE":d.print_newline(false,d.output),d.print_token(d.token_text),d.indent(),d.current_mode="CONTENT";break;case"TK_TAG_SCRIPT":d.print_newline(false,d.output),d.print_token(d.token_text),d.current_mode="CONTENT";break;case"TK_TAG_END":d.print_newline(true,d.output),d.print_token(d.token_text),d.current_mode="CONTENT";break;case"TK_TAG_SINGLE":d.print_newline(false,d.output),d.print_token(d.token_text),d.current_mode="CONTENT";break;case"TK_CONTENT":if(""!==d.token_text)d.print_newline(false,d.output),d.print_token(d.token_text);d.current_mode="TAG"}d.last_token=d.token_type,d.last_text=d.token_text}return d.output.join("")}}(),function(){$AEE.getBlock=function(a){if("undefined"!==typeof a){var b={aeeBlock:true,$topRow:a.find("tr:eq(0)")};return b.$middleRow=b.$topRow.siblings().eq(0),b.$bottomRow=b.$topRow.siblings().eq(1),b.$topCell=b.$topRow.find("td:eq(0)"),b.$leftCell=b.$middleRow.find("td:eq(0)"),b.$contentCell=b.$leftCell.siblings().eq(0),b.$rightCell=b.$leftCell.siblings().eq(1),b.$bottomCell=b.$bottomRow.find("td:eq(0)"),a.data(b),a}return $AEE.newBlock()}}(),function(){$AEE.rgbStyleToHex=function(a){if("string"!==typeof a)return"#000000";if("#"===a[0])return a;if("r"!==a[0])return"transparent";a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function b(a){return("0"+parseInt(a).toString(16)).slice(-2)}return"#"+b(a[1]||"0")+b(a[2]||"0")+b(a[3]||"0")}}(),function(){$AEE.getHtmlCodeInProgress=false;var a="";$AEE.getHtmlCode=function(b){if("undefined"===typeof b)var b={};if($AEE.getHtmlCodeInProgress)return a;$AEE.delay(function(){$AEE.getHtmlCodeInProgress=false},50);var c=$AEE.inputs.blockSettingsPreviewText.val();previewTextElement="";var d=$AEE.getDescription().substring(0,150);if(c.length>0)previewTextElement='<div style="display:none;font-size:1px;color:#333333;line-height:1px;max-height:0px;max-width:0px;opacity:0;overflow:hidden;">'+c+"</div>",d=c;var e=['<meta http-equiv="Content-Type" content="text/html; charset=utf-8">','<meta property="og:title" content="[{subject}]" />','<meta property="og:description" content="'+d+'..." />','<meta property="og:type" content="website" />','<meta property="og:url" content="[{webversion}]" />','<meta property="og:image" content="'+$AEE.d.config.url+'/images/automizy-logo-100x100.jpg" />'];var f=$AEE.maxWidth();var g=$AEE.inputs.blockSettingsResponsiveEmail.checked();a="",$AEE.getHtmlCodeInProgress=true,$AEE.elements.$document.css("max-width","none").find(".aee-block-content-cell").each(function(){var a=$(this);a.attr("data-width",a.width())}),$AEE.elements.$document.css("max-width","80%");var h=$AEE.elements.$document.clone(".aee-block-content-cell");var i=$AEE.newBlock({onlyContent:true});var j=i.data("$contentCell");var k=$AEE.elements.$document[0].style;h.removeAttr("style").appendTo(j),j.attr("style",["padding-top:"+(k.paddingTop||0),"padding-right:"+(k.paddingRight||0),"padding-bottom:"+(k.paddingBottom||0),"padding-left:"+(k.paddingLeft||0),"border-top-width:"+(k.borderTopWidth||0),"border-right-width:"+(k.borderRightWidth||0),"border-bottom-width:"+(k.borderBottomWidth||0),"border-left-width:"+(k.borderLeftWidth||0),"border-top-style:"+(k.borderTopStyle||"none"),"border-right-style:"+(k.borderRightStyle||"none"),"border-bottom-style:"+(k.borderBottomStyle||"none"),"border-left-style:"+(k.borderLeftStyle||"none"),"border-top-color:"+(k.borderTopColor||"transparent"),"border-right-color:"+(k.borderRightColor||"transparent"),"border-bottom-color:"+(k.borderBottomColor||"transparent"),"border-left-color:"+(k.borderLeftColor||"transparent"),"background-color:"+(k.backgroundColor||"transparent")].join("; ")),i.find(".automizy-remove-tr").parent().remove(),i.find(".aee-block-handle, .aee-image-block-content .aee-image-block-button, aee-image-block-content br, .aee-gallery-block-element.aee-empty, .aee-gallery-block-element-separator, .aee-columns-block-column:not(.aee-active)").remove(),i.find(".aee-block").each(function(){var a=$(this);if(a.hasClass("aee-html-block-item"))a.attr("data-html-block","true");else a.attr("data-not-html-block","true");var b=a.attr("data-dynamic-segments");if("undefined"!==typeof b)a.before('<!--[[CONDITION:{"blockshows":"segments","segments":['+b+"]}]]-->");else a.before('<!--[[CONDITION:{"blockshows":"all","segments":null}]]-->');a.after('<!--[[CONDITION:{"blockshows":"all","segments":null}]]-->')});function l(){var a=i.find(".aee-block.aee-columns-block-item:not(.aee-column-converted):first");if(a.length<=0)return false;var b=a.find(".aee-block-content-cell:first");var c=$A.parseBoolean(a.attr("data-floatable"));if(c&&g){var d=b.children(".aee-active");var e=b.attr("data-width");var h=d.length;var j=250;if(2===h)j=250;else if(3===h)j=200;else if(4===h)j=150;b.attr("align","center"),d.css("font-size",b.css("font-size")||"12px");var k=b.attr("style").replace("text-align:left","text-align:center");if(d.length>0)k+=";font-size:0;";b.attr("style",k.replace(/;;+/g,";").replace(/^;/g,"")),d.each(function(a){var b=$(this);var c=parseInt(b.attr("data-width-in-percent"));var d=parseInt(b.attr("data-min-width")||j);var g=e/100*c;var i=g-75;if(b.attr("style","display:inline-block; max-width:"+c+"%; min-width:"+d+"px; vertical-align:top; width:100%;"),b.add(b.children().first()).addClass("aee-wrapper").attr("data-mobile","android"),0===a)b.before('<!--[[COMMENT:[if (gte mso 9)|(IE)]><table align="center" border="0" cellspacing="0" cellpadding="0" width="'+f+'"><tr><td align="left" valign="top" width="'+g+'"><![endif]]]-->');else b.before('<!--[[COMMENT:[if (gte mso 9)|(IE)]></td><td align="left" valign="top" width="'+g+'"><![endif]]]-->');if(a>0&&a===h-1)b.after("<!--[[COMMENT:[if (gte mso 9)|(IE)]></td></tr></table><![endif]]]-->")})}else{var m=$('<table border="0" cellpadding="0" cellspacing="0" width="100%" style="width:100%; border:none; padding:0; margin:0"></table>');var n=$("<tr></tr>").appendTo(m);a.find(".aee-block-content-cell:first").children(".aee-active").each(function(){var a=$(this);var b=a.attr("data-width-in-percent");$('<td width="'+b+'%" valign="top" align="left" style="margin:0; padding:0; border:none; width:'+b+'%; vertical-align:top; text-align:left"></td>').html(a.html()).appendTo(n)}),a.find(".aee-block-content-cell:first").html(m)}a.addClass("aee-column-converted"),l()}l(),i.find(".aee-block").each(function(){var a=$(this);var b=a.find(".aee-block-content-cell:first");var c=parseInt(b.attr("data-width"));if(b.find(".aee-block-content-cell").length<=0)b.find(".aee-imagepicker-image").each(function(){var a=$(this);var b=a.parent();if(b.hasClass("ui-wrapper"))a.insertAfter(b),b.remove(),b=a.parent();if(a.closest(".aee-gallery-block-element").contents().unwrap(),a.removeStyles("resize","position","zoom","display","opacity"),a.is("[data-percent-width]"))a[0].style.maxWidth=a.attr("data-percent-width")+"%";if(a.is("[data-width]"))a[0].style.width=a.attr("data-width")+"px";if(a.attr("width",a.width()),a[0].style.margin=0,a[0].style.border="none",!g){var d=parseInt(a.attr("data-width"));var e=d+"px";var f=a.attr("data-percent-width")+"%";if(width=d+"px",c>d)c=d;a.attr("style","margin:0; border:none; max-width:"+f+"; width:"+c+"px"),a.attr("width",c)}});if(a.hasClass("aee-gallery-block-item")){var d=a.attr("data-space");$AEE.elements.$gallerySeparatorHtml.attr("width",d).css({width:d+"px"}),b.find(".aee-imagepicker-image").each(function(a){if(a>0)$(this).before($AEE.elements.$gallerySeparatorHtml[0].outerHTML)})}var e=b.attr("data-default-block-style");if("undefined"!==typeof e&&false!==e&&""!==e&&null!==e){var f=b.attr("style")+"; "+e;b.attr("style",f)}a.attr("style","width:100%; margin:0; padding:0; border:none; outline:none")}),i.find("[data-html-block]").removeAttr("data-html-block").each(function(){this.style.textAlign="left"}),i.find("[data-not-html-block]").addClass("aee-not-html-block").removeAttr("data-not-html-block"),i.find(".aee-not-html-block *").andSelf().removeAttr("id contenteditable data-mce-style spellcheck data-space data-percent-width data-width data-width-in-percent data-column-1 data-column-2 data-column-3 data-column-4 data-floatable data-responsive-email data-mobile"),i.find(".aee-not-html-block *").andSelf().not(".aee-noremoveclass").not(".aee-columns-block-column").not(".aee-wrapper").removeAttr("class");var m=i.find("a");var n=i.find("area");m.attr("rel","noopener noreferrer").attr("target","_blank");var o=[];m.add(n).each(function(){o.push($(this).attr("href"))}),o=o.filter(function(a,b){return o.indexOf(a)==b});var p=$AEE.links();var q={};for(var r=0;r<p.length;r++)q[p[r].url]=p[r].goal;var s=[];for(var r=0;r<o.length;r++){if("undefined"===typeof o[r]||null===o[r]||""===o[r])continue;s.push({url:o[r],goal:q[o[r]]||false})}$AEE.links(s);var t=i[0].outerHTML;t=t.replace(/(\[%7B|%7B%7B)(.*?)(%7D]|%7D%7D)/g,function(a,b,c,d){var e="{{";var f="}}";if("[%7B"===b)e="[{";if("%7D]"===d)f="}]";return e+c+f}).replace(/https:\/\/app\.(automizy|protopmail)\.com\/?(\[{|{{)(.*?)(}]|}})/g,function(a,b,c,d,e){return c+d+e}).replace(/\[\{(.*?)\}\]/g,function(a,b){var c="[{"+b+"}]";if("share_facebook"===b)c="https://www.facebook.com/sharer/sharer.php?u=[{webversion}]";else if("share_twitter"===b)c="http://twitter.com/share?via=protopmail&text="+encodeURI($AEE.subject())+"&url=[{webversion}]";else if("share_gplus"===b)c="https://plus.google.com/share?url=[{webversion}]";else if("share_linkedin"===b)c="http://www.linkedin.com/shareArticle?mini=true&title="+encodeURI($AEE.subject())+"&summary="+d+"...&source=Automizy&url=[{webversion}]";return c}).replace(/&amp;/g,"&");var u=$AEE.inputs.blockSettingsDocumentOuterColor.val();if(u.length<=0)u="#ffffff";if(g){e.push('<meta name="viewport" content="width=device-width, initial-scale=1.0"/>');var v=previewTextElement+'<div align="center" bgcolor="'+u+'" style="font-family: arial, helvetica, sans-serif; text-align:center; max-width:'+f+"px; background-color:"+u+'; margin:0 auto 0 auto">'+"<!--[if mso]>"+'<div align="center" class="outlook" style="text-align:center">'+'<table cellpadding="0" cellspacing="0" border="0" width="'+Math.min(f,800)+'" style="width:'+Math.min(f,800)+'px">'+"<tr>"+'<td style="font-family: arial, helvetica, sans-serif;">'+"<![endif]-->"+t+"<!--[if mso]>"+"</td>"+"</tr>"+"</table>"+"</div>"+"<![endif]-->"+"</div>"}else var v=previewTextElement+'<div align="center" width="'+f+'px" bgcolor="'+u+'" style="font-family: arial, helvetica, sans-serif; text-align:center; width:'+f+"px; background-color:"+u+'; margin:0 auto 0 auto">'+'<div align="center" class="outlook" style="text-align:center">'+'<table cellpadding="0" cellspacing="0" border="0" width="'+f+'" style="width:'+f+"px; min-width:"+f+'px">'+"<tr>"+'<td style="font-family: arial, helvetica, sans-serif;">'+t+"</td>"+"</tr>"+"</table>"+"</div>"+"</div>";var w=/<!--\[\[COMMENT:(.*?)\]\]-->/g;if(v=v.replace(w,"<!--$1-->"),a=""+"<!DOCTYPE>"+"<html>"+"<head>"+"<title></title>"+e.join("")+"<style>\r\n"+".aee-not-html-block, .aee-not-html-block table, .aee-not-html-block td, .aee-not-html-block a{-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;}\r\n"+".aee-not-html-block, .aee-not-html-block table, .aee-not-html-block td{mso-table-lspace: 0pt; mso-table-rspace: 0pt;}\r\n"+".aee-not-html-block img{-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none;}\r\n"+".aee-not-html-block, .aee-not-html-block table{border-collapse: collapse !important;}\r\n"+"@media screen and (max-width: 525px) {\r\n"+".aee-wrapper{\r\n"+"width:100% !important;\r\n"+"min-width:100% !important;\r\n"+"max-width:100% !important;\r\n"+"}\r\n"+"}\r\n"+"</style>"+"</head>"+'<body align="center" width="100%" bgcolor="'+u+'" style="font-family: arial, helvetica, sans-serif; text-align:center; width:100%; background-color:'+u+'">'+v+"</body>"+"</html>",true!==b.conditions)if(false===b.conditions||!$AEE.dynamicBlocks())a=a.replace(/<\!\-\-\[\[.*?\]\]\-\->/g,"");return a}}(),function(){$AEE.setEditorCode=function(a){return $AEE.ready(function(){var b=$(a);if($AEE.elements.$blockHandle.appendTo($AEE.elements.$tmp),$AEE.elements.$documentBox[0].style.backgroundColor="transparent","undefined"===typeof b[0])$AEE.elements.$document.html(a)[0].style.backgroundColor="#ffffff";else{var c=b[0].innerHTML;$AEE.elements.$document.html(c),$AEE.elements.$document.attr("style",b.attr("style")),$AEE.elements.$document.find(".aee-block").automizySetUp();var d=b.attr("data-outer-color");if("undefined"!==typeof d)$AEE.inputs.blockSettingsDocumentOuterColor.input().css({backgroundColor:d,color:d}).val(d).change().colpickSetColor(d);else $AEE.inputs.blockSettingsDocumentOuterColor.input().css({backgroundColor:"#ffffff",color:"#ffffff"}).val("#ffffff").colpickSetColor("#ffffff");var e=b.attr("data-responsive-email");e=$A.parseBoolean("undefined"===typeof e?true:e),$AEE.inputs.blockSettingsResponsiveEmail.checked(e).change();var f=b.attr("data-preview-text");f="undefined"===typeof f?"":f,$AEE.inputs.blockSettingsPreviewText.val(f).change(),$AEE.elements.$document.add(".aee-block-drop-zone").sortable($AEE.settings.sortable);
}}),setTimeout(function(){$AEE.setBlockSettings($AEE.elements.$document),$AEE.inputs.bpbm.change()},10),$AEE}}(),function(){$AEE.getEditorCode=function(){var a=$AEE.elements.$document.clone();return a.find(".aee-block-handle").remove(),a.find("*").removeAttr("id data-mce-style spellcheck mce-content-body data-mce-href mce-edit-focus"),a[0].outerHTML}}(),function(){$AEE.moveBlockUp=function(a){var a=a||$AEE.elements.$activeBlock;if(a.prev().hasClass("aee-block"))a.insertBefore(a.prev()),setTimeout(function(){$AEE.setBlockSettings(a)},10)},$AEE.moveBlockDown=function(a){var a=a||$AEE.elements.$activeBlock;if(a.next().hasClass("aee-block"))a.insertAfter(a.next()),setTimeout(function(){$AEE.setBlockSettings(a)},10)}}(),function(){$AEE.getTinyMceBuiltInMenu=function(a){var b=[];for(var c in $AEE.d.systemFields)b.push({text:$AEE.d.systemFields[c],onclick:function(b){return function(){a.insertContent(b)}}(c)});return b}}(),function(){$AEE.getTinyMceUserDefinedMenu=function(a){var b=[];for(var c in $AEE.d.customFields)b.push({text:$AEE.d.customFields[c],onclick:function(b){return function(){a.insertContent(b)}}(c)});return b}}(),function(){$AEE.hideTinyMcePanel=function(){$(".mce-floatpanel").hide(),$(document.activeElement).blur(),window.getSelection().removeAllRanges()}}(),function(){return console.log("%c AutomizyEmailEditor loaded! ","background: #000000; color: #bada55; font-size:14px"),$AEE}();
//# sourceMappingURL=automizy-email-editor.min.map