(function(){return window.AutomizyEmailEditor=window.$AEE=new function(){var a=this;a.d={version:"1.0.0",defines:{},dialogs:{},buttons:{},inputs:{},forms:{},config:{dir:"."},status:{scriptsLength:0,loadedScripts:0,percent:0},readyFunctions:[]},a.m={},a["default"]={},a.automizyInited=false,a.scriptLoaded=function(){}},$AEE})(),function(){$AEE.init=function(){if(!$AEE.automizyInited)AutomizyEmailEditor.loadPlugins()}}(),function(){$AEE.loadPlugins=function(){$AEE.loader={},function(){if("undefined"===typeof window.jQuery){var a=document.createElement("SCRIPT");a.src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js",a.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(a)}var b=function(a){if("function"===typeof window.jQuery)a(jQuery);else window.setTimeout(function(){b(a)},100)};b(function(a){var b=[];var c=[];if("undefined"===typeof prettyPrint)c.push($AEE.d.config.dir+"/vendor/prettify/sunburst.css"),b.push(a.getScript($AEE.d.config.dir+"/vendor/prettify/prettify.js"));if("undefined"===typeof a.ui)c.push($AEE.d.config.dir+"/vendor/jquery-ui/theme.css"),b.push(a.getScript($AEE.d.config.dir+"/vendor/jquery-ui/jquery-ui.min.js"));if("undefined"===typeof a().mousewheel)b.push(a.getScript($AEE.d.config.dir+"/vendor/jquery-ui-timepicker-addon/jquery-ui-timepicker-addon.js"));if("undefined"===typeof a().iphoneStyle)c.push($AEE.d.config.dir+"/vendor/iphone-style-checkboxes/style.css"),b.push(a.getScript($AEE.d.config.dir+"/vendor/iphone-style-checkboxes/iphone-style-checkboxes.js"));if("undefined"===typeof a().colpick)c.push($AEE.d.config.dir+"/vendor/colpick/colpick.css"),b.push(a.getScript($AEE.d.config.dir+"/vendor/colpick/colpick.js"));if("undefined"===typeof a().multiselect)c.push($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.css"),c.push($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.filter.css"),b.push(a.getScript($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.min.js")),b.push(a.getScript($AEE.d.config.dir+"/vendor/jquery-ui-multiselect/jquery.multiselect.filter.min.js"));if("undefined"===typeof a().timepicker)c.push($AEE.d.config.dir+"/vendor/jquery-ui-timepicker-addon/jquery-ui-timepicker-addon.css"),b.push(a.getScript($AEE.d.config.dir+"/vendor/jquery-ui-timepicker-addon/jquery-ui-timepicker-addon.js"));if("undefined"===typeof a().fileupload)b.push(a.getScript($AEE.d.config.dir+"/vendor/jquery-file-upload/jquery.fileupload.js")),b.push(a.getScript($AEE.d.config.dir+"/vendor/jquery-file-upload/jquery.iframe-transport.js"));if("undefined"===typeof AutomizyJs)c.push($AEE.d.config.dir+"/vendor/automizyjs/automizy.min.css"),b.push(a.getScript($AEE.d.config.dir+"/vendor/automizyjs/automizy.min.js"));if("undefined"===typeof AutomizyJsApi)b.push(a.getScript($AEE.d.config.dir+"/vendor/automizyjsapi/automizy.api.min.js"));for(var d=0;d<c.length;d++){var e=document.getElementsByTagName("head")[0];var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.href=c[d],e.appendChild(f)}$AEE.d.status.scripts=b,$AEE.d.status.scriptsLength=b.length;for(var d=0;d<b.length;d++)b[d].complete(function(){if($AEE.d.status.loadedScripts++,$AEE.d.status.percent=$AEE.d.status.loadedScripts/$AEE.d.status.scriptsLength*100,$AEE.d.status.lastLoadedScript=this.url,$AEE.scriptLoaded.apply($AEE,[$AEE.d.status]),$AEE.d.status.loadedScripts===$AEE.d.status.scriptsLength)$AEE.automizyInited=true,$A.ajaxDocumentCover(false),$AEE.ready()})})}()}}(),function(){$AEE.scriptLoaded=function(a){if("function"===typeof a)return $AEE.d.scriptLoaded=a,$AEE;$AEE.d.scriptLoaded.apply($AEE,[$AEE.d.status])}}(),function(){$AEE.ready=function(a){if("function"===typeof a){if(a.automizyInited=false,$AEE.d.readyFunctions.push(a),$AEE.automizyInited)a.apply($AEE,[]),a.automizyInited=true;return $AEE}for(var b=0;b<$AEE.d.readyFunctions.length;b++)if(!$AEE.d.readyFunctions[b].automizyInited)$AEE.d.readyFunctions[b].apply($AEE,[]),$AEE.d.readyFunctions[b].automizyInited=true}}(),function(){$AEE.ready(function(){$AEE.styleHtml=function(a,b){function c(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return true;return false}},this.get_content=function(){var a="";var b=[];var c=false;while("<"!==this.input.charAt(this.pos)){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(a,this.Utils.whitespace)){if(b.length)c=true;this.line_char_count--;continue}else if(c){if(this.line_char_count>=this.max_char){b.push("\n");for(var d=0;d<this.indent_level;d++)b.push(this.indent_string);this.line_char_count=0}else b.push(" "),this.line_char_count++;c=false}b.push(a)}return b.length?b.join(""):""},this.get_script=function(){var a="";var b=[];var c=new RegExp("</script"+">","igm");c.lastIndex=this.pos;var d=c.exec(this.input);var e=d?d.index:this.input.length;while(this.pos<e){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.pos),this.pos++,b.push(a)}return b.length?b.join(""):""},this.record_tag=function(a){if(this.tags[a+"count"])this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level;else this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level;this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){if(this.tags[a+"count"]){var b=this.tags.parent;while(b){if(a+this.tags[a+"count"]===b)break;b=this.tags[b+"parent"]}if(b)this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"];if(delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1==this.tags[a+"count"])delete this.tags[a+"count"];else this.tags[a+"count"]--}},this.get_tag=function(){var a="";var b=[];var c=false;do{if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(a,this.Utils.whitespace)){c=true,this.line_char_count--;continue}if("'"===a||'"'===a)if(!b[1]||"!"!==b[1])a+=this.get_unformatted(a),c=true;if("="===a)c=false;if(b.length&&"="!==b[b.length-1]&&">"!==a&&c){if(this.line_char_count>=this.max_char)this.print_newline(false,b),this.line_char_count=0;else b.push(" "),this.line_char_count++;c=false}b.push(a)}while(">"!==a);var d=b.join("");var e;if(d.indexOf(" ")!=-1)e=d.indexOf(" ");else e=d.indexOf(">");var f=d.substring(1,e).toLowerCase();if("/"===d.charAt(d.length-2)||this.Utils.in_array(f,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===f)this.record_tag(f),this.tag_type="SCRIPT";else if("style"===f)this.record_tag(f),this.tag_type="STYLE";else if(this.Utils.in_array(f,unformatted)){var g=this.get_unformatted("</"+f+">",d);b.push(g),this.tag_type="SINGLE"}else if("!"===f.charAt(0))if(f.indexOf("[if")!=-1){if(d.indexOf("!IE")!=-1){var g=this.get_unformatted("-->",d);b.push(g)}this.tag_type="START"}else if(f.indexOf("[endif")!=-1)this.tag_type="END",this.unindent();else if(f.indexOf("[cdata[")!=-1){var g=this.get_unformatted("]]>",d);b.push(g),this.tag_type="SINGLE"}else{var g=this.get_unformatted("-->",d);b.push(g),this.tag_type="SINGLE"}else{if("/"===f.charAt(0))this.retrieve_tag(f.substring(1)),this.tag_type="END";else this.record_tag(f),this.tag_type="START";if(this.Utils.in_array(f,this.Utils.extra_liners))this.print_newline(true,this.output)}return b.join("")},this.get_unformatted=function(a,b){if(b&&b.indexOf(a)!=-1)return"";var c="";var d="";var e=true;do{if(this.pos>=this.input.length)return d;if(c=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(c,this.Utils.whitespace)){if(!e){this.line_char_count--;continue}if("\n"===c||"\r"===c){d+="\n",this.line_char_count=0;continue}}d+=c,this.line_char_count++,e=true}while(d.indexOf(a)==-1);return d},this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token){var b=this.get_script();if("string"!==typeof b)return b;return a=js_beautify(b.replace(/^[\r\n]+/,""),{indent_size:this.indent_size,indent_char:this.indent_character,brace_style:this.brace_style}),[a,"TK_CONTENT"]}if("CONTENT"===this.current_mode)if(a=this.get_content(),"string"!==typeof a)return a;else return[a,"TK_CONTENT"];if("TAG"===this.current_mode)if(a=this.get_tag(),"string"!==typeof a)return a;else{var c="TK_TAG_"+this.tag_type;return[a,c]}},this.printer=function(a,b,c,d,e){this.input=a||"",this.output=[],this.indent_character=b,this.indent_string="",this.indent_size=c,this.brace_style=e,this.indent_level=0,this.max_char=d,this.line_char_count=0;for(var f=0;f<this.indent_size;f++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){if(this.line_char_count=0,!b||!b.length)return;if(!a)while(this.Utils.in_array(b[b.length-1],this.Utils.whitespace))b.pop();b.push("\n");for(var c=0;c<this.indent_level;c++)b.push(this.indent_string)},this.print_token=function(a){this.output.push(a)},this.indent=function(){this.indent_level++},this.unindent=function(){if(this.indent_level>0)this.indent_level--}},this}var d,e,f,g,h;b=b||{},e=b.indent_size||4,f=b.indent_char||" ",h=b.brace_style||"collapse",g=b.max_char||"70",unformatted=b.unformatted||["a"],d=new c,d.printer(a,f,e,g,h);while(true){var i=d.get_token();if(d.token_text=i[0],d.token_type=i[1],"TK_EOF"===d.token_type)break;switch(d.token_type){case"TK_TAG_START":case"TK_TAG_STYLE":d.print_newline(false,d.output),d.print_token(d.token_text),d.indent(),d.current_mode="CONTENT";break;case"TK_TAG_SCRIPT":d.print_newline(false,d.output),d.print_token(d.token_text),d.current_mode="CONTENT";break;case"TK_TAG_END":d.print_newline(true,d.output),d.print_token(d.token_text),d.current_mode="CONTENT";break;case"TK_TAG_SINGLE":d.print_newline(false,d.output),d.print_token(d.token_text),d.current_mode="CONTENT";break;case"TK_CONTENT":if(""!==d.token_text)d.print_newline(false,d.output),d.print_token(d.token_text);d.current_mode="TAG"}d.last_token=d.token_type,d.last_text=d.token_text}return d.output.join("")}})}(),function(){return console.log("%c AutomizyEmailEditor loaded! ","background: #000000; color: #bada55; font-size:14px"),$AEE}();
//# sourceMappingURL=automizy-email-editor.min.map